<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Devis ministériels — Grille d'évaluation</title>
<style>
/* === LCI BRAND FONTS v4.4.6 === */
@font-face { font-family:'Modern Gothic'; font-weight:400; font-display:swap;
  src:local('Modern Gothic'),local('Modern Gothic Regular'),
  url('https://dam.lcieducation.com/1fipm6Snk5jh2rLnFu4uq2hg8_sNzVmOTU5OWM0YzA4MDQ5/ModernGothic-Regular.woff2') format('woff2'); }
@font-face { font-family:'Modern Gothic'; font-weight:500; font-display:swap;
  src:local('Modern Gothic Medium'),
  url('https://dam.lcieducation.com/1fidCrXy5z5kbAmnhACmEhth5_sYWE3Njc1ZTY2OGYwM2E1/ModernGothic-Medium.woff2') format('woff2'); }
@font-face { font-family:'Modern Gothic'; font-weight:700; font-display:swap;
  src:local('Modern Gothic Bold'),
  url('https://dam.lcieducation.com/1fihEASn3qmjdpL2S77vCoz7w_sOWYzOTAxMGM2OTk3OTI5/ModernGothic-Bold.woff2') format('woff2'); }

/* === LCI DESIGN TOKENS === */
:root {
  --blue:        #00587c;
  --blue-dark:   #00435e;
  --blue-light:  #e0ebef;
  --blue-mid:    #b8d0da;
  --red:         #eb2d37;
  --red-light:   #fde8e9;
  --red-mid:     #f7abaf;
  --cream:       #f8f5e9;
  --cream-dark:  #e5e2d6;
  --cream-darker:#c7c4ba;
  --charcoal:    #07181e;
  --ch700:       #2a3438;
  --ch600:       #343d41;
  --ch500:       #424f54;
  --ch400:       #576266;
  --ch300:       #6d7478;
  --ch200:       #9ca3a5;
  --ch100:       #babfc0;
  --ch50:        #e1e3e4;
  --white:       #fff;
  --obl-sel:     #c2dae3;
  --opt-sel:     #f5cdd0;
  --dur:         0.2s;
  --ease:        cubic-bezier(0.4,0.14,0.3,1);
  --r:           6px;
  --rl:          10px;
  --auto-bg:     rgba(255,200,0,.18); /* highlight for auto-copied unedited text */
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:14px}
body{background:var(--cream);color:var(--charcoal);font-family:'Modern Gothic',system-ui,sans-serif;font-weight:400;line-height:1.5;min-height:100vh}
h1,h2,h3,h4,h5,h6{font-weight:400;letter-spacing:-.03em;line-height:1}
input,select,textarea,button{font-family:inherit}

/* ── HEADER ── */
header{background:var(--charcoal);height:52px;display:flex;align-items:center;gap:16px;padding:0 28px;position:sticky;top:0;z-index:200}
header h1{font-size:.95rem;color:var(--white)}
.hdr-right{margin-left:auto;display:flex;align-items:center;gap:10px}

/* Language toggle */
.lang-toggle{display:flex;background:var(--ch700);border-radius:100px;padding:2px;gap:2px}
.lang-btn{background:transparent;border:none;color:var(--ch300);font-size:.72rem;font-weight:500;padding:4px 10px;border-radius:100px;cursor:pointer;transition:all var(--dur) var(--ease);letter-spacing:.04em}
.lang-btn.active{background:var(--blue);color:var(--white)}

/* Import/Export buttons */
.btn-icon{background:transparent;border:1px solid var(--ch600);color:var(--ch200);font-size:.72rem;padding:5px 12px;border-radius:var(--r);cursor:pointer;transition:all var(--dur) var(--ease)}
.btn-icon:hover{border-color:var(--ch400);color:var(--white)}

/* ── SHELL ── */
.shell{max-width:1200px;margin:0 auto;padding:24px 28px 80px}

/* ── PROGRAM SELECTOR ── */
.selector-row{display:flex;align-items:center;gap:12px;margin-bottom:18px}
.selector-row label{font-size:.7rem;letter-spacing:.08em;text-transform:uppercase;color:var(--ch300);white-space:nowrap}
select#prog-select{flex:1;max-width:520px;background:var(--white);color:var(--charcoal);border:1px solid var(--cream-darker);border-radius:var(--r);padding:8px 34px 8px 12px;font-size:.93rem;cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' fill='none'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%236d7478' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;transition:border-color var(--dur)}
select#prog-select:focus{outline:2px solid var(--blue-mid);outline-offset:1px;border-color:var(--blue)}

/* ── META BAR ── */
#prog-meta{display:none;background:var(--charcoal);border-radius:var(--rl);padding:12px 20px;margin-bottom:20px;gap:24px;flex-wrap:wrap;align-items:center}
#prog-meta.visible{display:flex}
.meta-item{display:flex;flex-direction:column;gap:1px}
.meta-label{font-size:.58rem;letter-spacing:.1em;text-transform:uppercase;color:var(--ch300)}
.meta-value{font-size:.82rem;color:var(--white)}
.meta-value a{color:var(--blue-mid);text-decoration:none;font-size:.72rem}
.meta-pill{padding:2px 9px;border-radius:100px;font-size:.72rem}
.meta-pill.obl{background:rgba(0,88,124,.35);color:var(--blue-mid)}
.meta-pill.opt{background:rgba(235,45,55,.2);color:var(--red-mid)}

/* ── TWO-COLUMN LISTS ── */
.lists-area{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-bottom:18px}
@media(max-width:680px){.lists-area{grid-template-columns:1fr}}
.list-col{display:flex;flex-direction:column}
.col-header{display:flex;align-items:center;gap:8px;margin-bottom:5px}
.col-header h2{font-size:.82rem;font-weight:500;letter-spacing:-.01em}
.col-header.obl h2{color:var(--blue-dark)}
.col-header.opt h2{color:var(--red)}
.col-badge{font-size:.6rem;padding:2px 7px;border-radius:100px;font-weight:500}
.col-header.obl .col-badge{background:var(--blue-light);color:var(--blue-dark);border:1px solid var(--blue-mid)}
.col-header.opt .col-badge{background:var(--red-light);color:var(--red);border:1px solid var(--red-mid)}
.col-hint{font-size:.65rem;color:var(--ch300);margin-bottom:4px}
.comp-listbox{background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--r);height:240px;overflow-y:auto}
.list-item{display:flex;align-items:flex-start;gap:8px;padding:7px 10px;cursor:pointer;border-bottom:1px solid var(--cream-dark);user-select:none;transition:background var(--dur) var(--ease)}
.list-item:last-child{border-bottom:none}
.list-item:hover{background:var(--cream)}
.list-item.selected.obl{background:var(--obl-sel)}
.list-item.selected.opt{background:var(--opt-sel)}
.li-check{width:13px;height:13px;border-radius:3px;border:1.5px solid var(--cream-darker);flex-shrink:0;margin-top:2px;display:flex;align-items:center;justify-content:center;transition:all var(--dur) var(--ease);background:var(--white)}
.list-item.selected.obl .li-check{background:var(--blue);border-color:var(--blue)}
.list-item.selected.opt .li-check{background:var(--red);border-color:var(--red)}
.li-check svg{display:none}.list-item.selected .li-check svg{display:block}
.li-code{font-size:.62rem;font-weight:500;letter-spacing:.04em;white-space:nowrap;flex-shrink:0;padding:2px 5px;border-radius:3px;margin-top:1px;line-height:1.5}
.list-item.obl .li-code{background:var(--blue-light);color:var(--blue-dark)}
.list-item.opt .li-code{background:var(--red-light);color:var(--red)}
.li-title{font-size:.79rem;color:var(--ch600);line-height:1.4}
.list-item.selected .li-title{color:var(--charcoal)}
.list-empty{padding:18px 12px;font-size:.72rem;color:var(--ch300);text-align:center}

/* ── ACTION ROW ── */
.action-row{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:12px 16px;background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--rl);margin-bottom:24px}
.sel-summary{display:flex;align-items:center;gap:12px;flex-wrap:wrap;font-size:.78rem;color:var(--ch500)}
.sel-summary span.cnt{font-weight:500}
.cnt.obl{color:var(--blue-dark)}.cnt.opt{color:var(--red)}
.action-btns{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

/* ── BUTTONS ── */
.btn-primary{background:var(--blue);color:var(--white);border:none;border-radius:var(--r);padding:9px 20px;font-size:.84rem;font-weight:500;cursor:pointer;letter-spacing:-.01em;transition:background var(--dur) var(--ease),transform var(--dur) var(--ease);white-space:nowrap}
.btn-primary:hover{background:var(--blue-dark);transform:translateY(-1px)}
.btn-primary:active{transform:translateY(0)}
.btn-primary:disabled{background:var(--ch100);color:var(--ch300);cursor:not-allowed;transform:none}
.btn-secondary{background:transparent;color:var(--ch500);border:1px solid var(--cream-darker);border-radius:var(--r);padding:8px 14px;font-size:.78rem;cursor:pointer;transition:all var(--dur) var(--ease);white-space:nowrap}
.btn-secondary:hover{background:var(--cream);color:var(--ch600)}
.btn-red{background:var(--red);color:var(--white);border:none;border-radius:var(--r);padding:9px 18px;font-size:.84rem;font-weight:500;cursor:pointer;transition:all var(--dur);white-space:nowrap}
.btn-red:hover{background:#ce2831}

/* ── ELEMENT SECTIONS (post "show elements") ── */
#elements-area{display:none}
#elements-area.visible{display:block}
.elements-header{display:flex;align-items:baseline;gap:10px;margin-bottom:18px;padding-bottom:12px;border-bottom:2px solid var(--charcoal)}
.elements-header h2{font-size:1.1rem;letter-spacing:-.03em}
.elements-header .hdr-count{font-size:.72rem;color:var(--ch300)}
.comp-section{margin-bottom:20px;background:var(--white);border-radius:var(--rl);border:1px solid var(--cream-darker);overflow:hidden}
.comp-section-header{display:flex;align-items:center;gap:9px;padding:12px 16px;border-bottom:1px solid var(--cream-dark)}
.comp-section-header.obl{border-left:4px solid var(--blue)}
.comp-section-header.opt{border-left:4px solid var(--red)}
.cs-code{font-size:.67rem;font-weight:500;letter-spacing:.04em;padding:2px 6px;border-radius:3px;white-space:nowrap;flex-shrink:0}
.comp-section-header.obl .cs-code{background:var(--blue-light);color:var(--blue-dark)}
.comp-section-header.opt .cs-code{background:var(--red-light);color:var(--red)}
.cs-title{font-size:.9rem;color:var(--charcoal);line-height:1.35;flex:1;letter-spacing:-.01em}
.cs-type{font-size:.59rem;letter-spacing:.06em;text-transform:uppercase;padding:2px 7px;border-radius:100px;flex-shrink:0}
.comp-section-header.obl .cs-type{background:var(--blue-light);color:var(--blue-dark);border:1px solid var(--blue-mid)}
.comp-section-header.opt .cs-type{background:var(--red-light);color:var(--red);border:1px solid var(--red-mid)}
.cs-context{padding:8px 16px;font-size:.72rem;color:var(--ch400);line-height:1.5;background:var(--cream);border-bottom:1px solid var(--cream-dark)}
.cs-context-lbl{font-size:.58rem;letter-spacing:.08em;text-transform:uppercase;color:var(--ch300);display:block;margin-bottom:2px}
.el-listbox-wrap{padding:10px 16px 12px}
.el-hint{font-size:.65rem;color:var(--ch300);margin-bottom:4px}
.el-listbox{background:var(--cream);border:1px solid var(--cream-darker);border-radius:var(--r);overflow:hidden}
.el-item{display:flex;align-items:flex-start;gap:8px;padding:7px 10px;cursor:pointer;border-bottom:1px solid var(--cream-dark);user-select:none;transition:background var(--dur)}
.el-item:last-child{border-bottom:none}
.el-item:hover{background:var(--white)}
.el-item.selected.obl{background:var(--obl-sel)}
.el-item.selected.opt{background:var(--opt-sel)}
.el-item.selected.obl .li-check{background:var(--blue);border-color:var(--blue)}
.el-item.selected.opt .li-check{background:var(--red);border-color:var(--red)}
.el-num{font-size:.62rem;color:var(--ch300);flex-shrink:0;min-width:16px;margin-top:2px}
.el-desc{font-size:.79rem;color:var(--ch600);line-height:1.4}
.el-item.selected .el-desc{color:var(--charcoal)}

/* ── RUBRIC CONFIG AREA ── */
#rubric-config{display:none}
#rubric-config.visible{display:block}
.config-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px;padding-bottom:12px;border-bottom:2px solid var(--charcoal)}
.config-header h2{font-size:1.1rem;letter-spacing:-.03em}

/* Scale & Total row */
.config-top-row{display:flex;gap:16px;flex-wrap:wrap;align-items:flex-start;margin-bottom:20px}
.config-box{background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--rl);padding:14px 18px}
.config-box h3{font-size:.78rem;font-weight:500;color:var(--ch500);letter-spacing:.02em;text-transform:uppercase;margin-bottom:10px}
.total-box{flex-shrink:0;min-width:180px}
.total-input-wrap{display:flex;align-items:center;gap:8px}
.total-input-wrap input[type=number]{width:90px;background:var(--cream);border:1px solid var(--cream-darker);border-radius:var(--r);padding:7px 10px;font-size:1.1rem;font-weight:500;color:var(--charcoal);text-align:center}
.total-input-wrap input[type=number]:focus{outline:2px solid var(--blue-mid);border-color:var(--blue)}
.total-input-wrap span{font-size:.78rem;color:var(--ch400)}

/* Scale display (read-only in main; edit in drawer) */
.scale-box{flex:1;min-width:260px}
.scale-pills{display:flex;gap:6px;flex-wrap:wrap;align-items:center}
.scale-pill{display:flex;align-items:center;gap:5px;background:var(--cream);border:1px solid var(--cream-darker);border-radius:var(--r);padding:5px 10px;font-size:.78rem}
.scale-pill .pill-label{font-weight:500;color:var(--charcoal)}
.scale-pill .pill-weight{font-size:.65rem;color:var(--ch400)}
.btn-edit-scale{background:transparent;border:1px dashed var(--blue-mid);color:var(--blue);font-size:.72rem;padding:5px 12px;border-radius:var(--r);cursor:pointer;transition:all var(--dur)}
.btn-edit-scale:hover{background:var(--blue-light)}

/* Criteria config cards */
.crit-config-section{margin-bottom:16px}
.crit-section-hdr{background:var(--charcoal);color:var(--white);padding:8px 14px;border-radius:var(--r) var(--r) 0 0;font-size:.78rem;display:flex;align-items:center;gap:8px}
.crit-section-hdr .crit-hdr-code{font-size:.65rem;background:rgba(255,255,255,.15);padding:1px 6px;border-radius:3px}
.crit-section-hdr .crit-hdr-title{flex:1;opacity:.85}
/* Element sub-header */
.el-subhdr{background:var(--cream-dark);padding:6px 14px;font-size:.74rem;color:var(--ch600);display:flex;align-items:center;gap:6px;border-bottom:1px solid var(--cream-darker)}
.el-subhdr-num{font-size:.62rem;color:var(--ch400)}
/* Criteria rows */
.crit-row{padding:10px 14px;border-bottom:1px solid var(--cream-dark);background:var(--white)}
.crit-row:last-child{border-bottom:none;border-radius:0 0 var(--r) var(--r)}
.crit-row-top{display:flex;align-items:flex-start;gap:10px}
.crit-row-text{flex:1;font-size:.78rem;color:var(--ch600);line-height:1.45;padding-top:2px}
.crit-row-controls{display:flex;align-items:center;gap:8px;flex-shrink:0}
.pts-input{width:58px;background:var(--cream);border:1px solid var(--cream-darker);border-radius:var(--r);padding:5px 8px;font-size:.82rem;text-align:center;color:var(--charcoal)}
.pts-input:focus{outline:2px solid var(--blue-mid);border-color:var(--blue)}
.pts-inpu
.pts-label{font-size:.65rem;color:var(--ch400);white-space:nowrap}
.toggle-sub{background:transparent;border:1px solid var(--cream-darker);color:var(--ch400);font-size:.68rem;padding:4px 9px;border-radius:var(--r);cursor:pointer;white-space:nowrap;transition:all var(--dur)}
.toggle-sub:hover{background:var(--cream)}
.toggle-sub.active{background:var(--blue-light);border-color:var(--blue-mid);color:var(--blue-dark)}
.crit-scale-select{background:var(--cream);border:1px solid var(--cream-darker);border-radius:var(--r);padding:4px 7px;font-family:inherit;font-size:.68rem;color:var(--ch600);cursor:pointer;max-width:140px}
.crit-scale-select:focus{outline:2px solid var(--blue-mid);border-color:var(--blue)}
/* Subcriteria builder */
.sub-builder{margin-top:8px;padding:8px 10px;background:var(--cream);border:1px solid var(--cream-darker);border-radius:var(--r);display:none}
.sub-builder.open{display:block}
.sub-row{display:flex;align-items:center;gap:6px;margin-bottom:5px}
.sub-row:last-of-type{margin-bottom:8px}
.sub-label-input{flex:1;background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--r);padding:5px 8px;font-size:.76rem;color:var(--charcoal)}
.sub-label-input.auto-copy{background:var(--auto-bg);border-color:#cc9a00}
.sub-label-input:focus{outline:2px solid var(--blue-mid);border-color:var(--blue);background:var(--white)}
.sub-pts-input{width:52px;background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--r);padding:5px 7px;font-size:.76rem;text-align:center}
.sub-pts-input:focus{outline:2px solid var(--blue-mid);border-color:var(--blue)}
.sub-pts-input
.btn-rm-sub{background:transparent;border:none;color:var(--ch300);font-size:1rem;cursor:pointer;line-height:1;padding:2px 5px;border-radius:3px;transition:color var(--dur)}
.btn-rm-sub:hover{color:var(--red)}
.sub-add-row{display:flex;align-items:center;gap:8px}
.sub-sum-display{font-size:.65rem;padding:2px 8px;border-radius:100px}
.sub-sum-display.ok{background:#d4edda;color:#155724}
.sub-sum-display.over{background:var(--red-light);color:var(--red)}
/* Points budget bar */
/* ── SCALE DRAWER ── */
#scale-drawer{position:fixed;top:0;right:-440px;width:430px;height:100vh;background:var(--white);border-left:1px solid var(--cream-darker);box-shadow:-8px 0 32px rgba(7,24,30,.12);z-index:500;transition:right .3s var(--ease);display:flex;flex-direction:column}
#scale-drawer.open{right:0}
.drawer-header{background:var(--charcoal);color:var(--white);padding:16px 20px;display:flex;align-items:center;gap:10px;flex-shrink:0}
.drawer-header h3{font-size:.95rem;flex:1}
.btn-close-drawer{background:transparent;border:none;color:var(--ch300);font-size:1.4rem;cursor:pointer;line-height:1;padding:2px 6px;border-radius:3px;transition:color var(--dur)}
.btn-close-drawer:hover{color:var(--white)}
.drawer-body{flex:1;overflow-y:auto;padding:18px 20px}
.drawer-section-lbl{font-size:.68rem;letter-spacing:.08em;text-transform:uppercase;color:var(--ch400);margin-bottom:8px;margin-top:16px;display:block}
.drawer-section-lbl:first-child{margin-top:0}
/* Scale list in drawer */
.scale-editor-row{display:flex;align-items:center;gap:8px;margin-bottom:6px;padding:7px 10px;background:var(--cream);border:1px solid var(--cream-dark);border-radius:var(--r)}
.scale-editor-row input.scale-lbl{flex:1;background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--r);padding:4px 8px;font-size:.82rem}
.scale-editor-row input.scale-lbl.auto-copy{background:var(--auto-bg);border-color:#cc9a00}
.scale-editor-row input.scale-lbl:focus{outline:2px solid var(--blue-mid);border-color:var(--blue);background:var(--white)}
.scale-editor-row input.scale-wt{width:52px;background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--r);padding:4px 8px;font-size:.82rem;text-align:center}
.scale-editor-row input.scale-wt:focus{outline:2px solid var(--blue-mid);border-color:var(--blue)}
.scale-editor-row input.scale-wt:disabled{background:var(--cream);color:var(--ch300)}
.scale-editor-row input.scale-w
.scale-drag-handle{cursor:grab;color:var(--ch200);font-size:1rem;user-select:none}
.scale-drag-handle:active{cursor:grabbing}
.scale-editor-row .btn-rm-sub{color:var(--ch200)}
.drawer-footer{padding:14px 20px;border-top:1px solid var(--cream-dark);display:flex;gap:8px;flex-wrap:wrap;flex-shrink:0}
/* Saved scales list */
.saved-scale-item{display:flex;align-items:center;gap:8px;padding:7px 10px;background:var(--cream);border:1px solid var(--cream-dark);border-radius:var(--r);margin-bottom:5px;transition:background var(--dur)}
.saved-scale-item:hover{background:var(--blue-light)}
.saved-scale-item .ssi-name{flex:1;font-size:.78rem;font-weight:500;cursor:default}
.saved-scale-item .ssi-levels{font-size:.65rem;color:var(--ch400);flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.ssi-btns{display:flex;gap:4px;flex-shrink:0}
.btn-ssi{background:transparent;border:1px solid var(--cream-darker);color:var(--ch400);font-size:.65rem;padding:2px 7px;border-radius:var(--r);cursor:pointer;white-space:nowrap;transition:all var(--dur)}
.btn-ssi:hover{background:var(--white);color:var(--charcoal)}
.btn-ssi.danger:hover{border-color:var(--red);color:var(--red);background:var(--red-light)}
.default-scale-item{display:flex;align-items:center;gap:8px;padding:7px 10px;background:var(--blue-light);border:1px solid var(--blue-mid);border-radius:var(--r);margin-bottom:8px}
.default-scale-item .ssi-name{flex:1;font-size:.78rem;font-weight:500;color:var(--blue-dark)}
.default-scale-item .ssi-levels{font-size:.65rem;color:var(--blue-dark);opacity:.7;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.scale-hint{font-size:.68rem;color:var(--ch300);font-style:italic;margin-top:4px}

/* ── EMPTY / PLACEHOLDER ── */
.empty-state{text-align:center;padding:45px 20px;color:var(--ch300);font-size:.78rem}
.empty-state .icon{font-size:1.8rem;margin-bottom:8px;opacity:.35}

/* ── SCROLLBARS ── */
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--cream-darker);border-radius:10px}

/* ── ANIMATIONS ── */
@keyframes fadeUp{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}
.comp-section,.crit-config-section{animation:fadeUp .2s var(--ease) both}

/* ── RUBRIC PAGE (opened in new tab, injected via JS) ── */
/* These styles are embedded in the generated rubric page string, not here */

/* Overlay when drawer is open */
.drawer-overlay{display:none;position:fixed;inset:0;background:rgba(7,24,30,.3);z-index:499}
.drawer-overlay.active{display:block}
</style>
</head>
<body>

<!-- Scale drawer overlay -->
<div class="drawer-overlay" id="drawer-overlay"></div>

<!-- Scale drawer -->
<div id="scale-drawer">
  <div class="drawer-header">
    <h3 data-t="scaleDrawerTitle">Échelle d'évaluation</h3>
    <button class="btn-close-drawer" id="btn-close-drawer">×</button>
  </div>
  <div class="drawer-body">
    <span class="drawer-section-lbl" data-t="currentScale">Échelle actuelle</span>
    <div id="scale-editor-rows"></div>
    <div id="scale-error" style="font-size:.68rem;color:var(--red);margin-top:4px;display:none"></div>
    <div style="display:flex;gap:8px;margin-top:8px;align-items:center;flex-wrap:wrap">
      <button class="btn-secondary" id="btn-add-level" data-t="addLevel">+ Ajouter un niveau</button>
      <span class="scale-hint" data-t="scaleHint">Min. 2 niveaux · Le plus bas = 0, le plus haut = 100</span>
    </div>

    <span class="drawer-section-lbl" style="margin-top:20px" data-t="savedScales">Échelles enregistrées</span>
    <div id="saved-scales-list">
      <div class="list-empty" data-t="noSavedScales">Aucune échelle enregistrée. Importez un JSON de paramètres pour en charger.</div>
    </div>
  </div>
  <div class="drawer-footer">
    <div style="display:flex;flex-direction:column;gap:6px;width:100%">
      <div style="display:flex;gap:6px;align-items:center">
        <input type="text" id="scale-name-input" placeholder="" data-t-placeholder="scaleNameLabel" style="flex:1;background:var(--cream);border:1px solid var(--cream-darker);border-radius:var(--r);padding:6px 10px;font-family:inherit;font-size:.8rem">
        <button class="btn-secondary" id="btn-save-named-scale" data-t="saveScale" style="white-space:nowrap">Enregistrer</button>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn-primary" id="btn-apply-scale" data-t="applyScale">Appliquer</button>
        <button class="btn-secondary" id="btn-reset-scale" data-t="resetDefault">Réinitialiser par défaut</button>
      </div>
    </div>
  </div>
</div>

<header>
  <div class="hdr-right">
    <div class="lang-toggle">
      <button class="lang-btn active" data-lang="fr">FR</button>
      <button class="lang-btn" data-lang="en">EN</button>
    </div>
    <input type="file" id="file-import" accept=".json" style="display:none">
  </div>
</header>

<main class="shell">

  <!-- Step 1: Program selector -->
  <div class="selector-row">
    <label for="prog-select" data-t="programLabel">Programme</label>
    <select id="prog-select">
      <option value="" data-t="selectProgram">— Sélectionner un programme —</option>
    </select>
    <button class="btn-icon" id="btn-import-params" data-t="importParams">⬆ Importer</button>
  </div>

  <div id="prog-meta"></div>

  <!-- Course / assessment info (filled at config time, shown as text in rubric) -->
  <div id="eval-info-wrap" style="display:none">
    <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:20px">
      <div style="display:flex;flex-direction:column;gap:3px;flex:1;min-width:200px">
        <label for="inp-course" style="font-size:.62rem;letter-spacing:.08em;text-transform:uppercase;color:var(--ch300)" data-t="courseLabel">Cours</label>
        <input type="text" id="inp-course" style="background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--r);padding:7px 11px;font-family:inherit;font-size:.88rem;color:var(--charcoal)" data-t-placeholder="coursePlaceholder">
      </div>
      <div style="display:flex;flex-direction:column;gap:3px;flex:1;min-width:200px">
        <label for="inp-assessment" style="font-size:.62rem;letter-spacing:.08em;text-transform:uppercase;color:var(--ch300)" data-t="assessmentLabel">Évaluation</label>
        <input type="text" id="inp-assessment" style="background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--r);padding:7px 11px;font-family:inherit;font-size:.88rem;color:var(--charcoal)" data-t-placeholder="assessmentPlaceholder">
      </div>
    </div>
  </div>
  <div id="lists-wrap">
    <div class="empty-state">
      <div class="icon">○</div>
      <span data-t="selectProgramPrompt">Sélectionnez un programme pour afficher les compétences</span>
    </div>
  </div>

  <!-- Step 2b: Action row (show after program selected) -->
  <div id="action-row-wrap" style="display:none">
    <div class="action-row">
      <div class="sel-summary">
        <span data-t="oblSelected">Obligatoires&nbsp;:</span>&nbsp;<span class="cnt obl" id="obl-count">0</span>
        &nbsp;·&nbsp;
        <span data-t="optSelected">Au choix&nbsp;:</span>&nbsp;<span class="cnt opt" id="opt-count">0</span>
      </div>
      <div class="action-btns">
        <button class="btn-secondary" id="btn-clear-comps" data-t="clearSelection">Effacer la sélection</button>
        <button class="btn-primary" id="btn-show-elements" disabled data-t="showElements">Afficher les éléments des compétences sélectionnées</button>
      </div>
    </div>
  </div>

  <!-- Step 3: Element selection per competency -->
  <div id="elements-area"></div>

  <!-- Step 3b: Element action row -->
  <div id="el-action-row-wrap" style="display:none">
    <div class="action-row">
      <div class="sel-summary">
        <span id="el-count-summary" data-t="elementsSelected">0 élément(s) sélectionné(s)</span>
      </div>
      <div class="action-btns">
        <button class="btn-secondary" id="btn-clear-elements" data-t="clearElements">Effacer éléments</button>
        <button class="btn-primary" id="btn-show-criteria" disabled data-t="showCriteria">Afficher les critères des éléments sélectionnés</button>
      </div>
    </div>
  </div>

  <!-- Step 4: Criteria selection per element -->
  <div id="criteria-area"></div>

  <!-- Step 4b: Criteria action row -->
  <div id="crit-action-row-wrap" style="display:none">
    <div class="action-row">
      <div class="sel-summary">
        <span id="crit-count-summary" data-t="criteriaSelected">0 critère(s) sélectionné(s)</span>
      </div>
      <div class="action-btns">
        <button class="btn-secondary" id="btn-clear-criteria" data-t="clearCriteria">Effacer critères</button>
        <button class="btn-primary" id="btn-show-config" disabled data-t="showConfig">Configurer la grille d'évaluation</button>
      </div>
    </div>
  </div>

  <!-- Step 5: Rubric configuration -->
  <div id="rubric-config">
    <div class="config-header">
      <h2 data-t="rubricConfigTitle">Configuration de la grille d'évaluation</h2>
    </div>

    <!-- Total points + scale -->
    <div class="config-top-row">
      <div class="config-box total-box">
        <h3 data-t="totalPointsLabel">Points total</h3>
        <div class="total-input-wrap">
          <input type="number" id="total-points" value="30" min="0" max="100">
          <span data-t="pointsUnit">pts</span>
        </div>
        <div style="margin-top:8px;font-size:.72rem;display:flex;align-items:center;gap:5px">
          <span data-t="pointsAssignedLabel" style="color:var(--ch400)">Assignés :</span>
          <span id="points-assigned" style="font-weight:500">0</span>
          <span style="color:var(--ch400)">/ <span id="points-total-echo">30</span> pts</span>
        </div>
      </div>
      <div class="config-box scale-box" style="flex:1">
        <h3 data-t="scaleLabel">Échelle d'évaluation</h3>
        <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap">
          <div class="scale-pills" id="scale-preview"></div>
          <button class="btn-edit-scale" id="btn-open-scale-drawer" data-t="editScale">✎ Modifier</button>
        </div>
      </div>
    </div>

    <!-- Criteria config cards (generated) -->
    <div id="crit-config-cards"></div>

    <!-- Open rubric button -->
    <div style="margin-top:20px;display:flex;gap:10px;flex-wrap:wrap;align-items:center">
      <button class="btn-red" id="btn-open-rubric" data-t="openRubric">Ouvrir la grille dans un nouvel onglet</button>
      <div style="display:flex;align-items:center;gap:6px;padding:4px 0">
        <input type="number" id="excel-copies" value="1" min="1" max="200" style="width:54px;background:var(--white);border:1px solid var(--cream-darker);border-radius:var(--r);padding:5px 7px;font-size:.82rem;text-align:center">
        <span style="font-size:.72rem;color:var(--ch400)" data-t="copiesLabel">copie(s)</span>
        <button class="btn-secondary" id="btn-export-excel-p1" data-t="exportExcel">⬇ Exporter Excel</button>
      </div>
      <span id="rubric-budget-msg" style="font-size:.72rem;color:var(--red);display:none" data-t="budgetWarning">⚠ Le total des critères ne correspond pas au total de l'évaluation</span>
      <div style="margin-left:auto">
        <button class="btn-secondary" id="btn-export-params" data-t="exportParams" style="font-size:.72rem">⬇ Exporter paramètres</button>
      </div>
    </div>
  </div>

</main>

<script>
const PROGRAMMES = [
  {
    code: "420.B0",
    titre: "Techniques de l'informatique",
    titre_en: "Computer Science Technology",
    secteur: "01 – Administration, Commerce et informatique",
    annee: 2018,
    unites: "91 \u2154",
    heures: 2670,
    source_url: "https://cdn-contenu.quebec.ca/cdn-contenu/adm/min/education/publications-adm/cegeps/services-administratifs/Programmes-etudes-techniques/PE01-420B0-Computer-Science.pdf",
    competences: [
      {code:"0000", type:"obligatoire", enonce:"Traiter l’information relative aux réalités du milieu du travail en informatique", enonce_en:"Analyze information about working in the field of computer science technology", contexte:"À l’aide de documentation et d’outils de recherche.", contexte_en:"Using reference materials and research tools",
        elements:[
          {n:1, desc:"Rechercher de l’information sur les professions et les milieux de travail en informatique", desc_en:"Gather information on occupations and workplaces in computer science technology", crit:["Choix approprié des sources d’information","Fiabilité et diversité de l’information recueillie","Utilisation appropriée des outils de recherche","Distinction juste des principales caractéristiques des domaines du développement des applications et de l’administration des réseaux informatiques"], crit_en:["Appropriate choice of sources of information","Reliability and diversity of information gathered","Appropriate use of research tools"]},
          {n:2, desc:"Analyser l’information sur les entreprises et les établissements embauchant des techniciennes et techniciens en informatique", desc_en:"Analyze information on the companies and establishments that hire computer science technicians", crit:["Distinction juste des caractéristiques des produits et des services offerts par les entreprises et les établissements","Distinction juste des différentes professions","Reconnaissance adéquate des associations professionnelles et syndicales présentes","Reconnaissance adéquate des sources et des niveaux de risque pour la santé et la sécurité au travail"], crit_en:["Accurate distinction of the main characteristics of the fields of applications development and network management","Accurate distinction of the features of the products and services offered","Accurate distinction of the different occupations","Appropriate identification of the professional associations and unions concerned","Appropriate identification of the sources and levels of risk with regard to occupational health and safety"]},
          {n:3, desc:"Analyser l’information sur la profession de technicienne et technicien en informatique", desc_en:"Analyze information about the occupation of computer science technician", crit:["Examen détaillé des tâches et des responsabilités liées à la profession","Distinction juste des connaissances, des comportements, des attitudes et des habiletés nécessaires à l’exercice de la profession","Distinction juste des limites d’intervention propres à la profession","Techniques de l’informatique"], crit_en:["Detailed review of the tasks and responsibilities related to the occupation","Accurate distinction of the knowledge, behaviours, attitudes and skills required","Accurate distinction of the limits of the scope of practice"]}
        ]},
      {code:"00Q1", type:"obligatoire", enonce:"Effectuer l’installation et la gestion d’ordinateurs", enonce_en:"Install and manage computers", contexte:"Pour différents systèmes d’exploitation. À partir d’une demande. À l’aide d’ordinateurs, de périphériques, de composants internes amovibles, etc. À l’aide de la documentation technique. À l’aide de systèmes d’exploitation, d’applications, d’utilitaires, de pilotes, de modules d’extension, etc.", contexte_en:"For different operating systems; Based on a request; Using computers, peripheral devices, removable internal components; Using technical documents; Using operating systems, applications, utilities, drivers, plug-ins",
        elements:[
          {n:1, desc:"Préparer l’ordinateur", desc_en:"Prepare the computer", crit:["Interprétation juste de la demande","Interprétation juste des spécifications de l’équipement informatique","Ajout correct de composants amovibles","Raccordement correct des périphériques","Positionnement ergonomique de l’ordinateur et de ses périphériques"], crit_en:["Accurate interpretation of the request","Accurate interpretation of the computer equipment specifications","Correct addition of removable components","Proper connection of peripheral devices","Ergonomic set-up of the computer and its peripheral devices"]},
          {n:2, desc:"Installer le système d’exploitation", desc_en:"Install the operating system", crit:["Utilisation appropriée des utilitaires de préparation des systèmes de fichiers","Application correcte de la procédure d’installation du système d’exploitation et des pilotes","Configuration correcte du système d’exploitation et des pilotes","Personnalisation du système d’exploitation en fonction des besoins des utilisatrices et des utilisateurs","Application correcte de la procédure d’installation des applications et des modules d’extension"], crit_en:["Appropriate use of file system preparation utilities","Proper installation of the operating systems and drivers","Proper configuration of the operating system and drivers","Customization of the operating system based on user needs"]},
          {n:3, desc:"Installer des applications", desc_en:"Install the applications", crit:["Configuration correcte des applications et des modules d’extension","Personnalisation des applications en fonction des besoins des utilisatrices et des utilisateurs","Fonctionnement correct des applications","Organisation fonctionnelle de la structure des fichiers et des répertoires","Utilisation appropriée des utilitaires d’archivage et de compression"], crit_en:["Correct application of the procedure for installing the applications and plug-ins","Correct configuration of the applications and plug-ins","Customization based on user needs","Proper performance of the applications"]},
          {n:4, desc:"Effectuer des tâches de gestion du système d’exploitation", desc_en:"Perform operating system management tasks", crit:["Création correcte des comptes et des groupes d’utilisateurs","Attribution correcte des droits d’accès","Gestion appropriée des processus, de la mémoire et de l’espace disque","Rédaction correcte de scripts","Techniques de l’informatique"], crit_en:["Functional organization of the structure of files and directories","Appropriate use of archiving and compression software","Proper creation of user accounts and groups","Proper assignment of access rights","Appropriate management of processes, memory and disk space","Correct writing of scripts"]}
        ]},
      {code:"00Q2", type:"obligatoire", enonce:"Utiliser des langages de programmation", enonce_en:"Use programming languages", contexte:"Pour des problèmes dont la solution est simple. À l’aide d’algorithmes de base. À l’aide d’un débogueur et d’un plan de tests fonctionnels.", contexte_en:"For problems that are easily solved; Using basic algorithms; Using a debugger and a functional test plan",
        elements:[
          {n:1, desc:"Analyser le problème", desc_en:"Analyze the problem", crit:["Décomposition correcte du problème","Détermination correcte des données d’entrée, des données de sortie et de la nature des traitements","Choix et adaptation appropriés de l’algorithme","Choix approprié des instructions et des types de données élémentaires","Découpage efficace du code informatique"], crit_en:["Correct breakdown of the problem","Proper identification of input and output data and of the nature of the processes","Appropriate choice and adaptation of the algorithm"]},
          {n:2, desc:"Traduire l’algorithme dans le langage de programmation", desc_en:"Translate the algorithm into a programming language", crit:["Organisation logique des instructions","Respect de la syntaxe du langage","Code informatique conforme à l’algorithme","Utilisation efficace du débogueur","Repérage complet des erreurs"], crit_en:["Appropriate choice of instructions and types of elementary data","Efficient modularization of code","Logical organization of instructions","Compliance with the language syntax","Computer code consistent with the algorithm"]},
          {n:3, desc:"Déboguer le code", desc_en:"Debug the code", crit:["Détermination judicieuse de stratégies de correction des erreurs","Pertinence des correctifs","Notation claire des solutions aux problèmes rencontrés","Manifestation d’attitudes et de comportements empreints de rigueur","Repérage complet des erreurs de fonctionnement"], crit_en:["Efficient use of the debugger","Identification of all errors","Astute choice of debugging strategies","Relevance of the corrective actions","Clear record of solutions"]},
          {n:4, desc:"Appliquer le plan de tests fonctionnels", desc_en:"Implement the functional test plan", crit:["Pertinence des correctifs","Fonctionnement correct du programme","Notation claire de l’information relative aux tests et à leurs résultats","Techniques de l’informatique"], crit_en:["Attitudes and behaviours that demonstrate thoroughness","Identification of all operational errors","Relevance of the corrective actions","Proper functioning of the program","Clear record of tests and their results"]}
        ]},
      {code:"00Q3", type:"obligatoire", enonce:"Résoudre des problèmes d’informatique avec les mathématiques", enonce_en:"Solve computer-related problems using mathematics", contexte:"À partir de situations problèmes. À l’aide de données quantitatives.", contexte_en:"Based on situational problems; Using quantitative data",
        elements:[
          {n:1, desc:"Traiter des nombres à représenter dans la mémoire d’un ordinateur", desc_en:"Process numbers as they are represented in computer memory", crit:["Représentation correcte de nombres dans différentes bases","Conversion correcte de nombres d’une base à une autre","Interprétation juste des limites des types de représentation des nombres","Interprétation juste de la précision des types de représentation des nombres","Choix approprié du type de représentation des nombres"], crit_en:["Accurate representation of numbers in different base systems","Accurate conversion of numbers from one base to another","Accurate interpretation of the ranges of numeric types","Accurate interpretation of the precision of numeric types","Appropriate choice of the numeric type"]},
          {n:2, desc:"Représenter des figures géométriques en deux dimensions sous la forme d’images numériques", desc_en:"Represent two-dimensional geometric figures in the form of digital images", crit:["Détermination correcte de la taille, de la dimension et de la résolution de l’image","Représentation correcte de points et de droites","Application correcte des équations de translation, de rotation et d’homothétie","Concordance des figures géométriques avec leur représentation dans l’image","Formulation correcte des fonctions logiques"], crit_en:["Correct identification of the size, dimensions and resolution","Accurate representation of points and lines","Correct application of translation, rotation and homothetic equations","Consistency of geometric figures with their graphic representation"]},
          {n:3, desc:"Modéliser des raisonnements logiques à plusieurs variables", desc_en:"Model multi-variable logical reasoning", crit:["Simplification efficace des fonctions logiques","Utilisation appropriée de l’algèbre de Boole","Production exacte de tables de vérité","Vérification appropriée des fonctions logiques"], crit_en:["Correct formulation of logical functions","Efficient simplification of logical functions","Appropriate use of Boolean algebra","Accurate production of truth tables","Appropriate verification of logical functions"]},
          {n:4, desc:"Traiter des données quantitatives par les statistiques descriptives", desc_en:"Process quantitative data using descriptive statistics", crit:["Calcul exact de la moyenne, de la médiane, de la variance et de l’écart type","Clarté et exactitude des représentations graphiques des données","Analyse juste des résultats","Techniques de l’informatique"], crit_en:["Precise calculation of the average, median, variance and standard deviation","Clarity and accuracy of the graphic representation of data","Accurate analysis of results"]}
        ]},
      {code:"00Q4", type:"obligatoire", enonce:"Exploiter des logiciels de bureautique", enonce_en:"Use office productivity software", contexte:"À l’aide de logiciels de traitement de texte, de tableurs ainsi que de logiciels de dessin, de présentation et de travail collaboratif. À l’aide d’images, de sons et de vidéos. À l’aide de normes de présentation.", contexte_en:"Using word processing, spreadsheet, design, presentation and collaborative software; Using images, sounds and videos; Using presentation standards",
        elements:[
          {n:1, desc:"Produire des rapports", desc_en:"Produce reports", crit:["Personnalisation correcte de l’interface du traitement de texte","Saisie correcte de l’information","Intégration correcte d’images","Utilisation et modification appropriées des styles et des modèles","Insertion correcte d’une table des matières automatique","Utilisation efficace du correcteur","Respect des normes de présentation"], crit_en:["Proper customizing of the word processing interface","Accurate data entry","Proper integration of images","Appropriate use and modification of styles and templates","Proper insertion of an automatic table of contents","Efficient use of the spelling and grammar check","Compliance with presentation standards"]},
          {n:2, desc:"Produire des tableaux et des graphiques", desc_en:"Produce tables and graphs", crit:["Personnalisation adéquate de l’interface du tableur électronique","Choix approprié du type de tableau et de graphique à produire","Choix et utilisation appropriés des fonctions de recherche, de logique et de calcul","Élaboration de formules mathématiques appropriées","Respect des normes de présentation","Personnalisation correcte de l’interface du logiciel de dessin"], crit_en:["Proper customizing of the spreadsheet interface","Appropriate choice of the type of table and graph","Appropriate choice and use of search, logic and calculation functions","Development of appropriate mathematical formulas","Compliance with presentation standards"]},
          {n:3, desc:"Produire des diagrammes ou des plans", desc_en:"Produce diagrams or plans", crit:["Choix de l’échelle et du format en fonction des exigences de représentation","Représentation correcte d’éléments géométriques","Utilisation d’une banque de symboles en fonction des exigences de représentation","Rédaction correcte et claire des annotations et du cartouche","Respect des normes de présentation","Techniques de l’informatique"], crit_en:["Proper customizing of the drawing software interface","Choice of scale and format based on representation requirements","Accurate representation of geometric elements","Use of a symbol collection in accordance with requirements","Proper and clear drafting of annotations and title block","Compliance with presentation standards"]}
        ]},
      {code:"00Q5", type:"obligatoire", enonce:"Effectuer le déploiement d’un réseau informatique local", enonce_en:"Deploy a local computer network", contexte:"Pour des réseaux informatiques locaux filaires et sans fil. À partir d’une demande. À l’aide d’ordinateurs, de dispositifs d’interconnexion et de câblage. À l’aide de la documentation technique.", contexte_en:"For local wired and wireless computer networks; Based on a request; Using computers, interconnection devices and cabling; Using technical documentation",
        elements:[
          {n:1, desc:"Définir les caractéristiques du réseau informatique local", desc_en:"Define the features of the local computer network", crit:["Interprétation juste de la demande","Détermination correcte des services à installer","Choix approprié des dispositifs d’interconnexion à installer","Diagramme d’architecture du réseau informatique local conforme au besoin"], crit_en:["Accurate interpretation of the request","Proper identification of the services to be installed","Appropriate choice of interconnection devices","Architecture diagram of the local network that meets the requirements"]},
          {n:2, desc:"Installer les dispositifs d’interconnexion du réseau local", desc_en:"Install local network interconnection devices", crit:["Positionnement et raccordement corrects des dispositifs d’interconnexion","Configuration correcte des dispositifs d’interconnexion","Notation claire des configurations effectuées","Raccordement des ordinateurs au réseau informatique selon le diagramme d’architecture"], crit_en:["Proper set-up and connection of the interconnection devices","Proper configuration of the interconnection devices","Clear record of the configurations carried out"]},
          {n:3, desc:"Connecter les ordinateurs au réseau local", desc_en:"Connect the computers to the local network", crit:["Configuration correcte de l’accès au réseau","Notation claire des configurations effectuées","Application rigoureuse de la procédure d’installation des services"], crit_en:["Connection according to the architecture diagram","Proper configuration of access to the network","Clear record of the configurations carried out"]},
          {n:4, desc:"Installer des services de partage de ressources", desc_en:"Install shared resource services", crit:["Configuration correcte des services","Notation claire des configurations effectuées","Application rigoureuse des plans de tests"], crit_en:["Strict application of the procedure for installing services","Proper configuration of the services","Clear record of the configurations carried out"]},
          {n:5, desc:"Mettre en service le réseau local", desc_en:"Enable the local network", crit:["Pertinence des correctifs","Fonctionnement optimal du réseau","Techniques de l’informatique"], crit_en:["Strict application of test plans","Relevance of the corrective actions","Optimal functioning of the network"]}
        ]},
      {code:"00Q6", type:"obligatoire", enonce:"Exploiter les principes de la programmation orientée objet", enonce_en:"Use an object-oriented development approach", contexte:"À partir d’un problème. À l’aide de règles de nomenclature et de codage.", contexte_en:"Based on a problem; Using nomenclature and coding rules",
        elements:[
          {n:1, desc:"Analyser le problème", desc_en:"Analyze the problem", crit:["Décomposition du problème en fonction des exigences de l’approche orientée objet","Détermination correcte des données d’entrée, des données de sortie et de la nature des traitements","Détermination juste des classes à modéliser","Détermination correcte des algorithmes à produire","Détermination correcte des attributs et des méthodes des classes"], crit_en:["Breakdown based on the requirements of an object-oriented approach","Proper identification of input/output data and the nature of the processes","Accurate identification of the classes to be modelled","Proper identification of the algorithms to be created"]},
          {n:2, desc:"Modéliser les classes", desc_en:"Model the classes", crit:["Application judicieuse des principes d’encapsulation et d’héritage","Représentation graphique correcte des classes et de leurs relations","Respect des règles de nomenclature","Détermination adéquate des opérations nécessaires pour chaque méthode","Détermination correcte d’une séquence logique des opérations"], crit_en:["Proper identification of class attributes and methods","Proper application of encapsulation and inheritance principles","Proper graphic representation of the classes and their relationships","Compliance with nomenclature rules"]},
          {n:3, desc:"Produire les algorithmes pour les méthodes", desc_en:"Produce the algorithms for the methods", crit:["Vérification appropriée du fonctionnement des algorithmes","Représentation correcte des algorithmes","Choix approprié des éléments graphiques pour l’affichage et la saisie","Positionnement correct des éléments graphiques","Paramétrage correct des éléments graphiques"], crit_en:["Appropriate identification of the operations necessary for each method","Proper identification of a logical sequence of operations","Appropriate verification of algorithm correctness","Accurate representation of algorithms"]},
          {n:4, desc:"Générer l’interface graphique", desc_en:"Create the graphic interface", crit:["Choix approprié des instructions, des types de données élémentaires et des structures de données","Organisation logique des instructions","Programmation correcte des messages à afficher à l’utilisatrice ou à l’utilisateur","Intégration correcte des classes dans le programme"], crit_en:["Appropriate choice of graphic elements for display and data input","Proper layout of graphic elements","Proper set-up of graphic elements"]},
          {n:5, desc:"Programmer des classes", desc_en:"Program the classes", crit:["Fonctionnement correct du programme","Respect de la syntaxe du langage","Respect des règles de codage","Techniques de l’informatique"], crit_en:["Appropriate choice of instructions, types of primitive data and data structures","Logical organization of the instructions","Proper programming of messages to be displayed for the user","Proper integration of the classes into the program","Proper program performance","Compliance with the language syntax","Compliance with coding rules"]}
        ]},
      {code:"00Q7", type:"obligatoire", enonce:"Exploiter un système de gestion de base de données", enonce_en:"Use a database management system", contexte:"Pour un système de gestion de base de données relationnel ou autre. À partir d’un modèle de données et des spécifications du système de gestion de base de données.", contexte_en:"For a relational or other type of database management system; Based on the data model and specifications",
        elements:[
          {n:1, desc:"Créer la base de données", desc_en:"Create the database", crit:["Analyse juste du modèle de données","Analyse juste des spécifications du système de gestion de base de données","Formulation appropriée des instructions de création de la base de données","Détermination judicieuse des types de requêtes à formuler"], crit_en:["Accurate analysis of the data model","Accurate analysis of the specifications","Appropriate coding of the instructions for creating the database"]},
          {n:2, desc:"Formuler des requêtes de lecture, d’insertion, de modification et de suppression de données", desc_en:"Formulate read, insertion, modification and deletion requests", crit:["Utilisation appropriée des clauses, des opérateurs, des commandes ou des paramètres","Utilisation appropriée des expressions régulières","Fonctionnement correct des requêtes","Détermination judicieuse des techniques à utiliser"], crit_en:["Accurate identification of the types of requests to be formulated","Appropriate use of clauses, operators, commands and parameters","Appropriate use of regular expressions","Proper performance of requests"]},
          {n:3, desc:"Assurer la confidentialité et la cohérence des données", desc_en:"Ensure data confidentiality and consistency", crit:["Gestion correcte des autorisations","Cryptage approprié des données","Utilisation appropriée des contraintes d’intégrité référentielle, des déclencheurs ou des transactions","Détermination judicieuse des traitements de données à automatiser"], crit_en:["Accurate identification of the techniques to be used","Proper management of authorizations","Appropriate data encryption","Appropriate use of referential integrity constraints, triggers and transactions"]},
          {n:4, desc:"Programmer des traitements de données automatisés", desc_en:"Program automated data processing operations", crit:["Création appropriée de procédures stockées ou de scripts","Notation claire de la documentation d’aide à la programmation","Choix judicieux des techniques de sauvegarde et de restauration à utiliser"], crit_en:["Accurate identification of data processing operations to be automated","Appropriate creation of stored procedures and scripts","Clear record of programming support documentation"]},
          {n:5, desc:"Sauvegarder et restaurer la base de données", desc_en:"Save and restore the database", crit:["Utilisation appropriée de techniques de sauvegarde et de restauration de la base de données","Respect de la procédure et de la fréquence de sauvegarde","Techniques de l’informatique"], crit_en:["Astute choice of techniques for saving and restoring","Appropriate use of those techniques","Compliance with the procedure and frequency for saving"]}
        ]},
      {code:"00Q8", type:"obligatoire", enonce:"Effectuer des opérations de prévention en matière de sécurité de l’information", enonce_en:"Carry out preventive measures with regard to information security", contexte:"À l’aide de mesures de sécurité reconnues. À l’aide de logiciels de sécurité informatique et de bibliothèques de cryptographie.", contexte_en:"Using recognized security measures; Using information security software and encryption libraries",
        elements:[
          {n:1, desc:"Analyser des risques en matière de sécurité de l’information", desc_en:"Analyze information security risks", crit:["Inventaire précis de l’équipement informatique et des applications installés","Inventaire adéquat des menaces potentielles et des vulnérabilités","Détermination correcte des conséquences sur la sécurité","Choix approprié des mesures de sécurité à appliquer","Utilisation appropriée des stratégies de sauvegarde"], crit_en:["Accurate inventory of computing equipment and applications installed","Proper inventory of potential threats and vulnerabilities","Accurate identification of the impacts on security","Appropriate choice of security measures to be applied"]},
          {n:2, desc:"Appliquer des mesures de sécurité reconnues pour protéger le réseau", desc_en:"Apply recognized security measures to protect the network", crit:["Utilisation appropriée des stratégies d’attribution des droits d’accès","Configuration et personnalisation correctes des logiciels antivirus et coupe-feu","Utilisation appropriée des utilitaires de cryptographie","Utilisation appropriée des stratégies de sécurisation des données entrées par l’utilisatrice et l’utilisateur"], crit_en:["Appropriate use of backup strategies","Appropriate use of strategies for assigning access rights","Proper configuration and customizing of anti-virus and firewall software","Appropriate use of encryption utilities"]},
          {n:3, desc:"Appliquer des mesures de sécurité reconnues pour protéger une application", desc_en:"Apply recognized security measures to protect an application", crit:["Utilisation appropriée des techniques de contrôle des erreurs et des exceptions","Utilisation appropriée de mécanismes d’authentification et d’autorisation sécuritaires","Utilisation appropriée des bibliothèques de cryptographie","Techniques de l’informatique"], crit_en:["Appropriate use of strategies to secure data entered by users","Appropriate use of error control and exception management techniques","Appropriate use of secure authentication and authorizations mechanisms","Appropriate use of encryption libraries"]}
        ]},
      {code:"00SE", type:"obligatoire", enonce:"Interagir dans un contexte professionnel", enonce_en:"Interact in a professional setting", contexte:"Pour des formes d’organisation du travail variées. À l’aide de normes, de méthodes et de bonnes pratiques en matière de développement d’applications et de gestion de réseaux. À l’aide de lois, de codes d’éthique et de politiques d’entreprise.", contexte_en:"In various types of work settings; Using application programming and network management standards, methods and best practices; Using laws, code of ethics and corporate policies",
        elements:[
          {n:1, desc:"Établir des relations professionnelles avec des utilisatrices ou utilisateurs, ainsi que des clientes ou clients", desc_en:"Establish professional relationships with users and clients", crit:["Manifestation d’attitudes et de comportements démontrant une capacité d’écoute","Adaptation du niveau de langage selon la situation","Respect des règles de politesse et de courtoisie","Respect de l’approche client","Manifestation d’attitudes et de comportements de respect, d'ouverture d’esprit et de collaboration","Communication efficace avec les membres de l’équipe"], crit_en:["Attitudes and behaviours that demonstrate the ability to listen","Adaptation of the level of language to the situation","Observance of rules of politeness and common courtesy","Observance of the client-based approach"]},
          {n:2, desc:"Travailler au sein d’une équipe multidisciplinaire", desc_en:"Work within a multidisciplinary team", crit:["Exécution correcte des tâches confiées","Respect des règles de fonctionnement en équipe","Respect de la culture d’entreprise","Respect des normes, des méthodes ou des bonnes pratiques en matière de développement d’applications et de gestion de réseaux","Respect des limites d’intervention professionnelle et de l’expertise des membres d’autres professions","Respect des échéances"], crit_en:["Attitudes and behaviours that demonstrate respect, openness and a collaborative spirit","Effective communication with all team members","Proper performance of assigned tasks","Compliance with rules for optimal team function","Respect for the corporate culture","Compliance with standards, methods and best practices","Observance of the limits of professional intervention","Adherence to deadlines"]},
          {n:3, desc:"Se situer au regard des obligations légales et des règles d’éthique professionnelle", desc_en:"Become familiar with the legal obligations and rules of professional ethics", crit:["Distinction juste des principaux délits et des principaux actes criminels dans le domaine informatique","Distinction juste des principales atteintes à la propriété intellectuelle dans le domaine informatique","Appréciation juste des conséquences des délits, des actes criminels et des atteintes à la propriété intellectuelle","Détermination des mesures appropriées selon la situation","Respect des lois, des codes d’éthique et des politiques d’entreprise","Techniques de l’informatique"], crit_en:["Accurate listing of the main offences and criminal acts in IT","Accurate listing of the main breaches of intellectual property rights in IT","Accurate assessment of the consequences","Determination of the measures appropriate to the situation","Compliance with laws, codes of ethics and corporate policies"]}
        ]},
      {code:"00SF", type:"obligatoire", enonce:"Évaluer des composants logiciels et matériels", enonce_en:"Evaluate software and hardware components", contexte:"À l’aide de sources d’information. À partir du cahier des charges fonctionnel et de diagrammes d’architecture. À l’aide de la documentation technique.", contexte_en:"Using information sources; Based on functional specifications and architecture diagrams; Using technical documentation",
        elements:[
          {n:1, desc:"Cerner les exigences techniques d’un projet de développement ou de déploiement", desc_en:"Pinpoint the technical requirements of a development or deployment project", crit:["Analyse juste du cahier des charges fonctionnel","Analyse juste de l’architecture logicielle et de l’architecture du réseau informatique","Relevé complet des exigences techniques du projet","Choix approprié des sources d’information"], crit_en:["Accurate analysis of functional specifications","Accurate analysis of the software architecture and the computer network architecture","Identification of all technical requirements for the project"]},
          {n:2, desc:"Rechercher des composants logiciels et matériels", desc_en:"Research software and hardware components", crit:["Inventaire précis des composants logiciels et matériels disponibles","Analyse juste des caractéristiques des plateformes, des applications et des outils de développement","Analyse juste des caractéristiques des ordinateurs, des dispositifs d’interconnexion et des périphériques","Analyse juste des caractéristiques des protocoles de communication filaires et sans fil"], crit_en:["Appropriate choice of information sources","Accurate inventory of the available software and hardware components"]},
          {n:3, desc:"Formuler des avis sur les composants logiciels et matériels", desc_en:"Provide advice on software and hardware components", crit:["Pertinence des avis sur la compatibilité des composants","Pertinence des avis sur la longévité, la stabilité, l’efficacité et la maintenabilité des composants","Techniques de l’informatique"], crit_en:["Accurate analysis of the features of platforms, applications and programming tools","Accurate analysis of the features of computing devices, interconnection devices and peripheral devices","Accurate analysis of the features of wired and wireless communications protocols","Relevance of advice on component compatibility","Relevance of advice on component longevity, efficiency and maintainability"]}
        ]},
      {code:"00SG", type:"obligatoire", enonce:"Fournir du soutien informatique aux utilisatrices et utilisateurs", enonce_en:"Provide users with technical support", contexte:"À partir d’un incident, d’un problème ou d’une demande. À l’aide de documentation et d’une base de connaissances. À l’aide de normes de présentation.", contexte_en:"Based on an incident, problem or request; Using documentation and a knowledge base; Using presentation standards",
        elements:[
          {n:1, desc:"Préciser le besoin", desc_en:"Identify user needs", crit:["Analyse juste de l’incident, du problème ou de la demande","Consultation appropriée de la base de connaissances","Détermination judicieuse du niveau de priorité","Choix approprié de l’intervention à effectuer ou transmission de l’information à la personne ou au service concerné","Respect des limites d’intervention professionnelle","Manifestation d’attitudes et de comportements favorisant l’établissement d’une relation de confiance"], crit_en:["Accurate analysis of the incident, problem or request","Appropriate consultation of the knowledge base","Accurate identification of the level of priority","Apt choice of action to perform or forwarding of information to the appropriate person","Observance of the limits of professional intervention"]},
          {n:2, desc:"Assister des utilisatrices et des utilisateurs en ce qui a trait à l’emploi d’un ordinateur et de logiciels", desc_en:"Assist users in the operation of a computer and software", crit:["Relevé des actions significatives posées par les utilisatrices ou les utilisateurs","Pertinence des conseils","Pertinence et efficacité des démonstrations","Utilisation d’un niveau de langage approprié","Manifestation d’attitudes et de comportements empreints de patience","Analyse juste de la documentation existante"], crit_en:["Attitudes and behaviours that promote a relationship of trust","Identification of key actions taken by the users","Suitability of recommendations","Relevance and effectiveness of demonstrations","Use of an appropriate level of language","Attitudes and behaviours that demonstrate patience"]},
          {n:3, desc:"Préparer les documents d’aide aux utilisatrices et utilisateurs", desc_en:"Prepare user support documents", crit:["Détermination judicieuse du niveau de connaissance des utilisatrices et utilisateurs","Production de documents conformes aux besoins des utilisatrices et utilisateurs","Utilisation du vocabulaire approprié","Respect des normes de documentation","Respect des règles orthographiques et grammaticales"], crit_en:["Accurate analysis of the existing documentation","Accurate identification of the users' level of knowledge","Production of documents aligned with user needs","Use of appropriate vocabulary","Compliance with documentation standards","Compliance with spelling and grammar rules"]},
          {n:4, desc:"Effectuer un suivi sur le soutien apporté", desc_en:"Follow up on the support provided", crit:["Vérification appropriée de la satisfaction de l’utilisatrice et de l’utilisateur","Détermination correcte du degré d’adéquation entre l’intervention et le besoin","Formulation claire de recommandations visant à prévenir la récurrence de pannes","Notation claire de l’intervention dans la base de connaissances","Techniques de l’informatique"], crit_en:["Appropriate verification of user satisfaction","Proper identification of the extent to which the action meets the need","Clear formulation of recommendations to prevent the recurrence of malfunctions","Clear recording of the action taken in the knowledge base"]}
        ]},
      {code:"00SH", type:"obligatoire", enonce:"S’adapter à des technologies informatiques", enonce_en:"Adapt to information technologies", contexte:"À l’aide de sources d’information. À l’aide d’applications et d’équipement informatique.", contexte_en:"Using information sources; Using computer applications and equipment",
        elements:[
          {n:1, desc:"Effectuer une veille technologique", desc_en:"Monitor technological developments", crit:["Recherche efficace de sources d’information","Utilisation appropriée des outils de veille","Analyse juste de l’information recueillie","Détermination judicieuse des technologies à expérimenter"], crit_en:["Effective search for information sources","Appropriate use of monitoring tools","Accurate analysis of the information collected","Accurate identification of the technologies to test"]},
          {n:2, desc:"Expérimenter une technologie matérielle ou logicielle", desc_en:"Test software and hardware technology", crit:["Raccordement correct de l’équipement informatique et des périphériques nécessaires","Installation correcte des applications ou des outils de développement nécessaires","Mise à l’essai adéquate de la technologie","Manifestation d’attitudes et de comportements démontrant l’autonomie et l’ouverture d’esprit"], crit_en:["Proper connection of computer equipment and the necessary peripheral devices","Proper installation of the necessary programming applications or tools","Adequate testing of the technology","Attitudes and behaviours that demonstrate self-reliance and open-mindedness"]},
          {n:3, desc:"Formuler des avis sur la technologie", desc_en:"Draw up technological opinions", crit:["Participation active aux discussions","Justification adéquate du potentiel de la technologie","Techniques de l’informatique"], crit_en:["Active participation in discussions","Satisfactory justification of the technology's potential"]}
        ]},
      {code:"00SJ", type:"choix", enonce:"Effectuer le déploiement de serveurs intranet", enonce_en:"Deploy intranet servers", contexte:"Pour des serveurs intranet de différents types : physiques, virtualisés, redondants, distribués, etc. Pour différents services : authentification, annuaire, impression, partage de fichiers, téléphonie, DHCP, etc. À partir des documents de conception. À l’aide de la documentation technique.", contexte_en:"For different types of intranet servers: physical, virtual, redundant, distributed; For different services: authentication, directory, printing, file sharing, telephony, DHCP; Based on design documents; Using technical documentation",
        elements:[
          {n:1, desc:"Analyser le projet de déploiement", desc_en:"Analyze the deployment project", crit:["Analyse juste des documents de conception","Analyse juste des caractéristiques techniques des services intranet à installer","Détermination correcte des tâches à effectuer","Positionnement et fixation des serveurs et des périphériques conformes aux plans"], crit_en:["Accurate analysis of design documents","Accurate analysis of the technical characteristics of the intranet services to be installed","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Monter les serveurs intranet", desc_en:"Set up the intranet servers", crit:["Installation correcte du ou des systèmes d’exploitation","Connexion correcte des serveurs au réseau","Identification correcte des serveurs, des périphériques et du câblage","Respect des procédures de raccordement du câblage structuré et de la réglementation applicable au domaine de l’électricité"], crit_en:["Placement and connection of the servers and peripheral devices in compliance with the plans","Proper installation of the operating system(s)","Proper connection of the servers to the network","Proper identification of the servers, peripheral devices and cabling","Compliance with procedures for connecting structured cabling and with the applicable electrical regulations","Compliance with occupational health and safety regulations"]},
          {n:3, desc:"Installer les services intranet", desc_en:"Install the intranet services", crit:["Respect des règles de santé et de sécurité au travail","Application correcte des procédures d’installation des services intranet","Configuration correcte des services intranet","Application correcte des procédures d’activation des services intranet"], crit_en:["Proper application of the intranet service installation procedures","Proper configuration of the intranet services","Proper application of intranet service activation procedures"]},
          {n:4, desc:"Procéder au renforcement de la sécurité", desc_en:"Reinforce security", crit:["Configuration et personnalisation correctes des logiciels antivirus et coupe-feu","Organisation sécuritaire de la structure des fichiers et des répertoires","Gestion judicieuse des accès","Mise à jour adéquate des procédures de sauvegarde"], crit_en:["Proper configuration and customizing of anti-virus software and firewalls","Secure organization of the file and directory structures","Sound management of access rights","Suitable updating of backup procedures"]},
          {n:5, desc:"Participer à la mise en service des serveurs intranet", desc_en:"Participate in the deployment of the intranet servers", crit:["Application rigoureuse des plans de tests","Pertinence des correctifs","Fonctionnement optimal des serveurs"], crit_en:["Precise application of test plans","Relevance of the corrective actions","Optimal running of the servers"]},
          {n:6, desc:"Rédiger la documentation", desc_en:"Produce the documentation", crit:["Détermination correcte de l’information à rédiger","Notation claire du travail effectué","Techniques de l’informatique"], crit_en:["Proper identification of the information to be written up","Clear record of the work carried out"]}
        ]},
      {code:"00SK", type:"choix", enonce:"Effectuer le déploiement de serveurs Internet", enonce_en:"Deploy Internet servers", contexte:"Pour des serveurs Internet de différents types : physiques, virtualisés, redondants, distribués, etc. Pour différents services : courriel, Web, visioconférence, infonuagique, etc. À partir des documents de conception. À l’aide de la documentation technique.", contexte_en:"For different types of Internet servers: physical, virtual, redundant, distributed; For different services: email, Web, videoconferencing, cloud computing; Based on design documents; Using technical documentation",
        elements:[
          {n:1, desc:"Analyser le projet de déploiement", desc_en:"Analyze the deployment project", crit:["Analyse juste des documents de conception","Analyse juste des caractéristiques techniques des services Internet à installer","Détermination correcte des tâches à effectuer","Positionnement et fixation des serveurs et des périphériques conformes aux plans"], crit_en:["Accurate analysis of the design documents","Accurate analysis of the technical characteristics of the Internet services to be installed","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Monter les serveurs Internet", desc_en:"Set up the Internet servers", crit:["Installation correcte du ou des systèmes d’exploitation","Connexion correcte des serveurs au réseau","Identification correcte des serveurs, des périphériques et du câblage","Respect des procédures de raccordement du câblage structuré et de la réglementation applicable au domaine de l’électricité"], crit_en:["Placement and connection of the servers and peripheral devices in compliance with the plans","Proper installation of the operating system(s)","Proper connection of the servers to the network","Proper identification of the servers, peripheral devices and cabling","Compliance with procedures for connecting structured cabling and with the applicable electrical regulations","Compliance with occupational health and safety regulations"]},
          {n:3, desc:"Installer les services Internet", desc_en:"Install the Internet servers", crit:["Respect des règles de santé et de sécurité au travail","Application correcte des procédures d’installation des services Internet","Configuration correcte des services Internet","Application correcte des procédures d’activation des services Internet"], crit_en:["Proper application of Internet service installation procedures","Proper configuration of Internet services","Proper application of Internet service activation procedures"]},
          {n:4, desc:"Procéder au renforcement de la sécurité", desc_en:"Reinforce security", crit:["Configuration et personnalisation correctes des logiciels antivirus et coupe-feu","Organisation sécuritaire de la structure des fichiers et des répertoires","Gestion judicieuse des accès","Mise à jour adéquate des procédures de sauvegarde"], crit_en:["Proper configuration and customizing of anti-virus software and firewalls","Secure organization of file and directory structures","Sound management of access rights","Suitable updating of backup procedures"]},
          {n:5, desc:"Participer à la mise en service des serveurs Internet", desc_en:"Participate in the deployment of the Internet servers", crit:["Application rigoureuse des plans de tests","Pertinence des correctifs","Fonctionnement optimal des serveurs"], crit_en:["Precise application of the test plans","Relevance of the corrective actions","Optimal running of the servers"]},
          {n:6, desc:"Rédiger la documentation", desc_en:"Produce the documentation", crit:["Détermination correcte de l’information à rédiger","Notation claire du travail effectué","Techniques de l’informatique"], crit_en:["Proper identification of the information to be written up","Clear record of the work carried out"]}
        ]},
      {code:"00SL", type:"choix", enonce:"Effectuer le déploiement de serveurs de base de données", enonce_en:"Deploy database servers", contexte:"Pour des serveurs de base de données de différents types : physiques, virtualisés, redondants, distribués, etc. Pour des systèmes de gestion de base de données relationnels ou autres. À partir des documents de conception. À l’aide de la documentation technique.", contexte_en:"For different types of database servers: physical, virtual, redundant, distributed; For relational or other types of database management systems; Based on design documents; Using technical documentation",
        elements:[
          {n:1, desc:"Analyser le projet de déploiement", desc_en:"Analyze the deployment project", crit:["Analyse juste des documents de conception","Analyse juste des caractéristiques techniques du système de gestion de base de données à installer","Détermination correcte des tâches à effectuer","Positionnement et fixation des serveurs et des périphériques conformes aux plans","Installation correcte du ou des systèmes d’exploitation"], crit_en:["Accurate analysis of design documents","Accurate analysis of the technical characteristics of the database management systems to be installed","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Monter les serveurs de base de données", desc_en:"Set up the database servers", crit:["Connexion correcte des serveurs au réseau","Identification correcte des serveurs, des périphériques et du câblage","Respect des procédures de raccordement du câblage structuré et de la réglementation applicable au domaine de l’électricité","Respect des règles de santé et de sécurité au travail","Application correcte de la procédure d’installation des systèmes de gestion de base de données et des modules d’extension"], crit_en:["Placement and connection of the servers and peripheral devices in compliance with the plans","Proper installation of the operating system(s)","Proper connection of the servers to the network","Proper identification of the servers, peripheral devices and cabling","Compliance with structured cabling procedures and applicable electrical regulations","Compliance with occupational health and safety regulations"]},
          {n:3, desc:"Installer les systèmes de gestion de base de données", desc_en:"Install the database management systems", crit:["Configuration correcte des systèmes de gestion de base de données et des modules d’extension","Création et migration des bases de données en fonction des besoins","Application correcte de la procédure d’activation des systèmes de gestion de base de données","Configuration et personnalisation correctes des logiciels antivirus et coupe-feu"], crit_en:["Proper application of the procedures for installing database management systems and extension modules","Proper configuration of the database management systems and extension modules","Creation and migration of databases based on user needs","Proper application of database management system activation procedure"]},
          {n:4, desc:"Procéder au renforcement de la sécurité", desc_en:"Reinforce security", crit:["Organisation sécuritaire de la structure des fichiers et des répertoires","Gestion judicieuse des accès","Mise à jour adéquate des procédures de sauvegarde","Techniques de l’informatique"], crit_en:["Proper configuration and customizing of anti-virus software and firewalls","Secure organization of file and directory structures","Sound management of access rights","Suitable updating of the backup procedures"]}
        ]},
      {code:"00SM", type:"choix", enonce:"Effectuer le déploiement de dispositifs d’interconnexion de réseaux informatiques", enonce_en:"Deploy network interconnecting devices", contexte:"Pour des dispositifs d’interconnexion variés : commutateur, routeur, point d’accès sans fil, pare- feu, etc. Sur des technologies d’infrastructures variées de réseaux informatiques locaux, métropolitains et mondiaux. À partir des documents de conception. À l’aide de la documentation technique.", contexte_en:"For various interconnection devices: switches, routers, wireless access points, firewalls; On various local, metropolitan and global computer network infrastructure technologies; Based on design documents; Using technical documentation",
        elements:[
          {n:1, desc:"Analyser le projet de déploiement", desc_en:"Analyze the deployment project", crit:["Analyse juste des documents de conception","Analyse juste des caractéristiques techniques des dispositifs d’interconnexion à installer","Détermination correcte des tâches à effectuer","Positionnement et fixation des dispositifs d’interconnexion conformes aux plans"], crit_en:["Accurate analysis of design documents","Accurate analysis of the technical properties of the interconnection devices to be installed","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Mettre en place les dispositifs d’interconnexion", desc_en:"Set up the interconnection devices", crit:["Identification correcte des dispositifs d’interconnexion et du câblage","Respect des procédures de raccordement du câblage structuré et de la réglementation applicable au domaine de l’électricité","Respect des règles de santé et de sécurité au travail","Application correcte de la procédure d’installation ou de mise à jour des micrologiciels"], crit_en:["Placement and connection of the interconnection devices in compliance with the plans","Proper identification of the interconnection devices and cabling","Compliance with structured cabling procedures and applicable electrical regulations","Compliance with occupational health and safety regulations"]},
          {n:3, desc:"Installer les dispositifs d’interconnexion", desc_en:"Install the interconnection devices", crit:["Configuration correcte des dispositifs","Gestion judicieuse des accès","Sauvegarde correcte des configurations","Respect des mesures de sécurité"], crit_en:["Proper application of the firmware installation and update procedure","Proper configuration of the devices","Sound management of access rights","Proper backup of configurations","Compliance with security measures"]},
          {n:4, desc:"Participer à la mise en service des dispositifs d’interconnexion", desc_en:"Participate in the deployment of the interconnection devices", crit:["Application rigoureuse des plans de tests","Pertinence des correctifs","Fonctionnement optimal du réseau"], crit_en:["Precise application of the test plans","Relevance of the corrective actions","Optimal running of the network"]},
          {n:5, desc:"Rédiger la documentation", desc_en:"Produce the documentation", crit:["Détermination correcte de l’information à rédiger","Notation claire du travail effectué","Techniques de l’informatique"], crit_en:["Proper identification of the information to be written up","Clear record of the work carried out"]}
        ]},
      {code:"00SN", type:"choix", enonce:"Automatiser des tâches de gestion de réseaux informatiques", enonce_en:"Automate computer network management tasks", contexte:"Pour différents systèmes d’exploitation. À partir de tâches de gestion de réseaux récurrentes.", contexte_en:"For different operating systems; Based on recurring network management tasks",
        elements:[
          {n:1, desc:"Préparer les outils d’automatisation", desc_en:"Prepare the automation tools", crit:["Analyse juste des tâches récurrentes et de l’environnement informatique","Choix judicieux du langage de programmation ou du logiciel de configuration à utiliser","Installation correcte des logiciels d’automatisation"], crit_en:["Accurate analysis of recurrent tasks and of the computer environment","Sound choice of the programming language or configuration to be used","Proper installation of automation software"]},
          {n:2, desc:"Traduire la tâche dans un langage informatique", desc_en:"Translate the task into a computer language", crit:["Rédaction correcte des scripts ou des configurations","Respect de la méthode d’automatisation","Rédaction correcte des plans de tests"], crit_en:["Accurate writing of scripts and configurations","Compliance with automation processes"]},
          {n:3, desc:"Effectuer des tests sur les scripts ou les configurations", desc_en:"Carry out testing on the scripts and configurations", crit:["Application rigoureuse des plans de tests","Fonctionnement correct des scripts ou des configurations","Exécution correcte des scripts ou application correcte des configurations"], crit_en:["Accurate writing of test plans","Precise application of test plans","Proper performance of scripts and configurations"]},
          {n:4, desc:"Procéder à l’automatisation des tâches", desc_en:"Automate the tasks", crit:["Efficience des tâches automatisées","Détermination correcte de l’information à rédiger"], crit_en:["Proper execution of scripts and proper application of configurations","Efficiency of the automated tasks"]},
          {n:5, desc:"Rédiger la documentation", desc_en:"Produce the documentation", crit:["Notation claire du travail effectué","Techniques de l’informatique"], crit_en:["Proper identification of the information to be written up","Clear record of the work carried out"]}
        ]},
      {code:"00SP", type:"choix", enonce:"Assurer la surveillance de réseaux informatiques", enonce_en:"Monitor computer networks", contexte:"Pour différents types de surveillance : détection des intrusions, détection des vulnérabilités, analyse de la performance, analyse de la disponibilité, etc. Sur des technologies d’infrastructures variées de réseaux informatiques locaux, métropolitains et mondiaux. À l’aide de la documentation technique, de procédures d’intervention ainsi que de mesures de sécurité. À l’aide d’une base de connaissances.", contexte_en:"For different types of monitoring: intrusion detection, vulnerability detection, performance analysis, availability analysis; On various local, metropolitan and global computer network technology infrastructure; Using technical documentation, intervention procedures and security measures; Using a knowledge base",
        elements:[
          {n:1, desc:"Définir des besoins de surveillance", desc_en:"Define the monitoring needs", crit:["Analyse juste des diagrammes d’architecture du réseau","Analyse juste des mesures de sécurité existantes et des procédures d’intervention","Analyse juste des avantages et des inconvénients des logiciels de surveillance existants","Détermination correcte des logiciels de surveillance à mettre en place"], crit_en:["Accurate analysis of the network architecture diagram","Accurate analysis of existing security measures and intervention procedures","Accurate analysis of the advantages and disadvantages of existing monitoring software","Proper identification of the monitoring software to be installed"]},
          {n:2, desc:"Installer les logiciels de surveillance", desc_en:"Install the monitoring software", crit:["Application correcte de la procédure d’installation des logiciels de surveillance","Configuration et personnalisation correctes des logiciels de surveillance","Analyse juste des fichiers journaux, de l’information transmise par les logiciels de surveillance ou de l’appel de service","Détection correcte et prompte des vulnérabilités et des attaques informatiques"], crit_en:["Proper application of the monitoring software installation procedure","Proper configuration and customizing of the monitoring software"]},
          {n:3, desc:"Effectuer le monitorage", desc_en:"Carry out monitoring activities", crit:["Consultation appropriée de la base de connaissances","Détermination correcte de la cause du problème de fonctionnement ou de sécurité","Détermination correcte du niveau de priorité des interventions","Application rigoureuse des procédures d’intervention"], crit_en:["Accurate analysis of log files, information conveyed by monitoring software or service call","Proper and prompt detection of vulnerabilities and cyberattacks","Appropriate consultation of the knowledge base","Proper identification of the root cause of the operational or security issue","Proper identification of the level of priority of the interventions"]},
          {n:4, desc:"Effectuer les interventions", desc_en:"Carry out the interventions", crit:["Respect des mesures de sécurité, des obligations légales et des règles d’éthique professionnelle","Pertinence de l’information transmise aux personnes responsables","Techniques de l’informatique"], crit_en:["Precise application of the intervention procedures","Compliance with security measures, legal obligations and professional ethics","Suitability of the information provided to the person responsible"]}
        ]},
      {code:"00SQ", type:"choix", enonce:"Collaborer à la conception d’un réseau informatique", enonce_en:"Collaborate on the design of a computer network", contexte:"À partir d’une demande et d’exigences de la cliente ou du client. À l’aide de la documentation technique. À l’aide de normes, de méthodes et de bonnes pratiques en matière de gestion de réseaux.", contexte_en:"Based on the client's request and requirements; Using technical documentation; Following network management standards, methods and best practices",
        elements:[
          {n:1, desc:"Participer à l’élaboration du cahier des charges fonctionnel", desc_en:"Participate in the development of functional specifications", crit:["Analyse juste de la demande et des exigences de la cliente ou du client","Analyse juste des caractéristiques de l’équipement informatique et des applications utilisés par la cliente ou le client","Pertinence des avis sur la nature des besoins","Pertinence des avis sur les normes, les méthodes et les bonnes pratiques à utiliser en matière de gestion de réseaux"], crit_en:["Accurate analysis of the client's request and requirements","Accurate analysis of the features of the computer equipment and applications used by the client","Appropriateness of the recommendations regarding the nature of the request","Appropriateness of the recommendations regarding the standards, methods and best practices to follow in network management"]},
          {n:2, desc:"Participer à la conception générale du réseau", desc_en:"Participate in the overall design of the network", crit:["Pertinence des avis sur l’architecture du réseau informatique à mettre en place ou à modifier","Pertinence des avis sur les services à mettre en place ou à modifier","Évaluation juste des composants logiciels et matériels à utiliser","Pertinence des avis sur les mesures de sécurité et les procédures d’intervention à mettre en place"], crit_en:["Appropriateness of the recommendations regarding the computer network architecture to be implemented or modified","Appropriateness of the recommendations regarding the services to be implemented or modified","Sound assessment of the software and hardware components to be used","Appropriateness of the recommendations regarding the security measures and intervention procedures to be implemented","Appropriateness of the recommendations regarding the feasibility of the computing solution"]},
          {n:3, desc:"Effectuer la conception détaillée", desc_en:"Carry out the detailed design", crit:["Pertinence des avis sur la faisabilité de la solution informatique","Établissement judicieux de la nomenclature et des adresses IP","Choix judicieux des applications et de l’équipement informatique à utiliser","Établissement correct et détaillé de la liste des applications et de l’équipement informatique nécessaires"], crit_en:["Careful establishment of IP nomenclature and IP addresses","Astute choice of the computer applications and equipment to be used"]},
          {n:4, desc:"Produire les documents de conception", desc_en:"Produce the design documents", crit:["Réalisation correcte des diagrammes d’architecture, des plans de câblage ou des plans d’aménagement des salles des serveurs","Participation active à la revue de conception","Utilisation du vocabulaire approprié","Respect des limites d’intervention professionnelle"], crit_en:["Proper and detailed listing of the required applications and computer equipment","Accurate production of architecture diagrams, cabling plans and server room layout plans","Active participation in the design review","Use of appropriate vocabulary","Compliance with the limits of professional intervention"]},
          {n:5, desc:"Prendre des dispositions pour le démarrage du projet", desc_en:"Take steps to launch the project", crit:["Préparation correcte des appels d’offres","Estimation réaliste des coûts","Formulation claire de recommandations sur le choix des fournisseurs","Techniques de l’informatique"], crit_en:["Proper preparation of calls for tenders","Realistic estimate of costs","Clear formulation of recommendations on the choice of suppliers"]}
        ]},
      {code:"00SR", type:"choix", enonce:"Effectuer le développement d’applications natives sans base de données", enonce_en:"Develop native applications without a database", contexte:"Pour différentes plateformes cibles : tablettes, téléphones intelligents, ordinateurs de bureau, etc. Pour de nouvelles applications et des applications à modifier. À partir des documents de conception. À l’aide d’un compilateur conçu pour la plateforme cible, d’un compilateur croisé ou d’un interpréteur. À l’aide d’un émulateur sur la plateforme hôte. À l’aide d’images, de sons et de vidéos. À l’aide de procédures de suivi des problèmes et de gestion des versions.", contexte_en:"For different target platforms: tablets, smartphones, desktop computers; For new applications and applications to be modified; Based on design documents; Using a compiler designed for the target platform, a cross compiler or an interpreter; Using an emulator on the development platform; Using images, sounds and videos; Using issue tracking and version control procedures",
        elements:[
          {n:1, desc:"Analyser le projet de développement de l’application", desc_en:"Analyze the application development project", crit:["Analyse juste des documents de conception","Détermination correcte des tâches à effectuer","Installation correcte des logiciels et des bibliothèques sur la plateforme hôte","Configuration appropriée de la plateforme cible"], crit_en:["Accurate analysis of design documents","Proper identification of tasks to be carried out"]},
          {n:2, desc:"Préparer l’environnement de développement informatique", desc_en:"Prepare the computer development environment", crit:["Configuration appropriée du système de gestion de versions","Importation correcte du code source","Choix et utilisation appropriés des éléments graphiques pour l’affichage et la saisie","Intégration correcte des images"], crit_en:["Proper installation of software and libraries on the development platform","Proper configuration of the target platform","Proper configuration of the version control system","Proper importing of the source code"]},
          {n:3, desc:"Générer ou programmer l’interface graphique", desc_en:"Generate or program the graphical interface", crit:["Adaptation de l’interface en fonction du format d’affichage et de la résolution","Programmation correcte des interactions entre l’interface graphique et l’utilisatrice ou l’utilisateur","Programmation correcte des communications avec les périphériques et les fonctions logicielles de la plateforme cible","Utilisation judicieuse des fils d’exécution"], crit_en:["Appropriate choice and use of graphic elements for display and input","Proper integration of images","Adaptation of the interface based on the display format and resolution"]},
          {n:4, desc:"Programmer la logique applicative", desc_en:"Program the application logic", crit:["Intégration précise des sons et des vidéos","Application correcte des techniques d’internationalisation","Application rigoureuse des techniques de programmation sécurisée","Techniques de l’informatique"], crit_en:["Proper programming of interactions between the graphical user interface and the user","Proper programming of communications between the peripheral devices and the software functions of the target platform","Effective use of execution threads","Proper integration of sounds and videos","Proper application of internationalization techniques","Precise application of secure coding techniques"]}
        ]},
      {code:"00SS", type:"choix", enonce:"Effectuer le développement d’applications natives avec base de données", enonce_en:"Develop native applications with a database", contexte:"Pour différentes plateformes cibles : tablettes, téléphones intelligents, ordinateurs de bureau, etc. Pour de nouvelles applications et des applications à modifier. À partir des documents de conception. À l’aide d’un compilateur conçu pour la plateforme cible, d’un compilateur croisé ou d’un interpréteur. À l’aide d’un émulateur sur la plateforme hôte. À l’aide d’images. À l’aide de procédures de suivi des problèmes et de gestion des versions.", contexte_en:"For different target platforms: tablets, smartphones, desktop computers; For new and modified applications; Based on design documents; Using compilers; Using an emulator on the development platform; Using issue tracking and version control procedures",
        elements:[
          {n:1, desc:"Analyser le projet de développement de l’application", desc_en:"Analyze the application development project", crit:["Analyse juste des documents de conception","Détermination correcte des tâches à effectuer","Installation correcte des logiciels et des bibliothèques sur la plateforme hôte","Configuration appropriée de la plateforme cible"], crit_en:["Accurate analysis of design documents","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Préparer l’environnement de développement informatique", desc_en:"Prepare the computer development environment", crit:["Configuration appropriée du système de gestion de versions","Importation correcte du code source","Création ou adaptation correctes de la base de données locale ou de la base de données distante"], crit_en:["Proper installation of software and libraries","Proper configuration of the target platform","Proper configuration of the version control system","Proper importing of the source code"]},
          {n:3, desc:"Préparer la ou les bases de données", desc_en:"Prepare the database(s)", crit:["Insertion correcte des données initiales ou des données de tests","Respect du modèle de données","Choix et utilisation appropriés des éléments graphiques pour l’affichage et la saisie"], crit_en:["Proper creation or adaptation of the local or remote database","Proper insertion of initial or test data","Compliance with the data model"]},
          {n:4, desc:"Générer ou programmer l’interface graphique", desc_en:"Generate or program the graphical user interface", crit:["Intégration correcte des images","Adaptation de l’interface en fonction du format d’affichage et de la résolution","Techniques de l’informatique"], crit_en:["Appropriate choice and use of graphic elements","Proper integration of images","Adaptation of the interface based on the display format and resolution"]}
        ]},
      {code:"00ST", type:"choix", enonce:"Effectuer le développement d’applications Web non transactionnelles", enonce_en:"Develop non-transactional Web applications", contexte:"Pour des applications Web liées à la diffusion d’information, à la promotion, etc. Pour de nouvelles applications et des applications à modifier. À partir des documents de conception. À l’aide d’images. À l’aide de procédures de suivi des problèmes et de gestion des versions.", contexte_en:"For Web applications associated with information delivery, marketing, etc.; For new and modified applications; Based on design documents; Using images; Using issue tracking and version control procedures",
        elements:[
          {n:1, desc:"Analyser le projet de développement de l’application", desc_en:"Analyze the application development project", crit:["Analyse juste des documents de conception","Détermination correcte des tâches à effectuer","Installation correcte de la plateforme de développement Web et du système de gestion de base de données de développement","Installation correcte des logiciels et des bibliothèques"], crit_en:["Accurate analysis of design documents","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Préparer l’environnement de développement informatique", desc_en:"Prepare the computer development environment", crit:["Configuration appropriée du système de gestion de versions","Importation correcte du code source","Création ou adaptation correctes de la base de données","Insertion correcte des données initiales ou des données de tests"], crit_en:["Proper installation of the Web development platform and the development database management system","Proper installation of software and libraries","Appropriate configuration of the version control system","Proper importing of the source code"]},
          {n:3, desc:"Préparer la base de données", desc_en:"Prepare the database", crit:["Respect du modèle de données","Utilisation appropriée du langage de balisage","Création et utilisation appropriées des feuilles de styles","Intégration correcte des images"], crit_en:["Suitable creation or adaptation of the database","Proper insertion of initial or test data","Compliance with the data model"]},
          {n:4, desc:"Programmer l’interface Web", desc_en:"Program the Web interface", crit:["Adaptation de l’interface en fonction du format d’affichage et de la résolution","Choix approprié des clauses, des opérateurs, des commandes ou des paramètres dans les requêtes à la base de données","Manipulation correcte des données de la base de données","Programmation correcte de la transformation des données en information"], crit_en:["Appropriate use of markup language","Suitable creation and use of style sheets","Proper integration of images","Adaptation of the interface based on the display format and resolution"]},
          {n:5, desc:"Programmer la logique applicative du côté serveur", desc_en:"Program the server-side application logic", crit:["Application correcte des techniques d’internationalisation","Application rigoureuse des techniques de programmation sécurisée","Techniques de l’informatique"], crit_en:["Appropriate choice of clauses, operators, commands or parameters in database queries","Correct handling of database data","Proper programming of the conversion of data into information","Proper application of internationalization techniques","Precise application of secure programming techniques"]}
        ]},
      {code:"00SU", type:"choix", enonce:"Effectuer le développement d’applications Web transactionnelles", enonce_en:"Develop transactional Web applications", contexte:"Pour des applications Web transactionnelles : réservations, inscriptions, travail collaboratif, gestion des stocks, commerce électronique, etc. Pour de nouvelles applications et des applications à modifier. À partir des documents de conception. À l’aide d’images. À l’aide de procédures de suivi des problèmes et de gestion des versions.", contexte_en:"For transactional Web applications: reservations, registrations, collaboration, inventory management, e-commerce, etc.; For new and modified applications; Based on design documents; Using images; Using issue tracking and version control procedures",
        elements:[
          {n:1, desc:"Analyser le projet de développement de l’application", desc_en:"Analyze the application development project", crit:["Analyse juste des documents de conception","Détermination correcte des tâches à effectuer","Installation correcte de la plateforme de développement Web et du système de gestion de base de données de développement","Installation correcte des logiciels et des bibliothèques"], crit_en:["Accurate analysis of design documents","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Préparer l’environnement de développement informatique", desc_en:"Prepare the computer development environment", crit:["Configuration appropriée du système de gestion de versions","Importation correcte du code source","Création ou adaptation correctes de la base de données","Insertion correcte des données initiales ou des données de tests"], crit_en:["Proper installation of the Web development platform and the development database management system","Proper installation of software and libraries","Appropriate configuration of the version control system","Proper importing of the source code"]},
          {n:3, desc:"Préparer la base de données", desc_en:"Prepare the database", crit:["Respect du modèle de données","Utilisation appropriée du langage de balisage","Création et utilisation appropriées des feuilles de styles","Intégration correcte des images"], crit_en:["Suitable creation or adaptation of the database","Proper insertion of initial or test data","Compliance with the data model"]},
          {n:4, desc:"Programmer l’interface Web", desc_en:"Program the Web interface", crit:["Création appropriée des formulaires Web","Adaptation de l’interface en fonction du format d’affichage et de la résolution","Techniques de l’informatique"], crit_en:["Appropriate use of markup language","Suitable creation and use of style sheets","Proper integration of images","Suitable creation of Web forms","Adaptation of the interface based on the display format and resolution"]}
        ]},
      {code:"00SV", type:"choix", enonce:"Effectuer le développement de services d’échange de données", enonce_en:"Develop data exchange services", contexte:"Pour des services d’échange de données alimentant des applications natives, Web ou des objets connectés. Pour de nouvelles applications et des applications à modifier. À partir des documents de conception. À l’aide de procédures de suivi des problèmes et de gestion des versions.", contexte_en:"For data exchange services used by native or Web applications or connected objects; For new and modified applications; Based on design documents; Using issue tracking and version control procedures",
        elements:[
          {n:1, desc:"Analyser le projet de développement de l’application", desc_en:"Analyze the application development project", crit:["Analyse juste des documents de conception","Détermination correcte des tâches à effectuer","Installation correcte de la plateforme de développement et du système de gestion de base de données de développement","Installation correcte des logiciels et des bibliothèques","Configuration appropriée du système de gestion de versions"], crit_en:["Accurate analysis of design documents","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Préparer l’environnement de développement informatique", desc_en:"Prepare the computer development environment", crit:["Importation correcte du code source","Création ou adaptation correctes de la base de données","Insertion correcte des données initiales ou des données de tests","Respect du modèle de données"], crit_en:["Proper installation of the development platform and development database management system","Proper installation of software and libraries","Appropriate configuration of the version control system","Proper importing of the source code"]},
          {n:3, desc:"Préparer la base de données", desc_en:"Prepare the database", crit:["Programmation ou intégration correctes de mécanismes d’authentification, d’autorisation ou d’établissement de liaison sécurisée","Programmation correcte de la réception des données d’entrée","Choix approprié des clauses, des opérateurs, des commandes ou des paramètres dans les requêtes à la base de données","Manipulation correcte des données de la base de données"], crit_en:["Suitable creation or adaptation of the database","Proper insertion of initial or test data","Compliance with the data model"]},
          {n:4, desc:"Programmer la logique applicative du service", desc_en:"Program the application logic for the service", crit:["Programmation correcte de l’envoi des données de sortie","Application rigoureuse des techniques de programmation sécurisée","Respect des protocoles de communication et des formats d’échange de données","Techniques de l’informatique"], crit_en:["Proper programming or integration of authentication, authorization or secure connection establishment mechanisms","Proper programming of the reception of input data","Appropriate choice of clauses, operators, commands or parameters in database queries","Correct handling of database data","Proper programming of the response of output data","Precise application of secure programming techniques","Compliance with communication protocols and data exchange formats"]}
        ]},
      {code:"00SW", type:"choix", enonce:"Effectuer le développement d’applications de jeu ou de simulation", enonce_en:"Develop gaming or simulation applications", contexte:"Pour différents jeux ou simulations : jeux d’action, jeux de rôles, simulateurs de vol, simulateurs de procédés industriels, etc. Pour de nouvelles applications et des applications à modifier. À partir des documents de conception. À l’aide de moteurs de jeu ou de simulation. À l’aide de sons et d’images 2D et 3D. À l’aide de procédures de suivi des problèmes et de gestion des versions.", contexte_en:"For different games or simulations: action games, role-playing games, flight simulators, industrial process simulators, etc.; For new and modified applications; Based on design documents; Using game or simulation engines; Using sounds and 2D and 3D images; Using issue tracking and version control procedures",
        elements:[
          {n:1, desc:"Analyser le projet de développement de l’application", desc_en:"Analyze the application development project", crit:["Analyse juste des documents de conception","Détermination correcte des tâches à effectuer","Installation correcte des logiciels et des bibliothèques","Configuration appropriée du système de gestion de versions","Importation correcte du code source"], crit_en:["Accurate analysis of design documents","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Préparer l’environnement de développement informatique", desc_en:"Prepare the computer development environment", crit:["Choix et utilisation appropriés des éléments graphiques pour l’affichage et la saisie","Intégration correcte des images 2D et 3D","Adaptation des représentations en fonction du format d’affichage et de la résolution","Programmation correcte des comportements des éléments graphiques et des périphériques"], crit_en:["Proper installation of software and libraries","Appropriate configuration of the version control system","Proper importing of the source code"]},
          {n:3, desc:"Générer des représentations de mondes réels ou imaginaires", desc_en:"Generate real or virtual world representations", crit:["Programmation correcte des effets visuels","Intégration précise des sons","Programmation correcte des interactions","Application correcte des techniques d’internationalisation"], crit_en:["Appropriate choice and use of graphic elements for display and input","Proper integration of 2D and 3D images","Adaptation of the interface based on the display format and resolution"]},
          {n:4, desc:"Programmer la logique du jeu ou de la simulation", desc_en:"Program the game or simulation logic", crit:["Application rigoureuse des techniques de programmation sécurisée","Utilisation appropriée des moteurs de jeu ou de simulation","Application rigoureuse des plans de tests","Revues de code et de sécurité rigoureuses"], crit_en:["Proper programming of behaviours of graphic elements and peripheral devices","Proper programming of visual effects","Accurate integration of sounds","Proper programming of interactions","Proper application of internationalization techniques","Precise application of secure programming techniques","Appropriate use of game or simulation engines"]},
          {n:5, desc:"Contrôler la qualité de l’application", desc_en:"Control the quality of the application", crit:["Pertinence des correctifs","Respect des procédures de suivi des problèmes et de gestion des versions","Respect des documents de conception","Techniques de l’informatique"], crit_en:["Precise application of test plans","Thorough reviews of code and security","Relevance of the corrective actions","Compliance with issue tracking and version control procedures","Compliance with design documents"]}
        ]},
      {code:"00SX", type:"choix", enonce:"Effectuer le développement d’applications pour des objets connectés", enonce_en:"Develop applications for connected objects", contexte:"Pour des applications associées à des dispositifs mobiles prêts-à-porter, à la domotique, à l’immotique, à la robotique, à la surveillance de procédés, etc. Pour de nouvelles applications et des applications à modifier. À partir des documents de conception. À l’aide de procédures de suivi des problèmes et de gestion des versions.", contexte_en:"For applications associated with wearable devices, home automation, building automation, robotics, process monitoring, etc.; For new and modified applications; Based on design documents; Using issue tracking and version control procedures",
        elements:[
          {n:1, desc:"Analyser le projet de développement de l’application", desc_en:"Analyze the application development project", crit:["Analyse juste des documents de conception","Détermination correcte des tâches à effectuer","Installation correcte des logiciels et des bibliothèques","Position et fixation correctes des objets dans l’environnement de simulation","Connexion correcte des objets à l’ordinateur de développement, au réseau ou à d’autres objets"], crit_en:["Accurate analysis of the design documents","Proper identification of the tasks to be carried out"]},
          {n:2, desc:"Préparer l’environnement de développement informatique et le banc d’essai", desc_en:"Prepare the computer development environment and the test bed", crit:["Mise à jour correcte des micrologiciels des objets","Configuration appropriée du système de gestion de versions","Importation correcte du code source","Choix et utilisation appropriés des éléments graphiques pour l’affichage et la saisie","Intégration correcte des images"], crit_en:["Proper installation of software and libraries","Correct placement and attachment of objects in the simulation environment","Proper connection of objects to the development computer, network or other objects","Proper updating of the object firmware","Appropriate configuration of the version control system","Proper importing of the source code"]},
          {n:3, desc:"Générer ou programmer l’interface utilisateur", desc_en:"Generate or program the user interface", crit:["Adaptation de l’interface en fonction du format d’affichage et de la résolution","Programmation correcte des instructions d’acquisition, de traitement et de transmission des données","Programmation correcte des interactions entre l’interface et l’utilisatrice ou l’utilisateur","Utilisation appropriée des services d’échange de données","Application correcte des techniques d’internationalisation"], crit_en:["Appropriate choice and use of graphic elements for display and input","Proper integration of images","Adaptation of the interface based on the display format and resolution"]},
          {n:4, desc:"Programmer la logique applicative de l’objet et la logique applicative de contrôle ou de surveillance", desc_en:"Program the object's application logic and the control or monitoring application logic", crit:["Application rigoureuse des techniques de programmation sécurisée","Transfert correct de l’application sur l’objet connecté","Respect des contraintes temporelles","Techniques de l’informatique"], crit_en:["Proper programming of data gathering, processing and transmission instructions","Proper programming of interactions between the interface and the user","Appropriate use of data exchange services","Proper application of internationalization techniques","Precise application of secure programming techniques","Proper transfer of the application onto the connected object","Compliance with time constraints"]}
        ]},
      {code:"00SY", type:"choix", enonce:"Collaborer à la conception d’applications", enonce_en:"Collaborate on the design of applications", contexte:"À partir d’une demande et d’exigences de la cliente ou du client. À l’aide de normes, de méthodes et de bonnes pratiques en matière de développement d’applications.", contexte_en:"Based on the client's requests and requirements; Using application development standards, methods and best practices",
        elements:[
          {n:1, desc:"Participer à l’élaboration du cahier des charges fonctionnel", desc_en:"Participate in the development of the functional specifications", crit:["Analyse juste de la demande et des exigences de la cliente ou du client","Analyse juste des caractéristiques de l’équipement informatique et des applications utilisés par la cliente ou le client","Pertinence des avis sur la nature des besoins","Pertinence des avis sur les normes, les méthodes et les bonnes pratiques à utiliser en matière de développement d’applications","Pertinence des avis sur le choix de l’architecture logicielle","Évaluation juste des composants logiciels et matériels à utiliser"], crit_en:["Accurate analysis of the client's request and requirements","Accurate analysis of the features of the computer equipment and applications used by the client","Appropriateness of the recommendations regarding the nature of the requirements","Appropriateness of the recommendations regarding application development standards, methods and best practices"]},
          {n:2, desc:"Participer à la conception générale des applications", desc_en:"Participate in the overall design of the applications", crit:["Pertinence des avis sur les mesures de sécurité à mettre en place","Pertinence des avis sur les stratégies de tests à utiliser","Pertinence des avis sur la faisabilité de la solution informatique","Modélisation d’une base de données conforme au besoin","Détermination claire des données initiales d’une base de données"], crit_en:["Appropriateness of the recommendations regarding the choice of software architecture","Sound assessment of the software and hardware components to be used","Appropriateness of the recommendations regarding security measures to be implemented","Appropriateness of the recommendations regarding test strategies to be used","Appropriateness of the recommendations regarding the feasibility of the computing solution"]},
          {n:3, desc:"Effectuer la conception détaillée", desc_en:"Develop the detailed design", crit:["Description claire de la logique applicative et de l’interface à générer ou à programmer","Modélisation orientée objet conforme aux principes d’encapsulation, d’héritage, de composition ou de polymorphisme","Choix ou production judicieux des algorithmes","Respect des règles de nomenclature","Techniques de l’informatique"], crit_en:["Modelling of a database aligned with user needs","Clear identification of the initial data in the database","Clear description of the application logic and interface to generate or program","Object-oriented modelling compliant with principles of encapsulation, inheritance, composition and polymorphism","Proper choice or production of algorithms","Compliance with nomenclature rules"]}
        ]}
    ]
  },

  // ─── 574.C0 ───────────────────────────────────────────────────────────────
  {
    code: "574.C0",
    titre: "Production 3D et synthèse d'images",
    titre_en: null,
    secteur: "13 – Communication et documentation",
    annee: 2023,
    unites: "91 \u2154",
    heures: 2700,
    source_url: "https://cdn-contenu.quebec.ca/cdn-contenu/adm/min/education/publications-adm/cegeps/services-administratifs/Programmes-etudes-techniques/Programme-574C0.pdf",
    competences: [
      {code:"02LN", type:"obligatoire", enonce:"Adopter un comportement professionnel", contexte:"Dans tous les champs d'expertise; Dans toutes les situations en lien avec des activités professionnelles; Individuellement; À l'aide des technologies de l'information, de la communication orale/écrite/visuelle, de codes communicationnels, de techniques de gestion du temps et des priorités",
        elements:[
          {n:1, desc:"Explorer la profession et ses lieux d'exercice", crit:["Caractérisation adéquate des milieux de travail liés à l'exercice de la profession","Reconnaissance juste du cadre légal lié à l'exercice de la profession","Reconnaissance juste des tâches et des conditions de travail liées à l'exercice de la profession","Caractérisation adéquate des comportements professionnels"]},
          {n:2, desc:"Travailler au sein d'une équipe", crit:["Respect des personnes, des rôles, des responsabilités et des règles de fonctionnement","Communication adaptée","Contribution constante au maintien d'un bon climat de travail","Présentation soignée de son profil professionnel et de ses réalisations","Échange respectueux d'idées et de critiques constructives"]},
          {n:3, desc:"Intervenir dans des situations délicates", crit:["Interprétation juste de la situation","Évaluation juste des interventions à effectuer","Interventions appropriées à la situation","Recours judicieux à une autre personne, s'il y a lieu"]}
        ]},
      {code:"02LP", type:"obligatoire", enonce:"Exploiter les technologies de l'information", contexte:"Dans tous les champs d'expertise; Pour la gestion de son environnement de travail; Individuellement; À l'aide des technologies de l'information, de bonnes pratiques ergonomiques, de références",
        elements:[
          {n:1, desc:"Caractériser les outils informatiques", crit:["Spécification juste des composants de l'équipement","Différenciation approfondie des applications informatiques"]},
          {n:2, desc:"Réguler l'environnement de travail", crit:["Contrôle convenable des irritants environnementaux","Ajustement correct du poste de travail","Personnalisation adaptée de l'interface logicielle","Application correcte des bonnes pratiques ergonomiques"]},
          {n:3, desc:"Gérer les données informatiques", crit:["Caractérisation détaillée des données","Classement méthodique des fichiers","Versionnage approprié des fichiers","Application méthodique des procédures de dépôt et d'archivage des fichiers"]},
          {n:4, desc:"Gérer les performances des outils", crit:["Examen des performances des outils en fonction des tâches à réaliser","Analyse juste des performances des outils","Paramétrage de l'équipement et des applications en fonction des tâches à réaliser ou des mises à jour des outils","Recours avisé à l'équipe de soutien technique, s'il y a lieu"]}
        ]},
      {code:"02LQ", type:"obligatoire", enonce:"Appliquer une stratégie de recherche et de résolution de problèmes", contexte:"Dans tous les champs d'expertise; Pour la recherche d'informations et de références ainsi que la résolution de problèmes sur les plans artistiques, narratif, technologique et technique; Individuellement",
        elements:[
          {n:1, desc:"Circonscrire l'objet de la recherche et/ou du problème", crit:["Identification juste des besoins et des contraintes","Reconnaissance juste du problème"]},
          {n:2, desc:"Relever les informations", crit:["Exploration détaillée des sources d'inspiration et/ou d'information","Identification adéquate des causes possibles du problème","Collecte complète des informations existantes"]},
          {n:3, desc:"Analyser les informations", crit:["Pertinence des informations relevées","Classement méthodique","Examen minutieux","Caractérisation détaillée","Priorisation cohérente"]},
          {n:4, desc:"Expérimenter les pistes d'action ou de solution", crit:["Détermination juste de pistes d'action ou de solution","Test efficient des pistes d'action ou de solution","Analyse juste des résultats"]},
          {n:5, desc:"Mettre en œuvre les résultats de l'expérimentation", crit:["Recommandation appropriée de pistes d'action ou de solution","Application méthodique des pistes d'action ou de solution retenues","Suivi détaillé des résultats"]}
        ]},
      {code:"02LR", type:"obligatoire", enonce:"Contribuer au déploiement de la direction artistique", contexte:"Dans tous les champs d'expertise; Pour le respect de la direction artistique dans son travail; Sous la supervision de la personne responsable; En se référant aux éléments du langage visuel, à la théorie des couleurs, aux principes de design, aux caractéristiques artistiques des œuvres",
        elements:[
          {n:1, desc:"Caractériser les informations artistiques liées au projet", crit:["Application adaptée de la stratégie de recherche","Identification juste des informations représentatives et distinctives de la direction artistique","Examen minutieux des informations"]},
          {n:2, desc:"Expérimenter les possibilités artistiques", crit:["Mise en œuvre adaptée des techniques de créativité","Utilisation juste des éléments du langage visuel"]},
          {n:3, desc:"Améliorer les aspects artistiques de sa production", crit:["Comparaison juste entre ses réalisations et la direction artistique","Résolution adéquate des problèmes"]}
        ]},
      {code:"02LS", type:"obligatoire", enonce:"Collaborer à l'organisation et au déploiement du projet de production", contexte:"Dans tous les champs d'expertise; Pour la détermination des étapes clés et le suivi de l'avancement des travaux liés au projet; Sous la supervision de la personne responsable",
        elements:[
          {n:1, desc:"Déterminer les incidences techniques du projet sur la production", crit:["Application adaptée de la stratégie de recherche","Identification du processus de production en fonction du secteur d'activité, du créneau d'expertise et du type de projet","Classement des informations techniques selon les champs d'expertise","Caractérisation juste des aspects et des incidences techniques"]},
          {n:2, desc:"Structurer le travail", crit:["Relevé complet des tâches à réaliser","Choix conforme des méthodes de production","Estimation sommaire du temps de production","Ordonnancement cohérent des opérations"]},
          {n:3, desc:"Effectuer le suivi de sa production", crit:["Priorisation des tâches en fonction des échéances établies","Utilisation appropriée des listes de contrôle","Résolution adéquate des problèmes"]}
        ]},
      {code:"02LT", type:"obligatoire", enonce:"Animer les composants d'une scène", contexte:"Pour tous les types de mouvements d'une scène; Sous la supervision de la personne responsable; En se référant aux principes d'animation et aux lois de la physique",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés à l'animation","Analyse exhaustive des informations et des références","Reconnaissance adéquate des phases et des caractéristiques de chaque mouvement","Choix judicieux de la stratégie d'animation"]},
          {n:2, desc:"Planifier l'animation", crit:["Identification juste du moment de chaque pose","Détermination juste des caractéristiques visuelles de chaque pose"]},
          {n:3, desc:"Produire les clés d'animation", crit:["Précision du positionnement et de l'orientation de chaque élément","Respect de la trajectoire","Ajustement méthodique des autres paramètres","Enregistrement ordonné des clés d'animation"]},
          {n:4, desc:"Ajuster la dynamique des mouvements", crit:["Contrôle précis de la durée des mouvements","Utilisation efficace du gestionnaire de courbes","Reproduction adéquate des caractéristiques de chaque mouvement","Ajout pertinent de clés d'animation intermédiaires"]},
          {n:5, desc:"Livrer les animations", crit:["Évaluation des animations en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Conformité du dépôt et de l'archivage des animations"]}
        ]},
      {code:"02LU", type:"obligatoire", enonce:"Générer les images", contexte:"Dans tous les champs d'expertise; Pour la captation et le rendu d'images de référence, de prévisualisation ou de production; Sous la supervision de la personne responsable; À l'aide de caméras physiques et virtuelles, d'accessoires, de techniques d'encodage et de manipulation de caméras",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés aux images à produire","Analyse approfondie des informations, des images et des références","Identification précise du sujet","Établissement cohérent du point de vue","Choix judicieux de la stratégie de génération d'images"]},
          {n:2, desc:"Contrôler la caméra et les accessoires", crit:["Ajustement efficace des accessoires","Cadrage juste du sujet","Composition minutieuse de l'image","Paramétrage juste de la caméra","Exécution soignée des mouvements"]},
          {n:3, desc:"Enregistrer les images", crit:["Maximisation des paramètres en fonction de la qualité visuelle requise","Captation des images selon les besoins","Optimisation des temps de rendu","Production des passes de rendu selon les besoins"]},
          {n:4, desc:"Assembler une séquence vidéo", crit:["Collecte complète des images","Positionnement éclairé des images sur la ligne du temps","Raccord conforme entre les plans","Ajout pertinent de transitions, s'il y a lieu","Ajout cohérent d'une bande audio, s'il y a lieu"]},
          {n:5, desc:"Livrer les images", crit:["Évaluation des images en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Conformité du dépôt et de l'archivage des images"]}
        ]},
      {code:"02LV", type:"obligatoire", enonce:"Traiter les images", contexte:"Dans tous les champs d'expertise; Pour des images de prévisualisation ou de production; Sous la supervision de la personne responsable; À partir d'images fixes et animées; À l'aide des espaces colorimétriques et de techniques de traitement de l'image",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés aux images à traiter","Analyse approfondie des informations, des images et des références","Identification précise des traitements à réaliser","Choix judicieux de la stratégie de traitement d'images"]},
          {n:2, desc:"Modifier le format des images", crit:["Recadrage précis de l'image","Conversion juste de l'espace colorimétrique","Transcodage juste de l'image"]},
          {n:3, desc:"Ajuster la couleur des images", crit:["Détermination juste de la plage dynamique","Correction soignée de la couleur"]},
          {n:4, desc:"Isoler un élément", crit:["Production minutieuse de mattes","Utilisation appropriée des masques"]},
          {n:5, desc:"Appliquer des transformations aux images ou à leurs composants", crit:["Pertinence des transformations","Exécution efficace des techniques","Application soignée de filtres et d'effets"]},
          {n:6, desc:"Livrer les images", crit:["Évaluation des images en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Conformité du dépôt et de l'archivage des images"]}
        ]},
      {code:"02LW", type:"obligatoire", enonce:"Modéliser les accessoires", contexte:"Pour tous les types d'accessoires; Sous la supervision de la personne responsable; À l'aide des technologies de l'information, de techniques de créativité et de techniques de modélisation",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés à la modélisation","Analyse exhaustive des informations et des références","Détermination juste des caractéristiques de chaque volume","Choix judicieux de la stratégie de modélisation"]},
          {n:2, desc:"Générer les composants du modèle", crit:["Positionnement précis des références en matière de modélisation","Mise en œuvre soignée des techniques de modélisation","Transposition rigoureuse des références en volumes","Affinage minutieux des volumes","Gestion adéquate des groupes de lissage"]},
          {n:3, desc:"Assembler les composants du modèle", crit:["Ajustement précis des composants","Regroupement logique des composants"]},
          {n:4, desc:"Gérer la topologie", crit:["Ajustement adéquat des polygones, des segments et des sommets","Conversion de la résolution selon les besoins"]},
          {n:5, desc:"Cartographier les coordonnées UV", crit:["Établissement optimal des lignes de découpe (seams)","Déploiement conforme des volumes en objets 2D","Gestion adéquate des planches UV"]},
          {n:6, desc:"Livrer les modèles", crit:["Évaluation des modèles en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Finalisation rigoureuse des modèles","Conformité du dépôt et de l'archivage des modèles"]}
        ]},
      {code:"02LX", type:"obligatoire", enonce:"Reproduire les matériaux et les textures", contexte:"Pour tous les types de matériaux et de textures réels; Sous la supervision de la personne responsable; À partir des composants du projet et d'images numériques; À l'aide des nuanceurs (shaders) existants",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés aux surfaces","Analyse exhaustive des informations et des références","Détermination juste des caractéristiques visuelles des matériaux et des textures","Choix judicieux de la stratégie de surfaçage"]},
          {n:2, desc:"Parfaire la cartographie des coordonnées UV", crit:["Examen minutieux de la cartographie","Correction exhaustive des problèmes"]},
          {n:3, desc:"Établir les matériaux et les textures", crit:["Gestion appropriée de l'arborescence","Imitation crédible des caractéristiques visuelles des matériaux","Application soignée des textures","Pertinence des détails","Harmonisation globale de l'apparence des surfaces"]},
          {n:4, desc:"Livrer les matériaux et les textures", crit:["Évaluation des matériaux et des textures en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Conformité du dépôt et de l'archivage du modèle texturé, de ses matériaux et de ses textures"]}
        ]},
      {code:"02LY", type:"obligatoire", enonce:"Produire les systèmes de contrôle", contexte:"Pour le contrôle des mouvements des composants d'une scène; Sous la supervision de la personne responsable; À partir des composants du projet et d'outils de contrôle; En se référant à la structure des modèles",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés aux surfaces","Analyse exhaustive des informations et des références","Analyse exhaustive de la structure du modèle et de ses accessoires","Choix judicieux de la stratégie de production"]},
          {n:2, desc:"Intégrer les outils de contrôle aux systèmes", crit:["Ajustement précis des points de pivot du modèle","Génération complète des outils de contrôle","Paramétrage rigoureux des outils de contrôle","Hiérarchisation des outils de contrôle en fonction de la structure des systèmes","Mise au point rigoureuse de l'ergonomie des systèmes"]},
          {n:3, desc:"Gérer les déformations du modèle", crit:["Association adéquate du modèle à des outils de contrôle","Ajustement rigoureux des déformations"]},
          {n:4, desc:"Livrer les systèmes de contrôle", crit:["Respect du protocole de test","Évaluation des systèmes de contrôle en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Conformité du dépôt et de l'archivage des systèmes de contrôle"]}
        ]},
      {code:"02LZ", type:"obligatoire", enonce:"Mettre en scène les composants du projet", contexte:"Pour l'ébauche de la mise en place des composants d'une scène 3D; Sous la supervision de la personne responsable; À partir des composants du projet; À l'aide de codes narratifs et de techniques de créativité",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés à la mise en scène","Analyse exhaustive des informations et des références","Choix judicieux de la stratégie de mise en scène"]},
          {n:2, desc:"Ébaucher la mise en scène", crit:["Organisation judicieuse de l'espace scénique","Établissement fonctionnel de l'éclairage initial","Mise en place soignée des composants","Gestion spatiale et temporelle adaptée des actions et des évènements","Mise en place soignée des caméras"]},
          {n:3, desc:"Confirmer la mise en scène", crit:["Évaluation de la mise en scène en fonction de la direction narrative et technique","Correctifs adaptés, s'il y a lieu"]},
          {n:4, desc:"Partager la mise en scène", crit:["Conformité du dépôt et de l'archivage de la mise en scène","Partage conforme de la mise en scène avec les autres services"]}
        ]},
      {code:"02M0", type:"obligatoire", enonce:"Générer les éclairages", contexte:"Pour la mise en place de l'éclairage d'une scène 3D; Sous la supervision de la personne responsable; À partir de la mise en scène; À l'aide de techniques de créativité et de techniques d'éclairage",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés à l'éclairage","Analyse exhaustive des informations et des références","Choix judicieux de la stratégie d'éclairage"]},
          {n:2, desc:"Éclairer le sujet", crit:["Mise en valeur correcte des volumes et des matériaux","Génération appropriée de l'effet de profondeur entre le sujet et l'arrière-plan"]},
          {n:3, desc:"Éclairer l'environnement", crit:["Mise en valeur correcte des éléments dans l'environnement","Génération appropriée de phénomènes physiques liés à la lumière","Représentation crédible du moment et des phénomènes"]},
          {n:4, desc:"Gérer les ombres", crit:["Positionnement judicieux des ombres","Génération cohérente de la pénombre","Contrôle minutieux de la densité","Ajustement approprié de la couleur"]},
          {n:5, desc:"Livrer les éclairages", crit:["Évaluation de l'éclairage en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Production soignée des rendus","Conformité du dépôt et de l'archivage des éclairages et des rendus"]}
        ]},
      {code:"02M1", type:"obligatoire", enonce:"Produire les effets visuels dynamiques", contexte:"Pour la production de simulations et d'effets de particules; Sous la supervision de la personne responsable; À partir de la mise en scène; En se référant aux propriétés de la matière et aux lois de la physique",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés aux effets","Analyse exhaustive des informations et des références","Détermination juste des propriétés des matériaux impliqués dans les effets","Choix judicieux de la stratégie de production"]},
          {n:2, desc:"Représenter les propriétés des composants", crit:["Imitation crédible des propriétés non caractéristiques de la matière","Simulation fidèle des propriétés physiques et chimiques des matériaux"]},
          {n:3, desc:"Contrôler les forces et les mouvements", crit:["Conformité de l'intensité et de la direction des forces avec les besoins","Détermination cohérente de la trajectoire et de la vitesse des mouvements"]},
          {n:4, desc:"Contrôler les collisions", crit:["Détection précise des collisions","Résultat logique des collisions"]},
          {n:5, desc:"Livrer les effets", crit:["Évaluation des effets en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Production soignée des rendus","Conformité du dépôt et de l'archivage des effets et des rendus"]}
        ]},
      {code:"02M2", type:"obligatoire", enonce:"Composer les images", contexte:"Pour l'assemblage d'images de synthèse; Sous la supervision de la personne responsable; À partir d'images de rendu et de leurs couches, de la mise en scène; À l'aide de techniques de composition",
        elements:[
          {n:1, desc:"Établir un plan de déploiement", crit:["Relevé complet des besoins et des contraintes liés à la composition","Analyse exhaustive des informations et des références","Choix judicieux de la stratégie de composition"]},
          {n:2, desc:"Assembler les images", crit:["Gestion efficace des images et des couches","Application conforme du mode de fusion","Gestion appropriée du canal alpha"]},
          {n:3, desc:"Intégrer les éléments additionnels", crit:["Ajout pertinent de composants du projet, de phénomènes atmosphériques et physiques, d'effets lumineux","Crédibilité des ajouts"]},
          {n:4, desc:"Ajuster les images", crit:["Paramétrage logique de l'intensité ou de l'opacité","Traitement soigné de la couleur","Utilisation judicieuse de masques","Harmonisation minutieuse des caractéristiques artistiques et techniques"]},
          {n:5, desc:"Reproduire les caractéristiques visuelles de la caméra", crit:["Contrôle soigné des types de flou, de la luminosité et de la saturation","Paramétrage fidèle des distorsions, des déformations et du bruit numérique","Crédibilité des échos et des éblouissements"]},
          {n:6, desc:"Livrer les images", crit:["Évaluation des images en fonction des standards établis","Correctifs adaptés, s'il y a lieu","Production soignée des rendus","Conformité du dépôt et de l'archivage des images et des rendus"]}
        ]},
      {code:"02M3", type:"obligatoire", enonce:"Participer à l'amélioration des processus de travail", contexte:"Dans tous les champs d'expertise; Pour l'amélioration de la productivité; Sous la supervision de la personne responsable; À l'aide de techniques d'édition de scripts",
        elements:[
          {n:1, desc:"Examiner ses performances", crit:["Analyse régulière de sa productivité","Établissement juste des besoins d'amélioration"]},
          {n:2, desc:"Réaliser des activités de veille", crit:["Relevé pertinent des innovations et des nouveautés liées au champ d'expertise ou à la tâche à accomplir","Identification juste des courants et des tendances de la profession"]},
          {n:3, desc:"Proposer l'intégration d'innovations", crit:["Expérimentation ciblée de scripts, de plugiciels, de logiciels ou d'autres innovations","Analyse détaillée des performances associées à chaque innovation","Identification juste des impacts des innovations sur sa production","Présentation détaillée des innovations retenues"]},
          {n:4, desc:"Perfectionner ses processus de travail", crit:["Fragmentation avisée du travail","Automatisation adaptée des opérations récurrentes","Restructuration efficace des opérations","Utilisation éclairée de scripts et de plugiciels"]}
        ]},
      // ── Compétences au choix ────────────────────────────────────────────────
      {code:"02M4", type:"choix", enonce:"Automatiser les opérations", contexte:"Dans tous les champs d'expertise; Pour l'automatisation des opérations récurrentes ou chronophages; Sous la supervision de la personne responsable; À l'aide d'un langage de programmation",
        elements:[
          {n:1, desc:"Proposer des solutions", crit:["Identification juste des besoins en matière d'automatisation","Analyse approfondie des besoins et des contraintes","Pertinence des solutions"]},
          {n:2, desc:"Structurer l'algorithme", crit:["Élaboration détaillée du plan","Détermination juste des constantes et des variables"]},
          {n:3, desc:"Coder l'algorithme", crit:["Définition juste des constantes et des variables","Codage précis des instructions","Mise en place soignée des conditions et des boucles d'exécution","Débogage complet"]},
          {n:4, desc:"Créer une interface utilisateur", crit:["Choix approprié des éléments graphiques pour l'affichage et la saisie","Ergonomie appropriée des éléments graphiques","Paramétrage correct des éléments graphiques","Débogage complet"]},
          {n:5, desc:"Peaufiner l'algorithme", crit:["Ajout judicieux d'annotations","Enrichissement signifiant de la solution"]},
          {n:6, desc:"Contribuer au déploiement de la solution", crit:["Préparation méthodique en vue du déploiement de la solution","Soutien technique approprié"]}
        ]},
      {code:"02M5", type:"choix", enonce:"Élaborer les modèles environnementaux", contexte:"Pour la création de tous les types de modèles environnementaux; Sous la supervision de la personne responsable; À partir de la mise en scène",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Détailler le terrain", crit:["Ajout cohérent d'éléments géologiques","Représentation juste du phénomène d'érosion","Transition logique entre les zones du terrain"]},
          {n:3, desc:"Générer les ouvrages architecturaux", crit:["Représentation fidèle des caractéristiques architecturales","Structure cohérente des éléments architecturaux","Respect des proportions"]},
          {n:4, desc:"Générer les végétaux", crit:["Représentation fidèle des éléments morphologiques","Structure cohérente des composants","Respect des proportions"]},
          {n:5, desc:"Peaufiner les modèles", crit:["Ajout judicieux de détails et d'informations","Mise au point soignée de l'apparence et de la topologie"]}
        ]},
      {code:"02M6", type:"choix", enonce:"Élaborer les modèles de créatures", contexte:"Pour la création de créatures réelles ou fantaisistes; Sous la supervision de la personne responsable",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Générer le modèle morphologique", crit:["Représentation fidèle des caractéristiques de la créature","Structure cohérente des membres et des organes externes","Respect des proportions"]},
          {n:3, desc:"Générer le modèle anatomique", crit:["Représentation fidèle du système musculosquelettique","Structure cohérente des tissus organiques","Respect des proportions"]},
          {n:4, desc:"Peaufiner les modèles", crit:["Ajout judicieux de détails et d'accessoires","Mise au point soignée de l'apparence et de la topologie"]}
        ]},
      {code:"02M7", type:"choix", enonce:"Élaborer les modèles de personnages", contexte:"Pour la création de personnages réalistes ou fantaisistes; Sous la supervision de la personne responsable; À partir de banques de modèles et d'images numériques",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Structurer les modèles", crit:["Structure des modèles en fonction des besoins","Respect de la morphologie des personnages"]},
          {n:3, desc:"Préciser l'apparence des modèles", crit:["Ajustement rigoureux des volumes","Représentation fidèle des caractéristiques des sujets"]},
          {n:4, desc:"Peaufiner les personnages", crit:["Ajout judicieux de détails et d'accessoires","Mise en place soignée d'une topologie déformable","Préparation adaptée pour la production des systèmes de contrôle"]}
        ]},
      {code:"02M8", type:"choix", enonce:"Reconstituer les modèles", contexte:"Pour la reproduction de tous les types de modèles; Sous la supervision de la personne responsable; À partir de données de numérisation et de photogrammétrie, d'images et de vidéos",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Numériser les images et les points de repère", crit:["Localisation optimale des points de repère sur les images","Continuité de l'ancrage","Vérification rigoureuse des données"]},
          {n:3, desc:"Récréer les volumes", crit:["Nettoyage minutieux des données","Transcodage minutieux du nuage de points en surfaces","Correction complète des imperfections du transcodage"]},
          {n:4, desc:"Peaufiner les modèles", crit:["Mise au point soignée de l'apparence et de la topologie","Projection optimale des images sur les surfaces"]}
        ]},
      {code:"02M9", type:"choix", enonce:"Aménager l'espace scénique", contexte:"Pour la mise en place des éléments finaux et la finalisation des espaces naturel, rural, urbain et intérieur; Sous la supervision de la personne responsable; À partir de la mise en scène et de banques de modèles, de textures, d'animations et d'images numériques",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Mettre en place l'espace naturel", crit:["Production conforme du terrain et de la voûte céleste","Positionnement cohérent des réservoirs naturels et des cours d'eau","Ajout soigné de l'arrière-plan"]},
          {n:3, desc:"Mettre en place les espaces rural et urbain", crit:["Positionnement cohérent des ouvrages architecturaux","Établissement éclairé des voies de circulation","Respect des dimensions et des proportions"]},
          {n:4, desc:"Peupler l'espace", crit:["Cohérence des espèces","Distribution des individus selon l'espace","Diversification appropriée des stades de vie"]},
          {n:5, desc:"Meubler l'espace", crit:["Cohérence du mobilier et des accessoires","Distribution du mobilier et des accessoires selon l'espace","Diversification appropriée"]},
          {n:6, desc:"Peaufiner l'aménagement", crit:["Ajout judicieux de points de repère et d'éléments narratifs","Représentation éclairée du passage du temps"]}
        ]},
      {code:"02MA", type:"choix", enonce:"Scénographier l'action", contexte:"Pour la mise en place du déroulement des évènements; Sous la supervision de la personne responsable; À partir de la mise en scène et de banques de modèles, de textures, d'animations et d'images numériques",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Élaborer la chaîne des évènements", crit:["Découpage précis des composants de l'action","Choix pertinent des éléments de l'environnement ayant un impact sur l'action","Établissement juste de la chronologie"]},
          {n:3, desc:"Localiser les composants de l'action", crit:["Positionnement spatial et temporel approprié"]},
          {n:4, desc:"Mettre au point les mouvements", crit:["Établissement juste des parcours","Ajustement cohérent de la vitesse"]},
          {n:5, desc:"Contrôler la chaîne des évènements", crit:["Interaction logique entre les évènements","Ajustement précis du minutage"]},
          {n:6, desc:"Peaufiner la scénographie", crit:["Ajout judicieux de détails et d'éléments","Harmonisation soignée des composants de l'action"]}
        ]},
      {code:"02MB", type:"choix", enonce:"Parfaire la communication visuelle", contexte:"Pour l'amélioration de la transmission d'information et de la compréhensibilité de la narration; Sous la supervision de la personne responsable; À partir de la mise en scène et de banques de modèles, de textures, d'animations et d'images numériques",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Ajuster l'ambiance", crit:["Représentation fidèle de la psychologie des personnages et de l'atmosphère"]},
          {n:3, desc:"Assurer le repérage spatiotemporel", crit:["Détermination éclairée des indicateurs et des repères visuels","Mise en place soignée"]},
          {n:4, desc:"Diriger le regard", crit:["Détermination éclairée des techniques d'attraction du regard","Adaptation juste des techniques"]},
          {n:5, desc:"Assurer le raccord entre les plans", crit:["Mise en place soignée des raccords"]},
          {n:6, desc:"Peaufiner la communication visuelle", crit:["Ajout judicieux de détails et d'éléments","Élimination complète des nuisances communicationnelles"]}
        ]},
      {code:"02MC", type:"choix", enonce:"Élaborer les matériaux et les textures", contexte:"Pour la création de tous les types de surfaces stylisées ou photoréalistes; Sous la supervision de la personne responsable; À partir des modèles liés au projet et d'images numériques",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Créer le matériau", crit:["Établissement juste de l'arborescence","Établissement juste de la réaction des surfaces à la lumière"]},
          {n:3, desc:"Détailler les textures", crit:["Détermination judicieuse de la palette de couleurs","Ajustement logique des mappes","Cohérence du paramétrage"]},
          {n:4, desc:"Peaufiner l'apparence des surfaces", crit:["Ajout de particularités visuelles en fonction des besoins narratifs","Mise au point soignée de l'apparence des surfaces"]}
        ]},
      {code:"02MD", type:"choix", enonce:"Agencer l'apparence des surfaces", contexte:"Pour l'harmonisation et la normalisation des matériaux et des textures stylisés ou photoréalistes à l'intérieur d'une séquence d'images ou d'une scène; Sous la supervision de la personne responsable; À l'aide d'un studio virtuel d'éclairage, d'un moteur de rendu ou d'un engin de jeu",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Évaluer l'apparence des surfaces", crit:["Analyse exhaustive de la réaction des surfaces à la lumière","Critique judicieuse de l'esthétique"]},
          {n:3, desc:"Imiter les comportements physiques de la lumière sur les surfaces", crit:["Reproduction optimale des caractéristiques visuelles des matériaux","Positionnement logique des textures","Standardisation complète"]},
          {n:4, desc:"Harmoniser l'apparence des surfaces", crit:["Ajustement précis des paramètres"]}
        ]},
      {code:"02ME", type:"choix", enonce:"Perfectionner les systèmes de contrôle", contexte:"Pour l'amélioration et l'optimisation des systèmes de contrôle; Sous la supervision de la personne responsable; À partir de modèles et de leurs systèmes de contrôle",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Étudier les systèmes de contrôle", crit:["Tests exhaustifs des outils de contrôle","Rétro-ingénierie complète des systèmes de contrôle"]},
          {n:3, desc:"Assurer les transformations des modèles", crit:["Métamorphose optimale des modèles","Contrôle soigné des déformations"]},
          {n:4, desc:"Raffiner les outils de contrôle", crit:["Ajout judicieux de commutateurs, de points de pivot et de panneaux de contrôle","Paramétrage optimal des limites de manipulation","Ajustement optimal de la courbe d'effet"]},
          {n:5, desc:"Assurer l'utilisabilité des systèmes de contrôle", crit:["Tests exhaustifs des systèmes de contrôle","Correctifs adaptés, s'il y a lieu"]}
        ]},
      {code:"02MF", type:"choix", enonce:"Effectuer la capture de mouvements et l'assignation de données", contexte:"Pour la capture de mouvements réels ainsi que le traitement et l'assignation de données à un système de contrôle; Sous la supervision de la personne responsable; À l'aide d'équipement audiovisuel, d'actrices et d'acteurs; À partir de systèmes de contrôle et de banques de modèles",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Préparer la séance de capture", crit:["Installation minutieuse de l'équipement","Direction rigoureuse des actrices et des acteurs pour la calibration de l'équipement","Calibration précise de l'équipement","Mise en place soignée du squelette de capture"]},
          {n:3, desc:"Assurer la validité des données", crit:["Capture optimale des images, s'il y a lieu","Enregistrement méthodique des données relatives à chaque mouvement","Vérification rigoureuse des données enregistrées"]},
          {n:4, desc:"Assigner les données", crit:["Gestion méthodique","Nettoyage soigné","Transcodage précis","Ajustement optimal des données aux systèmes de contrôle"]},
          {n:5, desc:"Produire des clips d'animation", crit:["Conformité du dépôt et de l'archivage des clips"]}
        ]},
      {code:"02MG", type:"choix", enonce:"Animer un personnage", contexte:"Pour la représentation des réactions, des émotions et des caractéristiques psychologiques d'un personnage; Sous la supervision de la personne responsable; À partir de la mise en scène, de modèles et de systèmes de contrôle; À l'aide d'une bande sonore",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Représenter les expressions corporelles et faciales", crit:["Justesse de la gestuelle","Compréhensibilité des traits psychologiques et des émotions"]},
          {n:3, desc:"Assurer la synchronisation labiale", crit:["Justesse des mouvements de la mâchoire et des visèmes","Synchronisation constante avec la bande sonore"]},
          {n:4, desc:"Peaufiner l'animation", crit:["Ajout judicieux de détails et d'informations","Mise au point soignée des poses et des interpolations de mouvements"]}
        ]},
      {code:"02MH", type:"choix", enonce:"Recréer l'ingénierie des mouvements", contexte:"Pour la reproduction des mouvements d'objets, de mécanismes ou d'organismes vivants; Sous la supervision de la personne responsable; En se référant aux lois de la physique",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Analyser les mouvements", crit:["Identification précise des contraintes mécaniques","Détermination juste des caractéristiques de chaque mouvement"]},
          {n:3, desc:"Reproduire les mouvements", crit:["Fidélité de la reproduction des mouvements mécaniques","Respect des lois de la physique","Crédibilité du résultat"]},
          {n:4, desc:"Peaufiner les mouvements", crit:["Ajout judicieux de détails","Mise au point soignée"]}
        ]},
      {code:"02MJ", type:"choix", enonce:"Élaborer les séquences d'animation", contexte:"Pour la conception et la production de séquences d'animation complexes; Sous la supervision de la personne responsable; À partir de la mise en scène et des éléments du projet",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Orchestrer les séquences d'animation", crit:["Cohérence de l'enchaînement des séquences","Respect de la direction artistique et narrative"]},
          {n:3, desc:"Synchroniser les éléments de la séquence", crit:["Synchronisation précise de tous les éléments animés","Cohérence spatiale et temporelle"]},
          {n:4, desc:"Peaufiner les séquences", crit:["Ajout judicieux de détails","Mise au point soignée de l'ensemble de la séquence"]}
        ]},
      {code:"02MK", type:"choix", enonce:"Reconstituer les formes et les mouvements", contexte:"Pour la reconstruction de formes et de mouvements à partir de données de référence réelles; Sous la supervision de la personne responsable; À partir de données de captation ou de sources de référence",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Analyser les données de référence", crit:["Examen minutieux des données","Identification des caractéristiques à reproduire"]},
          {n:3, desc:"Reproduire les formes et les mouvements", crit:["Fidélité de la reconstitution","Respect des proportions et des dynamiques"]},
          {n:4, desc:"Peaufiner la reconstitution", crit:["Correction des imperfections","Mise au point soignée"]}
        ]},
      {code:"02ML", type:"choix", enonce:"Créer l'habillage des modèles", contexte:"Pour la création des vêtements, des armures et des accessoires portés par les personnages et les créatures; Sous la supervision de la personne responsable",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Modéliser l'habillage", crit:["Représentation fidèle des caractéristiques vestimentaires","Structure cohérente des éléments","Respect des proportions"]},
          {n:3, desc:"Simuler le comportement de l'habillage", crit:["Simulation réaliste du comportement des tissus","Cohérence des interactions avec le modèle"]},
          {n:4, desc:"Peaufiner l'habillage", crit:["Ajout judicieux de détails","Mise au point soignée de l'apparence"]}
        ]},
      {code:"02MM", type:"choix", enonce:"Simuler les effets de fluides", contexte:"Pour la simulation de liquides, de gaz et d'autres substances fluides; Sous la supervision de la personne responsable; En se référant aux lois de la physique",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Paramétrer la simulation de fluides", crit:["Définition juste des propriétés physiques des fluides","Paramétrage cohérent des interactions avec l'environnement"]},
          {n:3, desc:"Exécuter la simulation", crit:["Résultat conforme aux besoins et aux lois de la physique","Optimisation des temps de calcul"]},
          {n:4, desc:"Peaufiner les effets de fluides", crit:["Ajustements fins des paramètres","Résultat artistiquement convaincant"]}
        ]},
      {code:"02MN", type:"choix", enonce:"Simuler les effets de foule", contexte:"Pour la simulation de groupes d'individus ou d'entités animées; Sous la supervision de la personne responsable",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Définir les comportements de la foule", crit:["Définition juste des comportements individuels et collectifs","Paramétrage cohérent des interactions"]},
          {n:3, desc:"Optimiser la simulation", crit:["Optimisation des performances de rendu","Cohérence visuelle de la foule"]},
          {n:4, desc:"Peaufiner les effets de foule", crit:["Diversification appropriée des individus","Résultat artistiquement convaincant"]}
        ]},
      {code:"02MP", type:"choix", enonce:"Créer les éclairages scéniques et narratifs", contexte:"Pour la création d'éclairages complexes qui contribuent à la narration et à l'ambiance d'une scène; Sous la supervision de la personne responsable; À partir de la mise en scène",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Concevoir l'éclairage scénique", crit:["Cohérence de l'éclairage avec la direction artistique","Contribution de l'éclairage à la narration"]},
          {n:3, desc:"Mettre en place les effets lumineux", crit:["Mise en place soignée des effets lumineux spéciaux","Cohérence des effets avec l'ensemble de la scène"]},
          {n:4, desc:"Peaufiner l'éclairage", crit:["Ajustements fins pour l'optimisation du rendu final","Résultat artistiquement convaincant"]}
        ]},
      {code:"02MQ", type:"choix", enonce:"Reconstituer les éclairages", contexte:"Pour la reproduction d'éclairages réels à partir de données de référence; Sous la supervision de la personne responsable",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Analyser les éclairages de référence", crit:["Identification précise des caractéristiques lumineuses","Analyse des sources et des ombres"]},
          {n:3, desc:"Reproduire les éclairages", crit:["Fidélité de la reproduction des caractéristiques lumineuses","Cohérence avec l'environnement de la scène"]},
          {n:4, desc:"Peaufiner les éclairages reconstitués", crit:["Intégration harmonieuse avec les autres éléments de la scène","Résultat artistiquement convaincant"]}
        ]},
      {code:"02MR", type:"choix", enonce:"Composer les images stéréoscopiques", contexte:"Pour la composition d'images pour la stéréoscopie et la réalité virtuelle; Sous la supervision de la personne responsable; À partir d'images de rendu stéréoscopiques",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Préparer les images stéréoscopiques", crit:["Gestion appropriée des images droite et gauche","Respect des paramètres stéréoscopiques"]},
          {n:3, desc:"Composer les images stéréoscopiques", crit:["Application soignée des techniques de composition stéréoscopique","Cohérence de la profondeur stéréoscopique"]},
          {n:4, desc:"Vérifier et livrer les images", crit:["Vérification rigoureuse de l'effet stéréoscopique","Conformité du dépôt et de l'archivage"]}
        ]},
      {code:"02MS", type:"choix", enonce:"Incruster un sujet dans une séquence d'images", contexte:"Pour l'intégration d'un sujet filmé en incrustation dans une séquence d'images de synthèse; Sous la supervision de la personne responsable; À partir d'images filmées et de séquences de synthèse",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Préparer les images filmées", crit:["Extraction précise du sujet par chroma key ou rotoscopie","Nettoyage soigné des contours"]},
          {n:3, desc:"Intégrer le sujet dans la scène de synthèse", crit:["Cohérence de l'éclairage entre le sujet et l'environnement de synthèse","Crédibilité de l'intégration"]},
          {n:4, desc:"Peaufiner l'incrustation", crit:["Élimination de tous les artefacts visuels","Résultat artistiquement convaincant"]}
        ]},
      {code:"02MT", type:"choix", enonce:"Élaborer les décors", contexte:"Pour la conception et la production de décors numériques complets; Sous la supervision de la personne responsable; À partir de la mise en scène et des documents de production",
        elements:[
          {n:1, desc:"Mettre en œuvre le plan de déploiement", crit:["Confirmation claire de l'intention de production","Établissement juste de la structure des opérations","Suivi adéquat de l'avancement des opérations"]},
          {n:2, desc:"Concevoir la structure du décor", crit:["Cohérence architecturale et environnementale","Respect de la direction artistique"]},
          {n:3, desc:"Assembler les éléments du décor", crit:["Intégration harmonieuse de tous les éléments","Cohérence de l'ensemble du décor"]},
          {n:4, desc:"Peaufiner les décors", crit:["Ajout judicieux de détails narratifs et esthétiques","Mise au point soignée de l'ensemble"]}
        ]}
    ]
  },

  // ─── 570.G0 ──────────────────────────────────────────────────────────────
  {
    code: "570.G0",
    titre: "Graphisme",
    titre_en: "Graphic Design",
    secteur: "13 – Communications et documentation",
    annee: 2013,
    unites: "91 \u2154",
    heures: 2640,
    source_url: "https://cdn-contenu.quebec.ca/cdn-contenu/adm/min/education/publications-adm/cegeps/services-administratifs/Programmes-etudes-techniques/PE13-570G0-Graphic-Design.pdf",
    competences: [
      {code:"052V", type:"obligatoire", enonce:"Analyser des produits et des exigences de production en communication graphique", enonce_en:"Analyze forms of visual communication and their production requirements", contexte:"À l’aide de documents de référence.", contexte_en:"Given reference materials",
        elements:[
          {n:1, desc:"Cerner des caractéristiques de produits de communication graphique", desc_en:"Identify the characteristics of forms of visual communication", crit:["Description juste de la fonction et de la signification des pictogrammes, des icônes et des identités visuelles","Description juste de la fonction des documents corporatifs, d’édition, de packaging, de design cinétique et de campagnes de publicité","Repérage complet des publics cibles, des objectifs et des axes de communication","Utilisation appropriée des principes de la communication visuelle, des trajectoires de lecture et de la psychologie des couleurs"], crit_en:["Accurate description of the function and meaning of pictograms, icons and visual identities","Accurate description of the function of corporate, published, packaging, kinetic design and advertising materials","Identification of all target audiences, objectives and communication routes","Appropriate use of the principles of visual communication, reading sequences and the psychology of colours"]},
          {n:2, desc:"Préciser des exigences de conception de produits de communication graphique", desc_en:"Specify the design requirements for forms of visual communication", crit:["Description juste des exigences visuelles et techniques liées aux types d’images et aux éléments graphiques","Description juste des exigences visuelles et techniques liées aux étapes d’élaboration du concept, de design, de la fabrication de la maquette et de la campagne spéculative","Description juste des exigences visuelles et techniques liées aux types de gabarits et de mises en pages"], crit_en:["Accurate description of the visual and technical requirements of the different types of images and graphic elements","Accurate description of the visual and technical requirements associated with the concept development, design, prototype and campaign proposal stages"]},
          {n:3, desc:"Préciser des exigences liées à l’impression de produits de communication graphique", desc_en:"Specify the requirements for printed forms of visual communication", crit:["Description juste des exigences de production ou d’utilisation des épreuves, des plaques, des encres, des vernis et des supports d’impression","Description juste des exigences visuelles et techniques liées aux étapes de préparation de documents pour des impressions numériques, offset et flexographiques","Description juste des exigences visuelles et techniques liées aux procédés de finition"], crit_en:["Accurate description of the visual and technical requirements of the different types of templates and layouts","Accurate description of the requirements for producing or using proofs, plates, inks, varnishes and substrates","Accurate description of the visual and technical requirements for preparing documents for digital, offset and flexographic printing","Accurate description of the visual and technical requirements associated with finishing processes"]}
        ]},
      {code:"052W", type:"obligatoire", enonce:"Gérer un environnement informatique", enonce_en:"Manage a computer environment", contexte:"Pour des environnements informatiques utilisant des systèmes d’exploitation variés. À l’aide de logiciels, de périphériques et de tutoriels.", contexte_en:"For a variety of operating systems; Using software, peripherals and tutorials",
        elements:[
          {n:1, desc:"Installer des périphériques à un poste informatique", desc_en:"Install computer peripherals", crit:["Distinction juste des composants matériels d’un poste informatique","Consultation appropriée du guide d’utilisation","Respect des instructions de branchement des périphériques","Reconnaissance des risques pour la santé et la sécurité liés à l’utilisation d’un poste informatique"], crit_en:["Accurate distinction between the different pieces of hardware","Appropriate consultation of the user guide","Compliance with instructions for connecting peripherals"]},
          {n:2, desc:"S’assurer de la disposition ergonomique de l’environnement de travail", desc_en:"Make sure the workstation is set up ergonomically", crit:["Pertinence des mesures préventives","Consultation appropriée des tutoriels","Respect de la procédure d’installation ou de mise à jour","Vérification appropriée de l’installation"], crit_en:["Recognition of the health and safety risks associated with computer stations","Appropriate use of preventive measures"]},
          {n:3, desc:"Installer et mettre à jour des logiciels", desc_en:"Install and update software", crit:["Réglage correct des préférences","Utilisation appropriée du système d’exploitation","Organisation correcte de l’arborescence des répertoires","Justesse de l’attribution des droits d’accès aux répertoires"], crit_en:["Appropriate consultation of tutorials","Observance of procedure for installing and updating software","Appropriate verification of installation","Correct setting of preferences","Appropriate use of operating system"]},
          {n:4, desc:"Créer des répertoires locaux et en réseau", desc_en:"Create local and network folders", crit:["Respect des règles de dénomination des répertoires","Respect des règles de classement","Choix approprié du support de sauvegarde","Justesse de l’attribution des droits d’accès aux fichiers"], crit_en:["Proper organization of folder hierarchy","Accurate assignment of access rights to folders","Observance of rules for naming folders","Observance of archiving protocol"]},
          {n:5, desc:"Sauvegarder des fichiers", desc_en:"Save files", crit:["Respect des règles de dénomination des fichiers","Respect des règles de classement","Choix approprié du format des fichiers"], crit_en:["Appropriate choice of storage medium","Accurate assignment of access rights to files","Observance of rules for naming files","Observance of archiving protocol"]},
          {n:6, desc:"Échanger et classer des fichiers", desc_en:"Exchange and classify files", crit:["Choix et utilisation appropriés d’un protocole de communication","Utilisation appropriée de logiciels de navigation","Respect des règles de classement"], crit_en:["Appropriate choice of file format","Appropriate choice and use of a communication protocol","Appropriate use of browsers","Observance of archiving protocol"]}
        ]},
      {code:"052X", type:"obligatoire", enonce:"Acquérir des images", enonce_en:"Acquire images", contexte:"À partir d’une demande. À l’aide de banques d’images. À l’aide de numériseurs. À l’aide d’appareils photographiques et de ses accessoires, tels : objectifs, sources d’éclairage, table photographique et arrière-plans, etc. À l’aide de logiciels de navigation, d’acquisition et d’archivage. À l’aide d’un poste informatique spécialisé.", contexte_en:"Given a mandate; Using image banks; Using scanners; Using cameras and accessories: lenses, light sources, a photographic table and backgrounds; Using software for navigation, acquisition and archiving; Using a specialized computer station",
        elements:[
          {n:1, desc:"Analyser la demande", desc_en:"Analyze the mandate", crit:["Reconnaissance du sujet ou du thème de la demande","Détermination correcte des caractéristiques techniques et esthétiques des images à acquérir","Détermination correcte de la méthode d’acquisition à utiliser","Choix et utilisation appropriés de sources de référence","Choix judicieux des mots-clés","Utilisation efficace des moteurs de recherche"], crit_en:["Identification of the topic or theme of the mandate","Proper determination of the technical and aesthetic characteristics of the images to acquire","Correct determination of acquisition method"]},
          {n:2, desc:"Rechercher des éléments visuels", desc_en:"Search for visual elements", crit:["Pertinence des résultats de la recherche","Respect des règles relatives à la confidentialité de l’information, aux autorisations et aux cessions de droits","Conversion exacte des unités de mesure","Distinction juste des caractéristiques techniques de l’original","Choix approprié du type de numérisation à effectuer","Positionnement précis de l’original"], crit_en:["Appropriate choice and use of reference sources","Appropriate choice of keywords","Effective use of search engines","Relevance of search results","Observance of rules governing confidentiality of information, permissions and copyright assignment"]},
          {n:3, desc:"Numériser des éléments visuels", desc_en:"Scan visual elements", crit:["Réglage correct du mode couleur, de la résolution et du contraste","Réglage correct des options de détramage","Détermination correcte de l’échelle","Utilisation appropriée du logiciel","Respect des règles relatives à la confidentialité de l’information, aux autorisations et aux cessions de droits"], crit_en:["Accurate conversion of units of measure","Accurate distinction of the technical characteristics of the original element","Appropriate choice of type of scanning","Precise positioning of original","Correct setting of colour mode, resolution and contrast","Correct setting of descreening options","Correct determination of scale","Appropriate use of software","Observance of rules governing confidentiality of information, permissions and copyright assignment"]}
        ]},
      {code:"052Y", type:"obligatoire", enonce:"Réaliser des images matricielles", enonce_en:"Create raster images", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’images numériques et à main levée. À l’aide d’un logiciel de dessin et de modèles. À l’aide de tablettes graphiques. À l’aide de normes d’impression et de diffusion électronique.", contexte_en:"For print documents and visual interfaces; Given digital and hand-drawn images; Using drawing and modelling software; Using graphics tablets; Given printing and electronic distribution standards",
        elements:[
          {n:1, desc:"Régler le fonctionnement du logiciel", desc_en:"Set software functions", crit:["Détermination correcte des valeurs des paramètres du logiciel","Personnalisation correcte de l’interface graphique","Performance du logiciel adaptée à la tâche à exécuter et aux normes d’impression ou de diffusion électronique","Détermination correcte des dimensions","Choix approprié du mode couleur","Choix approprié du profil colorimétrique","Choix approprié de la résolution"], crit_en:["Proper determination of software settings","Proper customizing of the graphic interface","Software performance adapted to the task and to the printing or electronic distribution standards"]},
          {n:2, desc:"Définir les propriétés du document", desc_en:"Define the document's properties", crit:["Respect des normes d’impression ou de diffusion électronique","Utilisation appropriée d’un modèle","Détermination correcte de l’échelle","Choix harmonieux des couleurs","Choix approprié du style graphique","Choix et utilisation appropriés des outils du logiciel"], crit_en:["Correct determination of dimensions","Appropriate choice of colour mode","Appropriate choice of colour profile","Appropriate setting of resolution","Observance of printing or electronic distribution standards"]},
          {n:3, desc:"Dessiner des formes et des motifs", desc_en:"Draw shapes and patterns", crit:["Création correcte des calques","Utilisation et adaptation appropriées des bibliothèques du logiciel","Utilisation appropriée du logiciel","Précision du dessin","Respect des règles de composition","Manifestation de créativité"], crit_en:["Appropriate use of a model","Correct determination of scale","Choice of harmonious colours","Appropriate choice of graphic style","Appropriate choice and use of software tools","Proper creation of layers","Appropriate use and adaptation of software library","Appropriate use of software","Accuracy of the drawing","Observance of rules of composition","Demonstration of creativity"]}
        ]},
      {code:"052Z", type:"obligatoire", enonce:"Réaliser des images vectorielles", enonce_en:"Create vector images", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’images numériques et à main levée. À l’aide d’un logiciel de dessin et de modèles. À l’aide de tablettes graphiques. À l’aide de normes d’impression et de diffusion électronique.", contexte_en:"For print documents and visual interfaces; Using vector drawing software; Given printing and electronic distribution standards",
        elements:[
          {n:1, desc:"Régler le fonctionnement du logiciel", desc_en:"Set software functions and define document properties", crit:["Détermination correcte des valeurs des paramètres du logiciel","Personnalisation correcte de l’interface graphique","Performance du logiciel adaptée à la tâche à exécuter et aux normes d’impression ou de diffusion électronique","Détermination correcte des dimensions","Choix approprié du mode couleur","Choix approprié du profil colorimétrique","Pertinence du réglage de la résolution"], crit_en:["Proper determination of software settings","Correct determination of dimensions","Appropriate choice of colour mode","Observance of printing or electronic distribution standards"]},
          {n:2, desc:"Définir les propriétés du document", desc_en:"Create shapes and patterns", crit:["Respect des normes d’impression ou de diffusion électronique","Utilisation appropriée d’un modèle","Détermination correcte de l’échelle","Choix harmonieux des couleurs","Choix approprié du style graphique","Choix et utilisation appropriés des outils du logiciel"], crit_en:["Appropriate use of a model","Appropriate choice and use of software tools","Accuracy of the drawing","Choice of harmonious colours","Demonstration of creativity","Observance of rules of composition"]},
          {n:3, desc:"Tracer des éléments typographiques, des formes et des motifs", desc_en:"Optimize and archive the file", crit:["Création correcte des calques","Utilisation et adaptation appropriées des bibliothèques du logiciel","Utilisation appropriée du logiciel","Précision du tracé","Respect des règles de composition","Manifestation de créativité"], crit_en:["Absence of unnecessary elements","Appropriate choice of file format","Proper saving of file"]}
        ]},
      {code:"0534", type:"obligatoire", enonce:"Traiter des éléments typographiques", enonce_en:"Manipulate typographic elements", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’un texte brut provenant de sources multiples. À l’aide d’un code typographique et de documents de référence. À l’aide de logiciels utilitaires et de mise en pages.", contexte_en:"Using typographic, layout and image software; Given a mandate; Given typography standards",
        elements:[
          {n:1, desc:"Acquérir du texte", desc_en:"Analyze typographic elements", crit:["Choix approprié de l’encodage des caractères","Importation ou numérisation correctes des textes","Saisie correcte des textes manquants","Utilisation appropriée des logiciels","Respect des contraintes des jeux de polices"], crit_en:["Accurate identification of typographic families and classifications","Accurate distinction of typographic terminology","Recognition of the expressive qualities of typefaces"]},
          {n:2, desc:"Nettoyer le texte", desc_en:"Use typographic elements", crit:["Repérage correct et complet des éléments à nettoyer","Choix et utilisation appropriés d’une méthode de nettoyage","Utilisation appropriée du logiciel","Repérage correct et complet des éléments à modifier","Utilisation appropriée du logiciel"], crit_en:["Appropriate choice of typefaces","Proper application of typographic rules","Appropriate use of software typographic tools","Demonstration of typographic sensitivity"]},
          {n:3, desc:"Modifier des jeux de polices", desc_en:"Assess the quality of typographic composition", crit:["Utilisation appropriée de documents de référence","Respect des contraintes des jeux de polices","Respect du design de la police","Repérage correct et complet des erreurs typographiques"], crit_en:["Critical and constructive assessment","Compliance with typographic rules","Identification of ways to improve the typographic composition"]},
          {n:4, desc:"Appliquer les règles typographiques au texte", desc_en:"Appliquer les règles typographiques au texte", crit:["Utilisation appropriée d’un logiciel ou d’une méthode de travail manuelle","Utilisation appropriée de documents de référence","Justesse des exceptions","Respect du code typographique"], crit_en:[]}
        ]},
      {code:"0536", type:"obligatoire", enonce:"Effectuer des mises en pages simples pour des interfaces visuelles", enonce_en:"Produce simple layouts for visual interfaces", contexte:"Pour des interfaces Web, des documents de présentatique, des cellulaires, des baladeurs, des livres électroniques, etc. À partir d’une maquette de présentation, de l’information relative à l’architecture de l’information et du cahier des charges. À partir de textes et d’éléments visuels. À l’aide de chartes de couleurs. À l’aide de bibliothèques de polices. À l’aide de logiciels utilitaires, de mise en pages, et d’applications. À l’aide de règles d’ergonomie À l’aide du média de destination.", contexte_en:"Given a mandate; Using layout and image software; Given electronic distribution standards; Given principles of visual interface ergonomics",
        elements:[
          {n:1, desc:"Analyser le projet", desc_en:"Analyze the mandate and define the structure", crit:["Relevé des besoins et des exigences de la cliente ou du client","Analyse juste des textes et des éléments visuels","Analyse juste du concept et du public cible","Analyse juste du design graphique de la maquette de présentation","Analyse juste des exigences techniques de diffusion électronique","Description juste de l’aspect du document final"], crit_en:["Accurate analysis of the specifications","Definition of information architecture","Identification of user experience requirements"]},
          {n:2, desc:"Construire le document de mise en pages", desc_en:"Produce layouts for visual interfaces", crit:["Fabrication correcte du dossier racine","Élaboration correcte des grilles de mise en pages","Organisation correcte des conteneurs de textes et d’images","Utilisation appropriée de bibliothèques de polices et de chartes de couleurs","Utilisation appropriée des feuilles de style","Utilisation appropriée du logiciel"], crit_en:["Application of principles of visual interface ergonomics","Compliance with electronic distribution standards","Demonstration of creativity","Coherent organization of content"]},
          {n:3, desc:"Préparer les textes", desc_en:"Assess the quality of the layout", crit:["Respect de la maquette de présentation","Respect de l’architecture de l’information","Respect des règles d’ergonomie","Traitement correct des éléments typographiques","Utilisation judicieuse des outils de révision de textes en français","Respect des responsabilités confiées aux réviseures ou réviseurs linguistiques"], crit_en:["Critical and constructive assessment","Compliance with ergonomic principles","Compliance with the mandate"]}
        ]},
      {code:"0539", type:"obligatoire", enonce:"Coordonner la réalisation d’un projet en communication graphique", enonce_en:"Coordinate a graphic communications project", contexte:"À partir du cahier des charges. En équipe. En collaboration avec des fournisseurs. À l’aide de la documentation nécessaire.", contexte_en:"Working with a team; Given the client's brief; Using project management tools; For different types of projects: print, digital, advertising",
        elements:[
          {n:1, desc:"Analyser le cahier des charges", desc_en:"Analyze the client's brief", crit:["Collecte complète de l’information","Organisation méthodique de l’information","Description juste des exigences de réalisation du projet de communication graphique","Consultation appropriée de personnes- ressources","Détermination correcte des priorités"], crit_en:["Accurate analysis of requirements","Identification of project constraints (budget, deadline, technical requirements)","Identification of the stakeholders involved"]},
          {n:2, desc:"Planifier les travaux", desc_en:"Plan the project", crit:["Description précise de la séquence des activités de production","Prise en considération des imprévus et des problèmes de faisabilité","Consultation appropriée de personnes- ressources","Réalisme du calendrier","Répartition adéquate des tâches"], crit_en:["Appropriate breakdown of tasks","Realistic scheduling","Appropriate allocation of resources","Clear identification of responsibilities"]},
          {n:3, desc:"Établir un calendrier", desc_en:"Coordinate project activities", crit:["Utilisation appropriée du logiciel","Respect du budget","Explication claire des objectifs des travaux","Application correcte de techniques de motivation des membres de l’équipe de production","Consignes claires aux fournisseurs"], crit_en:["Effective communication with team members and partners","Regular monitoring of project progress","Management of unforeseen events","Quality control at each stage"]},
          {n:4, desc:"Superviser le projet", desc_en:"Close the project", crit:["Documentation claire et complète sur les étapes de réalisation","Manifestation d’écoute et d’une aptitude à diriger","Justesse des conseils","Respect des exigences techniques et visuelles du projet","Respect des personnes"], crit_en:["Verification of compliance with client requirements","Delivery of all project deliverables","Assessment of project outcomes"]},
          {n:5, desc:"Faire le bilan du projet", desc_en:"Faire le bilan du projet", crit:["Respect des délais","Respect du budget","Production correcte d’un compte-rendu des travaux","Pertinence des suggestions"], crit_en:[]}
        ]},
      {code:"053M", type:"obligatoire", enonce:"Gérer une micro-entreprise en communication graphique", enonce_en:"Manage a graphic design microbusiness", contexte:"À l’aide de la documentation des fournisseurs, telle que catalogues, listes de prix, etc. À l’aide de modèles de contrats, de formulaires et de documents administratifs. À l’aide de logiciels.", contexte_en:"Given the legal, financial and administrative framework for self-employment in Quebec; Given professional ethical standards for graphic designers",
        elements:[
          {n:1, desc:"Organiser son espace de travail", desc_en:"Examine the conditions for establishing a microbusiness", crit:["Établissement correct de plans d’achat et de renouvellement du matériel et de l’équipement","Choix approprié des fournisseurs","Commande appropriée des fournitures","Respect du budget","Aménagement physique fonctionnel et ergonomique"], crit_en:["Accurate identification of legal requirements for self-employment in Quebec","Recognition of entrepreneurial opportunities in graphic design","Understanding of tax obligations"]},
          {n:2, desc:"Produire du matériel promotionnel", desc_en:"Set up the administrative structure of a microbusiness", crit:["Aménagement fonctionnel de l’espace virtuel","Création correcte de son portfolio","Création correcte de son site Web, de sa papeterie et de son curriculum vitæ","Utilisation appropriée du logiciel","Mise en valeur de ses compétences"], crit_en:["Proper determination of the organizational and legal structure","Compliance with legal requirements","Set-up of administrative and financial management tools"]},
          {n:3, desc:"Rechercher des occasions d’affaires", desc_en:"Manage a client relationship", crit:["Manifestation de créativité","Analyse juste de la concurrence","Détermination correcte des services à offrir","Détermination correcte de stratégies de mise en valeur de ses réalisations","Élaboration correcte d’une liste de personnes- ressources et de clientes ou de clients potentiels"], crit_en:["Appropriate communication with clients","Proper management of contracts, briefs and fees","Professional resolution of disagreements"]},
          {n:4, desc:"Participer à des concours", desc_en:"Manage finances", crit:["Préparation correcte de demandes","Choix approprié des réalisations à présenter","Rédaction correcte de textes de présentation","Présentation de soi appropriée"], crit_en:["Accurate tracking of income and expenses","Compliance with tax obligations","Financial planning for the sustainability of the business"]}
        ]},
      {code:"053N", type:"obligatoire", enonce:"Exploiter des éléments de langages visuels en arts visuels et en design graphique", enonce_en:"Use elements of visual language derived from the visual arts and graphic design", contexte:"À l’aide de logiciels et d’outils de création. À l’aide de matériaux et de supports. À l’aide de documents de référence.", contexte_en:"Given reference materials on the visual arts and graphic design; Given a mandate",
        elements:[
          {n:1, desc:"Analyser des productions en arts visuels et en design graphique", desc_en:"Describe movements in the visual arts and graphic design", crit:["Distinction juste des éléments visuels et de la composition picturale dans les productions","Établissement de liens pertinents entre les productions et leur contexte historique","Association juste des productions aux principaux courants en arts visuels et en design graphique","Description juste des intentions de communication des productions"], crit_en:["Accurate description of the characteristics of art movements","Accurate description of the characteristics of graphic design movements","Recognition of the historical and cultural context of these movements"]},
          {n:2, desc:"Reconnaître les influences réciproques entre les arts visuels et des designs graphiques", desc_en:"Use elements of visual language in creating a composition", crit:["Utilisation appropriée de documents de référence","Établissement de liens pertinents entre les arts visuels et des designs graphiques","Utilisation appropriée de documents de référence","Choix justifié de la technique de composition"], crit_en:["Appropriate use of elements of visual language (line, shape, colour, texture, space)","Application of design principles","Demonstration of creativity and cultural awareness"]},
          {n:3, desc:"Expérimenter des techniques de composition d’images issues du langage des arts visuels et du design graphique", desc_en:"Expérimenter des techniques de composition d’images issues du langage des arts visuels et du design graphique", crit:["Utilisation appropriée des outils, des matériaux et des supports","Utilisation personnelle et cohérente d’éléments des langages des arts visuels et de design graphique","Recherche inventive de textures, de motifs, de couleurs, d’ombres et de lumières","Équilibre et dynamisme dans l’organisation des formes et des volumes"], crit_en:[]},
          {n:4, desc:"Évaluer sa démarche d’expérimentation", desc_en:"Évaluer sa démarche d’expérimentation", crit:["Manifestation de créativité","Regard critique et constructif sur sa production","Indication de moyens appropriés en vue d’améliorer sa démarche"], crit_en:[]}
        ]},
      {code:"053P", type:"obligatoire", enonce:"Créer des harmonies de couleurs", enonce_en:"Create colour harmonies", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’un projet de communication graphique. À l’aide du plan de communication, d’esquisses ou de maquettes. À l’aide de chartes de couleurs, d’échantillons ou de catalogues de couleurs d’encres. À l’aide de logiciels, d’outils et de supports.", contexte_en:"Given a mandate; Given colour systems and standards; Using colour management software",
        elements:[
          {n:1, desc:"Analyser le projet de communication graphique", desc_en:"Apply the principles of colour", crit:["Analyse juste du plan de communication","Analyse juste de l’esquisse ou de la maquette","Description juste des éléments d’ambiance à communiquer","Description juste des éléments graphiques et typographiques à mettre en valeur","Choix approprié du mode ou de la charte de couleurs","Détermination correcte du nombre de couleurs","Choix des couleurs en fonction de l’ambiance à créer, de la symbolique et de la psychologie des couleurs"], crit_en:["Accurate application of colour theory","Appropriate choice of colour systems","Accurate colour management"]},
          {n:2, desc:"Composer des palettes de couleurs", desc_en:"Create colour harmonies", crit:["Équilibre chromatique entre les couleurs choisies","Utilisation appropriée de chartes de couleurs, d’échantillons ou de catalogues de couleurs d’encres","Gestion appropriée des couleurs et des profils colorimétriques","Utilisation appropriée du logiciel","Manifestation de créativité","Choix approprié des couleurs","Ajustement des couleurs en fonction de la visibilité et de la lisibilité"], crit_en:["Appropriate choice of colour harmonies based on the mandate","Demonstration of creativity","Consistency of colour harmonies","Compliance with colour standards"]},
          {n:3, desc:"Appliquer les couleurs à des projets de communication graphique", desc_en:"Appliquer les couleurs à des projets de communication graphique", crit:["Mise en valeur adéquate des éléments graphiques et typographiques","Esthétisme dans l’agencement des couleurs","Utilisation efficace des outils et des supports","Utilisation appropriée du logiciel","Respect de l’ambiance à communiquer","Manifestation de créativité"], crit_en:[]}
        ]},
      {code:"053Q", type:"obligatoire", enonce:"Réaliser des designs typographiques", enonce_en:"Produce typographic designs", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’un message. À l’aide d’un code typographique. À l’aide de bibliothèques de polices de caractères et de logiciels utilitaires et de mise en pages.", contexte_en:"Given a mandate; Using layout software; Given typography and printing standards",
        elements:[
          {n:1, desc:"Analyser le message", desc_en:"Analyze the mandate", crit:["Distinction juste des éléments de contenu importants","Description juste des éléments d’ambiance à communiquer","Classification correcte des éléments de contenu","Détermination correcte du degré d’importance des caractères, des mots ou des phrases","Détermination correcte de la trajectoire de lecture","Respect du message"], crit_en:["Accurate analysis of the specifications","Identification of key typographic elements"]},
          {n:2, desc:"Hiérarchiser le contenu", desc_en:"Produce typographic designs", crit:["Exploration variée d’éléments typographiques","Choix approprié de la ou des familles de caractères","Choix approprié des corps, des graisses, des orientations et des formes typographiques","Choix approprié des couleurs, des textures et du contraste","Utilisation optimale des différents gris typographiques"], crit_en:["Appropriate choice of typefaces","Compliance with typographic rules","Demonstration of creativity","Proper use of software","Compliance with printing standards"]},
          {n:3, desc:"Définir les caractéristiques des caractères, des mots ou des phrases", desc_en:"Assess the quality of the typographic design", crit:["Utilisation appropriée du logiciel","Respect du message","Respect de l’ambiance","Respect du code typographique","Manifestation de créativité"], crit_en:["Critical and constructive assessment","Compliance with the mandate","Identification of ways to improve"]}
        ]},
      {code:"053R", type:"obligatoire", enonce:"Créer des maquettes de présentation de pictogrammes et d’icônes", enonce_en:"Produce presentation mockups of pictograms and icons", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’un mandat. À l’aide du plan de communication, d’éléments de contenu et du cahier des charges fournis par la cliente ou le client. À l’aide de documents de référence, d’outils de présentation, de bibliothèques de polices de caractères et de chartes de couleurs. À l’aide de périphériques d’acquisition d’images, de caméras numériques ou de matériel artistique. À l’aide de logiciels utilitaires et de dessin vectoriel ou matriciel.", contexte_en:"Given a mandate; Using vector drawing software; For different media and formats",
        elements:[
          {n:1, desc:"Analyser le mandat", desc_en:"Analyze the mandate and develop concepts", crit:["Analyse juste des besoins de la cliente ou du client, du plan de communication, des éléments de contenu et du cahier des charges","Détermination correcte des principales exigences d’impression ou de diffusion électronique liées à la réalisation du mandat","Analyse juste des pictogrammes ou des icônes existants","Application correcte de techniques de production d’idées","Exploration variée de la stylique visuelle","Diversité et clarté des esquisses"], crit_en:["Accurate analysis of the specifications","Development of relevant concepts","Demonstration of creativity"]},
          {n:2, desc:"Définir le concept visuel du pictogramme ou de l’icône", desc_en:"Produce pictograms and icons", crit:["Concept visuel en concordance avec le plan de communication","Utilisation appropriée des logiciels Utilisation appropriée de documents de référence","Manifestation de créativité","Choix approprié des esquisses à présenter","Préparation correcte du document de présentation","Rédaction correcte d’un argumentaire"], crit_en:["Appropriate choice of visual elements","Clarity and readability of the pictograms and icons","Compliance with visual communication principles","Proper use of software"]},
          {n:3, desc:"Présenter le concept visuel du pictogramme ou de l’icône", desc_en:"Produce presentation mockups", crit:["Présentation de soi appropriée","Description juste des caractéristiques du concept visuel","Qualité du français parlé","Pertinence des réponses aux questions et aux commentaires de la cliente ou du client","Utilisation appropriée des outils de présentation","Acceptation de la critique"], crit_en:["Appropriate presentation of mockups in context","Compliance with the mandate","Critical and constructive assessment of own work"]}
        ]},
      {code:"053S", type:"obligatoire", enonce:"Créer des maquettes de présentation pour des documents corporatifs", enonce_en:"Produce presentation mockups for corporate documents", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’un mandat. À l’aide du plan de communication, d’éléments de contenu et du cahier des charges fournis par la cliente ou le client. À l’aide de documents de référence, d’outils de présentation, de bibliothèques de polices de caractères et de chartes de couleurs. À l’aide de périphériques d’acquisition d’images, de caméras numériques ou de matériel artistique. À l’aide de logiciels utilitaires, de dessin vectoriel ou matriciel et de mise en pages.", contexte_en:"Given a mandate; Using layout software; Given printing standards; For different types of corporate documents: letterhead, business cards, brochures, etc.",
        elements:[
          {n:1, desc:"Analyser le mandat", desc_en:"Analyze the mandate and develop concepts", crit:["Analyse juste des besoins de la cliente ou du client, du plan de communication, des éléments de contenu et du cahier des charges","Détermination correcte des principales exigences d’impression ou de diffusion électronique liées à la réalisation du mandat","Analyse juste des documents corporatifs existants","Application correcte de techniques de production d’idées","Exploration variée de la stylique visuelle","Diversité et clarté des esquisses"], crit_en:["Accurate analysis of the specifications","Development of relevant concepts","Identification of the visual identity requirements"]},
          {n:2, desc:"Définir le concept visuel du document corporatif", desc_en:"Produce presentation mockups for corporate documents", crit:["Concept visuel en concordance avec le plan de communication","Utilisation appropriée des logiciels Utilisation appropriée de documents de référence","Manifestation de créativité","Choix approprié des esquisses à présenter","Préparation correcte du document de présentation","Rédaction correcte d’un argumentaire"], crit_en:["Application of visual communication principles","Compliance with printing standards","Demonstration of creativity","Coherent application of the visual identity"]},
          {n:3, desc:"Présenter le concept visuel du document corporatif", desc_en:"Assess the quality of the mockups", crit:["Présentation de soi appropriée","Description juste des caractéristiques du concept visuel","Qualité du français parlé","Pertinence des réponses aux questions et aux commentaires de la cliente ou du client","Utilisation appropriée des outils de présentation","Acceptation de la critique"], crit_en:["Critical and constructive assessment","Compliance with the mandate"]}
        ]},
      {code:"053T", type:"obligatoire", enonce:"Effectuer des mises en pages simples et l’impression composite de documents", enonce_en:"Produce simple layouts and composite printing documents", contexte:"Pour de la papeterie, des formulaires d’affaires, des cartons promotionnels, des dépliants, des affiches, de la signalisation, des étiquettes ou des imprimés recto verso. À partir d’une maquette de présentation et du cahier des charges. À partir de textes et d’éléments visuels. À l’aide de chartes de couleurs. À l’aide de bibliothèques de polices. À l’aide de logiciels utilitaires, de mise en pages, et d’épreuvage.", contexte_en:"Given a mandate; Using layout software; Given printing standards and specifications; For different types of printing: digital, offset, flexographic",
        elements:[
          {n:1, desc:"Analyser le projet", desc_en:"Analyze the mandate and plan the layout", crit:["Relevé des besoins et des exigences de la cliente ou du client","Analyse juste des textes et des éléments visuels","Analyse juste du concept et du public cible","Analyse juste du design graphique de la maquette de présentation","Analyse juste des exigences techniques d’impression"], crit_en:["Accurate analysis of the specifications","Identification of printing requirements and constraints","Planning of the layout structure"]},
          {n:2, desc:"Construire le document de mise en pages", desc_en:"Produce simple layouts", crit:["Description juste de l’aspect du document final","Fabrication correcte du répertoire des dossiers de production","Élaboration correcte des grilles de mise en pages","Organisation correcte des conteneurs de textes et d’images","Utilisation appropriée de bibliothèques de polices et de chartes de couleurs"], crit_en:["Proper organization of visual elements","Compliance with printing standards","Demonstration of creativity","Application of typographic rules"]},
          {n:3, desc:"Préparer les textes", desc_en:"Prepare composite printing documents", crit:["Utilisation appropriée du logiciel","Respect de la maquette de présentation","Traitement correct des éléments typographiques","Utilisation judicieuse des outils de révision de textes en français","Respect des responsabilités confiées aux réviseures ou réviseurs linguistiques"], crit_en:["Proper preparation of files for printing","Compliance with printing specifications","Quality control of the documents"]}
        ]},
      {code:"053U", type:"obligatoire", enonce:"Créer des maquettes de présentation pour des identités visuelles", enonce_en:"Produce presentation mockups for visual identities", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’un mandat. À l’aide du plan de communication, d’éléments de contenu et du cahier des charges fournis par la cliente ou le client. À l’aide de documents de référence, d’outils de présentation, de bibliothèques de polices de caractères et de chartes de couleurs. À l’aide de périphériques d’acquisition d’images, de caméras numériques ou de matériel artistique. À l’aide de logiciels utilitaires, de dessin vectoriel ou matriciel et de mise en pages.", contexte_en:"Given a mandate; Using vector drawing and layout software; For different applications: print and digital",
        elements:[
          {n:1, desc:"Analyser le mandat", desc_en:"Analyze the mandate and develop the visual identity concept", crit:["Analyse juste des besoins de la cliente ou du client, du plan de communication et des éléments de contenu","Détermination correcte des principales exigences d’impression ou de diffusion électronique liées à la réalisation du mandat","Analyse juste des identités visuelles existantes","Application correcte de techniques de production d’idées","Exploration variée de la stylique visuelle","Diversité et clarté des esquisses"], crit_en:["Accurate analysis of the specifications","Development of concepts that reflect the organization's values and positioning","Demonstration of creativity and originality"]},
          {n:2, desc:"Définir le concept de l’identité visuelle", desc_en:"Develop visual identity elements", crit:["Concept visuel en concordance avec le plan de communication","Utilisation appropriée des logiciels Utilisation appropriée de documents de référence","Manifestation de créativité","Choix approprié des esquisses à présenter","Préparation correcte du document de présentation","Rédaction correcte d’un argumentaire"], crit_en:["Appropriate choice of visual elements (logo, colours, typography)","Consistency of the visual identity","Compliance with visual communication principles"]},
          {n:3, desc:"Présenter le concept de l’identité visuelle", desc_en:"Produce presentation mockups", crit:["Présentation de soi appropriée","Description juste des caractéristiques du concept visuel","Qualité du français parlé","Pertinence des réponses aux questions et aux commentaires de la cliente ou du client","Utilisation appropriée des outils de présentation","Acceptation de la critique"], crit_en:["Appropriate presentation of the visual identity in context","Compliance with the mandate","Critical and constructive assessment of own work"]}
        ]},
      {code:"053V", type:"obligatoire", enonce:"Créer des projets d’illustration pour des communications graphiques", enonce_en:"Create illustrations for graphic communications", contexte:"Pour des imprimés ou des interfaces visuelles. À partir du plan de communication et d’éléments de contenu fournis par la cliente ou le client. À l’aide de documents de référence, d’outils de présentation, de bibliothèques de polices de caractères et de chartes de couleurs. À l’aide de périphériques d’acquisition d’images, de caméras numériques, de logiciels de dessin vectoriel ou matriciel, ou de matériel artistique.", contexte_en:"Given a mandate; Using digital and/or traditional illustration techniques; For different media: print and digital",
        elements:[
          {n:1, desc:"Analyser le mandat", desc_en:"Analyze the mandate and develop concepts", crit:["Analyse juste des besoins de la cliente ou du client, du plan de communication et des éléments de contenu","Détermination correcte des principales exigences d’impression ou de diffusion électronique liées à la réalisation du mandat","Analyse juste des illustrations existantes","Application correcte de techniques de production d’idées","Exploration variée de la stylique visuelle","Diversité et clarté des esquisses"], crit_en:["Accurate analysis of the specifications","Development of relevant concepts","Demonstration of creativity"]},
          {n:2, desc:"Définir le concept de l’illustration", desc_en:"Create illustrations", crit:["Concept visuel en concordance avec le plan de communication","Utilisation appropriée des logiciels","Utilisation appropriée de documents de référence","Manifestation de créativité","Création d’une harmonie de couleurs appropriée","Choix ou réalisation d’images matricielles ou vectorielles appropriées"], crit_en:["Demonstration of creativity and originality","Appropriate choice of illustration techniques","Technical mastery of the chosen medium","Compliance with the mandate"]},
          {n:3, desc:"Produire l’ébauche", desc_en:"Assess the quality of the illustrations", crit:["Pertinence et efficacité des effets visuels","Création d’une ambiance conforme au concept visuel","Utilisation appropriée des outils de dessin ou des logiciels","Respect des règles de composition","Manifestation de créativité"], crit_en:["Critical and constructive assessment","Compliance with visual communication principles","Compliance with the mandate"]}
        ]},
      {code:"053W", type:"obligatoire", enonce:"Créer des maquettes de présentation pour du packaging", enonce_en:"Produce presentation mockups for packaging", contexte:"Pour des imprimés. À partir d’un mandat. À l’aide du plan de communication, d’éléments de contenu et du cahier des charges fournis par la cliente ou le client. À l’aide de documents de référence, d’outils de présentation, de bibliothèques de polices de caractères et de chartes de couleurs. À l’aide de périphériques d’acquisition d’images, de caméras numériques ou de matériel artistique. À l’aide de logiciels utilitaires, de dessin vectoriel ou matriciel et de mise en pages.", contexte_en:"Given a mandate; Using vector drawing and layout software; Given printing and production standards; For different types of packaging",
        elements:[
          {n:1, desc:"Analyser le mandat", desc_en:"Analyze the mandate and develop concepts", crit:["Analyse juste des besoins de la cliente ou du client, du plan de communication, des éléments de contenu et du cahier des charges","Détermination correcte des principales exigences d’impression liées à la réalisation du mandat","Analyse juste des produits de packaging concurrents","Application correcte de techniques de production d’idées","Exploration variée de la stylique visuelle","Diversité et clarté des esquisses","Concept visuel en concordance avec le plan de communication"], crit_en:["Accurate analysis of the specifications","Identification of packaging constraints (format, materials, printing)","Development of relevant concepts"]},
          {n:2, desc:"Définir le concept visuel du packaging", desc_en:"Produce presentation mockups for packaging", crit:["Utilisation appropriée des logiciels","Utilisation appropriée de documents de référence","Manifestation de créativité","Choix approprié des esquisses à présenter","Préparation correcte du document de présentation","Rédaction correcte d’un argumentaire"], crit_en:["Appropriate design for the packaging format","Compliance with printing and production standards","Demonstration of creativity","Correct development of the die-cut"]},
          {n:3, desc:"Présenter le concept visuel du packaging", desc_en:"Assess the quality of the mockups", crit:["Présentation de soi appropriée","Description juste des caractéristiques du concept visuel","Qualité du français parlé","Pertinence des réponses aux questions et aux commentaires de la cliente ou du client","Utilisation appropriée des outils de présentation","Acceptation de la critique"], crit_en:["Critical and constructive assessment","Compliance with the mandate"]}
        ]},
      {code:"053X", type:"obligatoire", enonce:"Créer des maquettes de présentation pour des projets d’édition", enonce_en:"Produce presentation mockups for publishing projects", contexte:"Pour des imprimés et des interfaces visuelles. À partir d’un mandat. À l’aide du plan de communication, d’éléments de contenu et du cahier des charges fournis par la cliente ou le client. À l’aide de documents de référence, d’outils de présentation, de bibliothèques de polices de caractères et de chartes de couleurs. À l’aide de périphériques d’acquisition d’images, de caméras numériques ou de matériel artistique. À l’aide de logiciels utilitaires, de dessin vectoriel ou matriciel et de mise en pages.", contexte_en:"Given a mandate; Using layout software; Given printing standards; For different types of publications: books, magazines, catalogues, etc.",
        elements:[
          {n:1, desc:"Analyser le mandat", desc_en:"Analyze the mandate and develop concepts", crit:["Analyse juste des besoins de la cliente ou du client, des éléments de contenu et du cahier des charges","Détermination correcte des principales exigences d’impression ou de diffusion électronique liées à la réalisation du mandat","Analyse juste des produits d’édition existants","Application correcte de techniques de production d’idées","Exploration variée de la stylique visuelle","Diversité et clarté des esquisses"], crit_en:["Accurate analysis of specifications","Development of relevant concepts","Identification of the specific requirements of publishing layouts"]},
          {n:2, desc:"Définir le concept visuel du projet d’édition", desc_en:"Produce presentation mockups for publishing projects", crit:["Concept visuel en concordance avec le plan de communication","Utilisation appropriée des logiciels Utilisation appropriée de documents de référence","Manifestation de créativité","Choix approprié des esquisses à présenter","Préparation correcte du document de présentation","Rédaction correcte d’un argumentaire"], crit_en:["Application of layout principles specific to publications","Compliance with printing standards","Demonstration of creativity","Proper management of text flow and images"]},
          {n:3, desc:"Présenter le concept visuel du projet d’édition", desc_en:"Assess the quality of the mockups", crit:["Présentation de soi appropriée","Description juste des caractéristiques du concept visuel","Qualité du français parlé","Pertinence des réponses aux questions et aux commentaires de la cliente ou du client","Utilisation appropriée des outils de présentation","Acceptation de la critique"], crit_en:["Critical and constructive assessment","Compliance with the mandate"]}
        ]},
      {code:"053Y", type:"obligatoire", enonce:"Créer des maquettes de présentation pour des projets de design cinétique", enonce_en:"Produce presentation mockups for kinetic design projects", contexte:"Pour des interfaces visuelles. À partir d’un mandat. À l’aide du plan de communication, d’éléments de contenu et du cahier des charges fournis par la cliente ou le client. À l’aide de documents de référence, d’outils de présentation, de bibliothèques de polices de caractères et de chartes de couleurs. À l’aide de périphériques d’acquisition d’images, de caméras numériques et vidéo ou de matériel artistique. À l’aide de logiciels utilitaires, de dessin vectoriel ou matriciel et d’animation.", contexte_en:"Given a mandate; Using motion graphics software; Given distribution standards; For different media: Web, television, digital displays",
        elements:[
          {n:1, desc:"Analyser le mandat", desc_en:"Analyze the mandate and develop concepts", crit:["Analyse juste des besoins de la cliente ou du client, des éléments de contenu et du cahier des charges","Détermination correcte des principales exigences de diffusion électronique liées à la réalisation du mandat","Analyse juste des produits de design cinétique existants","Application correcte de techniques de production d’idées","Exploration variée de la stylique visuelle"], crit_en:["Accurate analysis of specifications","Development of relevant animated concepts","Identification of distribution requirements"]},
          {n:2, desc:"Définir le concept visuel du projet de design cinétique", desc_en:"Produce presentation mockups for kinetic design", crit:["Scénarisation correcte des éléments à animer","Diversité et clarté des esquisses","Concept visuel en concordance avec le plan de communication","Utilisation appropriée des logiciels Utilisation appropriée de documents de référence","Manifestation de créativité"], crit_en:["Application of motion design principles (timing, easing, storytelling)","Demonstration of creativity","Compliance with distribution standards","Proper use of animation software"]}
        ]},
      {code:"053Z", type:"obligatoire", enonce:"Créer des maquettes de présentation pour des projets de campagne de publicité", enonce_en:"Produce presentation mockups for advertising campaigns", contexte:"Pour des projets de campagne de publicité tels : promotion, communication publicitaire média, sociétale, de relations publiques ou événementielle. Pour des imprimés et des interfaces visuelles. À partir d’un mandat. À l’aide du plan de communication, d’éléments de contenu et du cahier des charges fournis par la cliente ou le client. À l’aide de documents de référence, d’outils de présentation, de bibliothèques de polices de caractères et de chartes de couleurs. À l’aide de périphériques d’acquisition d’images, de caméras numériques ou de matériel artistique. À l’aide de logiciels utilitaires, de dessin vectoriel ou matriciel et de mise en pages.", contexte_en:"Given a mandate; Using design software; Given media specifications; For different media: print, digital, outdoor advertising",
        elements:[
          {n:1, desc:"Analyser le mandat", desc_en:"Analyze the mandate and develop concepts", crit:["Analyse juste des besoins de la cliente ou du client, du plan de communication, des éléments de contenu et du cahier des charges","Détermination correcte des principales exigences d’impression ou de diffusion électronique liées à la réalisation du mandat","Analyse juste des campagnes de publicité existantes","Application correcte de techniques de production d’idées","Exploration variée de la stylique visuelle"], crit_en:["Accurate analysis of the communication plan and target audience","Development of creative and relevant concepts","Demonstration of strategic thinking"]},
          {n:2, desc:"Définir le concept visuel du projet de campagne", desc_en:"Develop advertising concepts", crit:["Diversité et clarté des esquisses","Concept visuel en concordance avec le plan de communication","Utilisation appropriée des logiciels","Utilisation appropriée de documents de référence","Manifestation de créativité"], crit_en:["Demonstration of creativity","Coherence with the communication plan","Compliance with media specifications","Relevance to the target audience"]}
        ]},
      {code:"0541", type:"obligatoire", enonce:"Analyser la fonction de travail de graphiste", enonce_en:"Analyze the occupation of graphic designer", contexte:"À l’aide d’une information récente sur l’exercice de la fonction de travail ainsi que sur les entreprises et les organismes du secteur. À l’aide de lois, de règlements et de codes en vigueur.", contexte_en:"Given recent information about the occupation, as well as companies and organizations in the sector; Given the current laws, regulations and codes",
        elements:[
          {n:1, desc:"Caractériser la fonction de travail et les conditions d’exercice qui s’y rattachent", desc_en:"Describe the occupation and the conditions for its practice", crit:["Pertinence de l’information recueillie","Examen complet des caractéristiques de la fonction de travail et des conditions d’exercice qui s’y rattachent","Reconnaissance de la contribution des professions connexes"], crit_en:["Relevant information gathered","Thorough examination of the characteristics of the occupation and the conditions for its practice","Recognition of the contribution of related occupations","Recognition of entrepreneurial potential"]},
          {n:2, desc:"Examiner les tâches et les opérations liées à la fonction de travail", desc_en:"Examine the tasks and operations associated with the occupation", crit:["Reconnaissance des possibilités de pratique entrepreneuriale","Examen complet des opérations, des conditions et des exigences de réalisation de chacune des tâches"], crit_en:["Thorough examination of the operations, conditions and requirements associated with each task","Accurate determination of the relative importance of the tasks"]},
          {n:3, desc:"Examiner les habiletés et les comportements nécessaires à l’exercice de la fonction de travail", desc_en:"Examine the skills and behaviours needed to practise the occupation", crit:["Détermination exacte de l’importance relative des tâches","Pertinence des liens établis entre les habiletés et comportements requis et les différentes tâches de la fonction de travail"], crit_en:["Relevant connections made between the skills and behaviours required and the different tasks"]}
        ]},
      {code:"0542", type:"obligatoire", enonce:"Employer des techniques de production d’idées", enonce_en:"Use idea generation techniques", contexte:"Individuellement et en équipe. À partir d’une demande. À l’aide du plan de communication de la cliente ou du client. À l’aide de l’information sur le produit ou le service de la cliente ou du client. À l’aide de documents de référence.", contexte_en:"Working alone and in teams; Given a mandate; Given the client's communication plan; Given information about the client's product or service; Given reference materials",
        elements:[
          {n:1, desc:"Analyser la demande", desc_en:"Analyze the mandate", crit:["Analyse juste du plan de communication de la cliente ou du client","Analyse juste des caractéristiques du produit ou du service de la cliente ou du client","Inventaire adéquat des idées existantes relativement au produit ou au service","Utilisation appropriée de documents de référence","Choix et utilisation appropriés de techniques d’idéation"], crit_en:["Accurate analysis of the client's communication plan","Accurate analysis of the characteristics of the client's product or service","Appropriate inventory of existing ideas about the product or service","Appropriate use of reference materials"]},
          {n:2, desc:"Procéder à l’idéation", desc_en:"Develop ideas", crit:["Utilisation appropriée du matériel d’idéation","Exploitation de la rhétorique visuelle par rapport au plan de communication","Variété et originalité des idées","Manifestation d’une ouverture d’esprit"], crit_en:["Appropriate choice and use of techniques","Appropriate use of materials","Use of visual rhetoric with respect to the communication plan","Diverse and original ideas","Demonstration of open-mindedness"]},
          {n:3, desc:"Retenir les idées prometteuses", desc_en:"Select promising ideas", crit:["Analyse juste de l’adéquation entre le plan de communication, le produit ou le service et les résultats de l’idéation","Appréciation juste de l’originalité des idées","Classement correct des idées pertinentes","Choix pertinent et justifié des idées"], crit_en:["Accurate analysis of consistency between the communication plan, the product or service and the results of the idea search","Accurate assessment of the originality of the ideas","Appropriate classification of pertinent ideas","Appropriate and justifiable choice of ideas"]}
        ]},
      {code:"0543", type:"obligatoire", enonce:"Traduire des concepts en esquisses", enonce_en:"Make concept sketches", contexte:"À main levée et à l’ordinateur. À partir d’un concept. À l’aide du plan de communication de la cliente ou du client. À l’aide de l’information sur le produit ou le service de la cliente ou du client. À l'aide d’outils de dessin. À l’aide de documents de référence.", contexte_en:"Freehand; Given a mandate",
        elements:[
          {n:1, desc:"Analyser le concept à communiquer", desc_en:"Analyze the mandate and organize the work", crit:["Analyse juste du plan de communication de la cliente ou du client","Analyse juste des caractéristiques du produit ou du service de la cliente ou du client","Description juste de la signification du concept","Inventaire adéquat des images existantes relativement au concept à communiquer","Utilisation appropriée de documents de référence","Utilisation appropriée de techniques d’observation","Choix approprié d’un style"], crit_en:["Accurate analysis of specifications","Appropriate identification of key visual elements","Logical organization of the work process"]},
          {n:2, desc:"Ébaucher des esquisses du concept", desc_en:"Sketch concepts freehand", crit:["Choix et utilisation appropriés des outils de dessin","Détermination correcte de la dimension des esquisses","Exploration de différentes formes de composition","Précision des lignes et des proportions","Simplicité des formes","Variété et originalité des ébauches","Représentation correcte du concept"], crit_en:["Demonstration of creativity","Appropriate use of freehand drawing techniques","Coherent representation of concepts","Rapid and expressive sketching"]},
          {n:3, desc:"Retenir les esquisses prometteuses", desc_en:"Select and present promising sketches", crit:["Respect des principes de base de la perspective","Manifestation de créativité","Analyse juste de l’adéquation entre le plan de communication, le produit ou le service, le concept et les esquisses","Appréciation juste de l’originalité des esquisses","Classement correct des esquisses pertinentes","Choix pertinent et justifié des esquisses"], crit_en:["Appropriate choice based on the mandate","Clear justification of choices","Quality of presentation"]}
        ]}
    ]
  },

  // ─── 570.E0 ──────────────────────────────────────────────────────────────
  {
    code: "570.E0",
    titre: "Techniques de design d'intérieur",
    titre_en: "Interior Design",
    secteur: "04 – Arts",
    annee: 2019,
    unites: "91 \u2154",
    heures: 2625,
    source_url: "https://cdn-contenu.quebec.ca/cdn-contenu/adm/min/education/publications-adm/cegeps/services-administratifs/Programmes-etudes-techniques/PE04-570E0-Design-Interieur.pdf",
    competences: [
      {code:"022A", type:"obligatoire", enonce:"Analyser la fonction de travail", contexte:"À l'occasion de visites d'entreprises, de salons et d'expositions, de conférences, etc.; En situant le design d'intérieur dans son contexte social et historique; En tenant compte des aspects environnementaux; À l'aide de données récentes sur la profession et les entreprises du secteur", elements:[{n:1, desc:"Caractériser la fonction de travail et ses conditions d'exercice", crit:["Pertinence de l'information recueillie","Examen complet des caractéristiques de la fonction de travail et de ses conditions d'exercice","Reconnaissance juste des milieux de travail et du rôle des spécialistes","Reconnaissance juste des modes de travail","Reconnaissance juste des différentes possibilités de cheminement de carrière","Prise en considération des répercussions du design en tant que valeur ajoutée"]},{n:2, desc:"Examiner les tâches de la fonction de travail", crit:["Examen attentif des tâches ainsi que de leurs conditions d'exécution et exigences","Détermination juste de l'importance relative des tâches","Mise en relation des étapes du processus de design et des tâches de la fonction de travail"]},{n:3, desc:"Examiner les habiletés et les comportements nécessaires à l'exercice de la fonction de travail", crit:["Pertinence des liens établis entre les habiletés et comportements et les différentes tâches","Détermination juste des comportements nécessaires au travail en équipe","Reconnaissance juste des règles de l'éthique professionnelle"]},{n:4, desc:"Caractériser les aspects de la santé et de la sécurité liés à l'exercice de la profession", crit:["Reconnaissance juste des risques liés à la santé et à la sécurité dans les milieux de travail en design d'intérieur","Reconnaissance juste de la responsabilité du designer en matière de conception et d'aménagement d'espace","Prise en considération des exigences propres au travail sur un projet en chantier"]},{n:5, desc:"Examiner la législation propre à l'exercice de la profession", crit:["Reconnaissance du rôle et des responsabilités des différents corps d'emploi dans le domaine du design d'intérieur","Examen attentif des limites juridiques de l'exercice de la profession"]},{n:6, desc:"Explorer les possibilités d'affaires dans le domaine du design d'intérieur", crit:["Reconnaissance juste des possibilités de pratique entrepreneuriale dans le domaine du design","Prise en considération des répercussions financières et personnelles de la gestion d'entreprise","Examen attentif des aspects légaux propres à la création d'une entreprise"]}]},
      {code:"022B", type:"obligatoire", enonce:"Intégrer les courants historiques et artistiques au design d'intérieur", contexte:"Pour la conception d'un projet de design d'intérieur, d'un concept, etc.; À partir des critères de création; À l'aide de documents de référence et de l'inforoute", elements:[{n:1, desc:"Explorer les courants artistiques reliés aux arts visuels, aux arts appliqués, aux styles, aux métiers d'art et à l'architecture", crit:["Reconnaissance judicieuse des grands courants artistiques","Prise en considération des grandes époques artistiques","Différenciation appropriée des éléments caractérisant les tendances"]},{n:2, desc:"Comparer les caractéristiques de chaque époque artistique", crit:["Illustration juste des caractéristiques de chaque époque artistique","Distinction pertinente des éléments visuels signifiants","Utilisation appropriée des outils de lecture du langage visuel","Association appropriée des composantes iconographiques de différentes productions","Association juste des styles relatifs à l'objet, au mobilier et à l'architecture"]},{n:3, desc:"Associer les grands courants artistiques aux mouvements sociaux correspondants", crit:["Distinction des principaux procédés propres aux arts visuels, aux arts appliqués, aux styles, aux métiers d'art et à l'architecture","Établissement de liens pertinents entre les courants artistiques et les mouvements sociaux"]},{n:4, desc:"Adapter des courants artistiques à un concept de design d'intérieur", crit:["Prise en considération des concepts déterminants dans l'évolution du design","Organisation cohérente des éléments visuels selon les tendances retenues","Adaptation signifiante des styles dans un concept de design d'intérieur","Manifestation d'ouverture aux grands courants artistiques"]}]},
      {code:"022C", type:"obligatoire", enonce:"Développer des idées", contexte:"Pour la conception et l'élaboration d'un projet de design d'intérieur, d'un concept, etc.; À partir de la demande d'une cliente ou d'un client, de consignes verbales ou écrites, ou d'une initiative personnelle; En tenant compte du mode de travail individuel ou en équipe; À l'aide de références visuelles", elements:[{n:1, desc:"Préparer la recherche conceptuelle", crit:["Analyse appropriée de la demande","Prise en considération des contraintes et des besoins relatifs à la demande","Collecte de l'information susceptible d'être exploitée au moment de l'idéation","Manifestation d'une attitude favorable à la créativité","Manifestation du sens de l'écoute et de l'initiative"]},{n:2, desc:"Procéder à l'idéation", crit:["Utilisation cohérente des techniques de créativité","Manifestation de réflexion et d'imagination dans la recherche des idées","Application de méthodes de résolution de problèmes","Manifestation de spontanéité et d'ouverture d'esprit","Conception d'idées originales et pertinentes","Utilisation des outils de représentation axée sur la créativité","Représentation non censurée des idées"]},{n:3, desc:"Dégager des orientations conceptuelles", crit:["Exploration judicieuse de différentes pistes","Manifestation de discernement","Sélection des idées ayant un réel potentiel","Équilibre entre les exigences d'originalité et d'efficacité","Traduction probante des idées"]},{n:4, desc:"Représenter les idées retenues", crit:["Raffinement des idées en fonction des orientations dégagées","Intégration harmonieuse des critères relatifs à la demande","Explication claire et cohérente des idées retenues et de l'objet de la demande","Choix judicieux des moyens de représentation","Représentation explicite des idées"]}]},
      {code:"022D", type:"obligatoire", enonce:"Faire des esquisses", contexte:"Pour la conception, l'élaboration et la vulgarisation d'un projet de design d'intérieur, d'un concept, etc.; À partir d'un dessin ou d'une image; Selon une échelle relative; À l'aide des médiums, des supports et des instruments de dessin couramment utilisés", elements:[{n:1, desc:"Organiser son travail", crit:["Analyse pertinente de la nature du travail à effectuer et des objectifs de la mise en forme de l'idée","Choix judicieux des outils de travail","Établissement d'une séquence d'exécution","Prise en considération du temps alloué"]},{n:2, desc:"Reproduire un objet par un dessin d'observation", crit:["Évaluation juste des proportions d'un objet","Utilisation appropriée des médiums","Disposition correcte du dessin sur le support","Capacité à donner du caractère au dessin","Définition précise des zones d'ombre et de lumière","Application judicieuse des dégradés","Rigueur, clarté et précision du dessin","Respect des proportions et des formes de l'objet","Rapidité d'exécution","Réalisme du dessin par rapport au sujet"]},{n:3, desc:"Concrétiser une idée par une esquisse", crit:["Choix approprié de la vue ou du détail à représenter","Interprétation juste du langage des traits, des lignes, des formes et des textures","Utilisation appropriée des médiums","Passage rigoureusement précis du bidimensionnel au tridimensionnel, s'il y a lieu","Capacité à donner du caractère au dessin","Rigueur, clarté et précision du dessin","Respect des proportions","Rapidité d'exécution"]},{n:4, desc:"Finaliser les esquisses", crit:["Choix judicieux des moyens de représentation","Qualité et cohérence de l'assemblage des esquisses","Clarté et concision des éléments notés, s'il y a lieu","Sensibilité et réalisme du rendu"]}]},
      {code:"022E", type:"obligatoire", enonce:"Modéliser des objets et des espaces", contexte:"À partir d'un objet, d'un espace, d'un lieu ou d'un bâtiment en design d'intérieur; En tenant compte du mode de travail individuel ou en équipe; À partir d'un relevé architectural, de dessins de collègues de travail, ou d'une esquisse et de plans de design; À l'aide de logiciels, d'outils informatiques, de plateformes nuagiques, d'outils de réalité virtuelle, etc.; À l'aide des normes et des conventions graphiques", elements:[{n:1, desc:"Planifier le travail", crit:["Évaluation juste des dessins à produire et de l'information à communiquer","Choix judicieux des outils de travail","Détermination juste des formats, gabarits et configurations","Détermination appropriée du niveau de précision du dessin à modéliser","Établissement approprié d'une séquence d'exécution et d'un échéancier"]},{n:2, desc:"Créer des modèles d'objets et d'espaces", crit:["Sélection appropriée d'un gabarit de dessin","Détermination précise des paramètres d'une maquette numérique","Utilisation efficace des principales fonctions d'un logiciel de modélisation","Modélisation rigoureuse d'une maquette numérique"]},{n:3, desc:"Produire des vues 2D et 3D", crit:["Évaluation rigoureuse des vues à produire","Application juste des conventions propres à chaque vue retenue","Disposition appropriée des vues","Utilisation juste des échelles de mesure"]},{n:4, desc:"Effectuer la cotation et l'annotation des dessins", crit:["Cotation et annotation claires et concises","Respect des normes générales de cotation","Utilisation juste des systèmes de mesure","Disposition appropriée des notes sur le dessin et dans le cartouche"]},{n:5, desc:"Partager un modèle et la publication des vues", crit:["Publication appropriée des vues 2D et 3D selon les modes graphiques usuels","Considération appropriée du format du support visuel et de la taille de la vue à partager","Détermination juste du format et de l'extension des fichiers de publication","Organisation claire de l'arborescence","Utilisation efficace de plateformes de partage"]},{n:6, desc:"Imprimer les vues", crit:["Préparation appropriée de la mise en page","Sélection du format d'impression","Respect de la marche à suivre pour l'impression des vues","Détermination correcte de l'extension du fichier d'impression","Corrélation adéquate entre l'impression et les paramètres établis","Évaluation méthodique du résultat de l'impression"]}]},
      {code:"022F", type:"obligatoire", enonce:"Effectuer des dessins assistés par ordinateur", contexte:"À partir d'un relevé architectural, de dessins de collègues de travail, ou d'une esquisse et de plans de projets de design d'intérieur; En tenant compte du mode de travail individuel ou en équipe; À l'aide de la règle à l'échelle, de la documentation technique, de logiciels, d'outils informatiques, de plateformes nuagiques, d'outils de réalité virtuelle; À l'aide des normes et des conventions propres aux logiciels utilisés", elements:[{n:1, desc:"Planifier le travail", crit:["Sélection appropriée des logiciels de dessin, des outils de sauvegarde, des plateformes nuagiques, etc.","Détermination juste des règles de codification des fichiers","Évaluation juste des dessins à produire et de l'information à communiquer","Établissement approprié d'une séquence d'exécution et d'un échéancier","Organisation claire de l'arborescence"]},{n:2, desc:"Exécuter des dessins", crit:["Sélection appropriée d'un gabarit selon le logiciel de dessin utilisé","Utilisation appropriée des configurations de base du gabarit du dessin","Détermination appropriée des paramètres du gabarit","Utilisation correcte des commandes et des outils de dessin","Gestion efficace de l'information et des données relatives au projet","Respect du système de calques du logiciel","Représentation juste des différentes vues et coupes en projection orthogonale","Organisation méthodique de la sauvegarde","Clarté et précision des dessins, des annotations et des cotes"]},{n:3, desc:"Vérifier la qualité du travail", crit:["Respect de la méthode de vérification","Vérification de la conformité de la représentation avec les données de départ","Repérage des modifications à apporter","Corrections appropriées des anomalies","Vérification rigoureuse de l'ensemble des dessins ayant fait l'objet de modifications"]},{n:4, desc:"Publier des dessins", crit:["Publication appropriée des dessins 2D et 3D selon les modes graphiques usuels","Considération appropriée du format du support visuel et de la taille de la vue à partager","Détermination juste du format et de l'extension des fichiers de publication","Organisation claire de l'arborescence","Utilisation efficace des plateformes de partage"]},{n:5, desc:"Imprimer des dessins", crit:["Préparation appropriée du matériel","Établissement pertinent des paramètres","Respect de la marche à suivre pour l'impression des fichiers","Utilisation juste des échelles pour la mise en page des dessins et des annotations","Utilisation correcte de la table traçante et de l'imprimante","Correspondance adéquate entre l'impression et les paramètres établis","Évaluation méthodique du résultat de l'impression"]}]},
      {code:"022G", type:"obligatoire", enonce:"Interagir avec les clientes et les clients, les personnes-ressources et les collègues de travail", contexte:"À partir de situations professionnelles variées : rencontre avec une cliente ou un client, présentation d'une offre de service, présentation d'un concept, négociation d'honoraires, etc.; En collaboration avec des personnes-ressources, des collègues de travail, etc.; À partir des règles de l'éthique professionnelle", elements:[{n:1, desc:"Établir des relations professionnelles", crit:["Prise en considération de ses forces et de ses limites","Manifestation d'attitudes favorisant les relations interpersonnelles harmonieuses","Respect des règles d'éthique","Adaptation appropriée de son approche selon les personnes et les situations"]},{n:2, desc:"Communiquer avec les collègues, les fournisseurs et la clientèle", crit:["Manifestation d'ouverture d'esprit et de souplesse","Application appropriée des techniques de désamorçage de situations difficiles","Maîtrise convenable des réactions et des émotions","Communication claire et précise de l'information","Utilisation efficace d'outils d'échange et de partage de l'information","Gestion et consignation efficaces des communications numériques"]},{n:3, desc:"Conseiller la clientèle", crit:["Prise en considération des caractéristiques culturelles et sociales des personnes","Clarification des besoins, des attentes et des valeurs des personnes en cause","Explication appropriée du processus de design","Clarté de la communication","Manifestation de réceptivité et d'écoute","Vulgarisation de l'information technique","Pertinence des conseils donnés","Souci de l'image de l'entreprise"]},{n:4, desc:"Travailler en équipe", crit:["Distinction juste des rôles et des responsabilités des membres de l'équipe","Contribution active au sein de l'équipe","Manifestation d'attitudes favorisant le travail en équipe","Respect du processus de travail établi par les membres de l'équipe","Coordination efficace de ses activités avec celles des autres membres de l'équipe","Communication claire et efficace avec les autres membres de l'équipe"]},{n:5, desc:"Maîtriser le stress", crit:["Évaluation judicieuse de sa capacité à résister au stress ainsi que de ses limites","Utilisation efficace de techniques de gestion du stress","Utilisation de moyens appropriés permettant de gérer son stress"]}]},
      {code:"029H", type:"obligatoire", enonce:"Créer des ambiances par la couleur", contexte:"Pour la conception et la présentation d'un concept; À partir d'une demande ou d'un mandat; À partir des grands principes de la théorie de la couleur; À l'aide d'instruments, d'outils informatiques, de logiciels, de plateformes nuagiques, d'outils de réalité virtuelle; À partir de chartes et d'échantillons fournis par des fabricants de couleurs; À partir des lois, normes, codes et règlements en vigueur", elements:[{n:1, desc:"Analyser les données du projet", crit:["Interprétation pertinente des données du projet","Analyse juste des phénomènes physiques et psychologiques de la couleur en fonction du projet","Établissement clair des attentes de la cliente ou du client","Prise en considération des goûts de la cliente ou du client","Évaluation réaliste du résultat escompté","Prise en considération de l'échéancier","Utilisation appropriée du vocabulaire propre à la couleur"]},{n:2, desc:"Composer des harmonies de couleur", crit:["Évaluation judicieuse de l'atmosphère à créer","Prise en considération des aspects culturels et symboliques de la couleur","Manifestation de la capacité à percevoir les subtilités de la couleur","Prise en considération de la nature des matériaux et des textures entrant dans la composition d'une harmonie","Emploi approprié des médiums","Emploi judicieux des méthodes d'harmonisation des couleurs","Sélection des couleurs en fonction des critères de la cliente ou du client, de ses besoins et des effets spatiaux","Qualité des agencements créés","Manifestation de créativité","Qualité de la représentation graphique","Évaluation critique du résultat"]},{n:3, desc:"Résoudre des problèmes relatifs à la couleur", crit:["Description claire du problème","Détermination juste des causes et des conséquences du problème","Choix de la solution la mieux adaptée au problème à résoudre","Utilisation appropriée des outils, des médiums et des supports","Équilibre des volumes, des masses et des surfaces qui créent la couleur","Emploi judicieux des méthodes d'harmonisation des couleurs"]}]},
      {code:"022H", type:"obligatoire", enonce:"Proposer les finis et les matériaux relatifs à un projet", contexte:"À partir d'une commande, d'un concept ou d'un projet de design; En tenant compte du mode de travail individuel ou en équipe; À l'aide du jeu de plans, de systèmes de classification des finis et matériaux, du devis directeur, d'échantillons, de répertoires, etc.; En visitant des salles d'exposition de produits et des ateliers de fabrication, s'il y a lieu; En collaboration avec des fournisseurs; À l'aide de logiciels de modélisation ou de dessin, d'outils informatiques, de plateformes nuagiques, d'outils de réalité virtuelle; À partir des lois, normes, codes et règlements en vigueur; À l'aide des principes d'ergonomie et des normes de confort de l'usager", elements:[{n:1, desc:"Analyser la demande", crit:["Collecte complète et précise des données relatives au projet","Examen précis de l'ampleur du projet","Analyse appropriée de la demande","Prise en considération de l'échéancier et du budget, s'il y a lieu","Manifestation de réalisme et d'organisation","Respect des valeurs culturelles et esthétiques"]},{n:2, desc:"Effectuer la recherche des finis, des matériaux et des éléments", crit:["Détermination juste des finis, des matériaux et des éléments nécessaires à la réalisation du projet","Recherche exhaustive d'information","Vérification pertinente auprès des fournisseurs","Visites de salles d'exposition et d'ateliers de fabrication de produits, s'il y a lieu","Respect des lois, normes et règlements en vigueur","Détermination appropriée de la performance et du cycle de vie","Organisation méthodique du travail de recherche et de la sauvegarde des données"]},{n:3, desc:"Sélectionner les finis et les matériaux", crit:["Manifestation de créativité, de curiosité et de sensibilité esthétique","Évaluation des contraintes relatives à la préparation des supports, à la pose du revêtement et à leur entretien","Choix judicieux des finis et des matériaux en fonction de la faisabilité du projet, des contraintes budgétaires et des aspects environnementaux","Considération juste des fiches techniques","Spécification judicieuse et harmonieuse des finis et des matériaux"]},{n:4, desc:"Calculer les quantités et les coûts de finis, de matériaux et d'éléments", crit:["Choix judicieux de la méthode de calcul selon les types de finis et de matériaux","Détermination précise de l'emplacement prévu pour les finis et les matériaux en fonction des calculs de superficie","Rigueur et exactitude des calculs de superficie","Résolution correcte des équations","Vérification des résultats"]},{n:5, desc:"Effectuer la consignation et le partage des données", crit:["Consignation claire des données sur les dessins","Utilisation appropriée de la terminologie","Exactitude des données","Partage efficace des données entre les personnes-ressources et la cliente ou le client"]}]},
      {code:"022J", type:"obligatoire", enonce:"Spécifier le mobilier en série, les accessoires décoratifs et l'équipement nécessaires à un projet", contexte:"À partir d'une commande, d'un concept ou d'un projet de design; En tenant compte du mode de travail individuel ou en équipe; À l'aide du jeu de plans, du devis directeur, d'échantillons, de répertoires numériques, etc.; En visitant des salles d'exposition de produits et des ateliers de fabrication; En collaboration avec des fournisseurs; À l'aide de logiciels de modélisation ou de dessin, d'outils informatiques, de plateformes nuagiques, d'outils de réalité virtuelle; En tenant compte des aspects environnementaux; À partir des lois, normes, codes et règlements en vigueur; À l'aide des principes d'ergonomie et des normes de confort de l'usager", elements:[{n:1, desc:"Analyser la demande", crit:["Collecte complète et précise des données relatives au projet","Examen précis de l'envergure du projet","Analyse appropriée de la demande","Manifestation de réalisme et d'organisation","Prise en considération de l'échéancier et du budget, s'il y a lieu","Respect des valeurs culturelles et esthétiques"]},{n:2, desc:"Effectuer la recherche de mobilier, d'accessoires décoratifs et d'équipement", crit:["Recherche exhaustive d'information","Vérification pertinente auprès des fournisseurs","Visites de salles d'exposition, s'il y a lieu","Respect des lois, normes et règlements en vigueur","Détermination appropriée de la performance et du cycle de vie"]},{n:3, desc:"Sélectionner le mobilier, les accessoires décoratifs et l'équipement", crit:["Manifestation de créativité et de sensibilité esthétique","Choix judicieux en fonction de la faisabilité, des contraintes budgétaires et des aspects environnementaux","Considération juste des fiches techniques","Spécification judicieuse et harmonieuse"]},{n:4, desc:"Effectuer la consignation et le partage des données", crit:["Consignation claire des données","Utilisation appropriée de la terminologie","Exactitude des données","Partage efficace des données"]}]},
      {code:"026H", type:"obligatoire", enonce:"Élaborer une composition architecturale intérieure", contexte:"Pour la conception et l'élaboration d'un projet de design d'intérieur résidentiel; En tenant compte du mode de travail individuel ou en équipe; À partir d'un relevé architectural; À l'aide des normes et codes du bâtiment; À l'aide de logiciels de conception et de dessin assistés par ordinateur", elements:[{n:1, desc:"Analyser le projet", crit:["Examen complet des données du projet","Prise en considération des besoins et des contraintes","Identification des éléments architecturaux existants"]},{n:2, desc:"Planifier l'organisation de l'espace", crit:["Étude juste du cheminement des usagers","Détermination juste des zones fonctionnelles","Prise en considération des aspects ergonomiques"]},{n:3, desc:"Concevoir la composition architecturale intérieure", crit:["Application juste des principes de composition","Manifestation de créativité","Respect des normes et codes du bâtiment","Cohérence avec le concept de design"]},{n:4, desc:"Représenter la composition architecturale intérieure", crit:["Précision de la représentation graphique","Respect des conventions graphiques","Clarté des annotations et des cotations"]}]},
      {code:"026J", type:"obligatoire", enonce:"Concevoir des éléments sur mesure", contexte:"Pour la conception et l'élaboration d'éléments sur mesure d'un projet de design d'intérieur; En collaboration avec des artisans et des fabricants; À l'aide de logiciels de conception et de dessin assistés par ordinateur", elements:[{n:1, desc:"Analyser le projet et les besoins", crit:["Examen complet des données du projet","Identification des besoins en éléments sur mesure","Prise en considération des contraintes de fabrication"]},{n:2, desc:"Concevoir des éléments sur mesure", crit:["Application juste des principes de conception","Manifestation de créativité","Respect des contraintes de fabrication","Cohérence avec le concept de design"]},{n:3, desc:"Représenter les éléments sur mesure", crit:["Précision de la représentation graphique","Clarté des détails de fabrication","Respect des conventions graphiques"]}]},
      {code:"026K", type:"obligatoire", enonce:"Créer un concept de design d'intérieur résidentiel", contexte:"Pour la conception et l'élaboration d'un concept de design d'intérieur résidentiel; À partir d'une commande ou d'un mandat; En tenant compte du mode de travail individuel ou en équipe; À l'aide des technologies appropriées", elements:[{n:1, desc:"Analyser le mandat", crit:["Examen complet des données du mandat","Identification des besoins et des contraintes","Prise en considération du budget et de l'échéancier"]},{n:2, desc:"Élaborer le concept de design", crit:["Application juste des principes de design","Manifestation de créativité et d'originalité","Cohérence avec les besoins du client","Intégration harmonieuse des éléments du concept"]},{n:3, desc:"Représenter le concept de design", crit:["Précision de la représentation graphique","Clarté de la présentation du concept","Respect des conventions graphiques"]}]},
      {code:"027Y", type:"obligatoire", enonce:"Présenter un projet de design", contexte:"Pour la présentation d'un concept, d'un avant-projet ou d'un projet de design d'intérieur; À partir d'une commande ou d'un mandat; En utilisant les techniques de présentation appropriées", elements:[{n:1, desc:"Préparer la présentation", crit:["Organisation méthodique du contenu","Choix approprié des supports de présentation","Préparation soignée des documents"]},{n:2, desc:"Réaliser la présentation", crit:["Communication claire et structurée","Démonstration de la maîtrise du projet","Adaptation de la présentation à l'interlocuteur","Gestion efficace des questions"]},{n:3, desc:"Documenter la présentation", crit:["Consignation claire des commentaires et des décisions","Mise à jour des documents en fonction des commentaires reçus"]}]},
      {code:"027Z", type:"obligatoire", enonce:"Créer des concepts d'éclairage", contexte:"Pour la conception de l'éclairage d'un projet de design d'intérieur; À partir d'une commande ou d'un mandat; En collaboration avec des spécialistes en éclairage; À partir des lois, normes et codes en vigueur", elements:[{n:1, desc:"Analyser les besoins en éclairage", crit:["Identification juste des besoins fonctionnels et esthétiques en éclairage","Analyse des contraintes techniques et réglementaires","Prise en considération des aspects environnementaux"]},{n:2, desc:"Concevoir le concept d'éclairage", crit:["Application des principes d'éclairage","Manifestation de créativité","Cohérence avec le concept de design","Respect des normes et codes en vigueur"]},{n:3, desc:"Représenter le concept d'éclairage", crit:["Précision de la représentation graphique","Clarté des annotations","Intégration dans les plans d'exécution"]}]},
      {code:"029X", type:"obligatoire", enonce:"Produire des plans d'exécution", contexte:"Pour la production des plans d'exécution d'un projet de design d'intérieur; En tenant compte du mode de travail individuel ou en équipe; À partir d'un concept de design approuvé; À l'aide de logiciels de dessin assistés par ordinateur; À partir des lois, normes, codes et règlements en vigueur", elements:[{n:1, desc:"Planifier la production des plans d'exécution", crit:["Évaluation juste des plans à produire","Détermination juste des formats et des niveaux de détail requis","Établissement approprié d'une séquence d'exécution et d'un échéancier"]},{n:2, desc:"Produire les plans d'exécution", crit:["Précision des représentations graphiques","Respect des conventions graphiques","Clarté des annotations, des cotations et des légendes","Conformité avec les normes et codes du bâtiment","Cohérence des plans entre eux"]},{n:3, desc:"Vérifier et réviser les plans d'exécution", crit:["Vérification rigoureuse de la conformité des plans","Identification de toutes les erreurs et omissions","Corrections complètes et précises"]},{n:4, desc:"Diffuser les plans d'exécution", crit:["Organisation claire des dossiers de plans","Transmission appropriée des plans aux personnes concernées","Archivage méthodique des documents"]}]},
      {code:"029Y", type:"obligatoire", enonce:"Effectuer des activités relatives à la gestion de projet", contexte:"Pour la gestion d'un projet de design d'intérieur; En tenant compte du mode de travail individuel ou en équipe; En collaboration avec les personnes-ressources et la clientèle; À partir des outils de gestion de projet", elements:[{n:1, desc:"Planifier les activités du projet", crit:["Identification complète des activités du projet","Établissement réaliste de l'échéancier","Répartition appropriée des ressources"]},{n:2, desc:"Coordonner les activités du projet", crit:["Communication efficace avec les intervenants","Suivi régulier de l'avancement des travaux","Résolution appropriée des problèmes"]},{n:3, desc:"Contrôler la qualité du projet", crit:["Vérification de la conformité des travaux","Identification et résolution des non-conformités","Documentation des contrôles de qualité"]},{n:4, desc:"Clore le projet", crit:["Vérification de la satisfaction du client","Documentation complète du projet","Transmission appropriée des documents finaux"]}]},
      {code:"029Z", type:"obligatoire", enonce:"Planifier un aménagement pour un établissement commercial, industriel ou public", contexte:"Pour la planification d'un aménagement non résidentiel; À partir d'une commande ou d'un mandat; En tenant compte des normes d'accessibilité et de sécurité; À partir des lois, normes, codes et règlements en vigueur", elements:[{n:1, desc:"Analyser le mandat", crit:["Examen complet des données du mandat","Identification des besoins spécifiques au type d'établissement","Analyse des contraintes réglementaires"]},{n:2, desc:"Planifier l'organisation de l'espace", crit:["Application juste des normes d'accessibilité","Optimisation des flux de circulation","Respect des exigences de sécurité","Cohérence avec les besoins fonctionnels"]},{n:3, desc:"Représenter la planification de l'aménagement", crit:["Précision de la représentation graphique","Clarté des annotations et des cotations","Respect des conventions graphiques"]}]},
      {code:"02A0", type:"obligatoire", enonce:"Créer un concept de design d'intérieur pour un établissement commercial, industriel ou public", contexte:"Pour la conception et l'élaboration d'un concept de design d'intérieur non résidentiel; À partir d'une commande ou d'un mandat; En tenant compte des normes d'accessibilité et de sécurité; À l'aide des technologies appropriées", elements:[{n:1, desc:"Analyser le mandat", crit:["Examen complet des données du mandat","Identification des besoins et des contraintes","Prise en considération des aspects réglementaires"]},{n:2, desc:"Élaborer le concept de design", crit:["Application juste des principes de design","Manifestation de créativité et d'originalité","Cohérence avec les besoins du client et les contraintes réglementaires","Intégration harmonieuse des éléments du concept"]},{n:3, desc:"Représenter le concept de design", crit:["Précision de la représentation graphique","Clarté de la présentation du concept","Respect des conventions graphiques"]}]},
      {code:"029V", type:"obligatoire", enonce:"Promouvoir ses services", contexte:"Pour la promotion de ses services de design d'intérieur; En utilisant différents outils de promotion; En tenant compte des règles de l'éthique professionnelle", elements:[{n:1, desc:"Établir son profil professionnel", crit:["Identification juste de ses forces et compétences","Présentation soignée de ses réalisations","Cohérence du profil professionnel"]},{n:2, desc:"Développer des outils promotionnels", crit:["Choix approprié des outils promotionnels","Qualité de la présentation","Respect des règles de l'éthique professionnelle"]},{n:3, desc:"Réseauter", crit:["Participation active aux activités professionnelles","Établissement de relations professionnelles pertinentes","Maintien d'un réseau professionnel actif"]}]},
      {code:"02A1", type:"obligatoire", enonce:"Concevoir un projet de design d'intérieur (compétence synthèse)", contexte:"Pour la conception intégrale d'un projet de design d'intérieur; À partir d'une commande ou d'un mandat; En intégrant l'ensemble des compétences du programme", elements:[{n:1, desc:"Analyser le mandat de façon exhaustive", crit:["Analyse exhaustive des données du mandat","Identification complète des besoins et des contraintes","Prise en considération de tous les aspects du projet"]},{n:2, desc:"Concevoir le projet de design d'intérieur", crit:["Application intégrée de toutes les compétences du programme","Manifestation d'une démarche créative rigoureuse","Cohérence de l'ensemble du projet","Respect de toutes les normes et réglementations applicables"]},{n:3, desc:"Réaliser les livrables du projet", crit:["Qualité et complétude des livrables","Respect des délais et du budget","Conformité avec les exigences du mandat"]},{n:4, desc:"Présenter le projet", crit:["Communication claire et convaincante du projet","Qualité de la présentation","Démonstration de la maîtrise de l'ensemble du projet"]}]}
    ]
  }

];
// English translations patch — applied after PROGRAMMES is defined
// For 420.B0 and 570.G0, official EN translations exist online.
// For 574.C0 and 570.E0, these are working translations — mark for review.

const PROG_EN = {
  "420.B0": { titre: "Computer Science Technology" },  // official
  "574.C0": { titre: "3D Production and Image Synthesis" }, // translated
  "570.G0": { titre: "Graphic Design" },               // official
  "570.E0": { titre: "Interior Design Technology" },   // official (secteur 04 EN doc exists)
};

// Competency enonces in English are already in the data for 420.B0 and 570.G0.
// For 574.C0 and 570.E0 (French-only devis), we store EN translations here.
// These will be merged into the PROGRAMMES array at runtime.

const COMP_EN_574C0 = {
  '02LN': 'Adopt a professional attitude',
  '02LP': 'Use information technology',
  '02LQ': 'Apply research and problem-solving strategies',
  '02LR': 'Contribute to the deployment of art direction',
  '02LS': 'Collaborate in the organization and deployment of a production project',
  '02LT': 'Animate the components of a scene',
  '02LU': 'Generate images',
  '02LV': 'Process images',
  '02LW': 'Model accessories',
  '02LX': 'Reproduce materials and textures',
  '02LY': 'Produce control systems',
  '02LZ': 'Stage the project components',
  '02M0': 'Generate lighting',
  '02M1': 'Produce dynamic visual effects',
  '02M2': 'Composite images',
  '02M3': 'Participate in process improvement in a work environment',
  '02M4': 'Automate operations',
  '02M5': 'Develop environmental models',
  '02M6': 'Develop creature models',
  '02M7': 'Develop character models',
  '02M8': 'Reconstruct models',
  '02M9': 'Arrange the scenic space',
  '02MA': 'Choreograph the action',
  '02MB': 'Enhance visual communication',
  '02MC': 'Develop materials and textures',
  '02MD': 'Coordinate surface appearance',
  '02ME': 'Improve control systems',
  '02MF': 'Perform motion capture and data assignment',
  '02MG': 'Animate a character',
  '02MH': 'Recreate motion engineering',
  '02MJ': 'Develop animation sequences',
  '02MK': 'Reconstruct shapes and motions',
  '02ML': 'Create model clothing',
  '02MM': 'Simulate fluids',
  '02MN': 'Simulate crowds',
  '02MP': 'Create scenic and narrative lighting',
  '02MQ': 'Reconstruct lighting',
  '02MR': 'Composite stereoscopic images',
  '02MS': 'Composite a subject into an image sequence',
  '02MT': 'Develop sets'
};

const EL_EN_574C0 = {
  '02LN': {
    1: 'Explore the profession and its places of practice',
    2: 'Team work',
    3: 'Intervene in delicate situations'
  },
  '02LP': {
    1: 'Characterize computer tools',
    2: 'Regulate the work environment',
    3: 'Manage computer data',
    4: 'Manage tool performance'
  },
  '02LQ': {
    1: 'Define the object of the research and/or the problem',
    2: 'Collect information',
    3: 'Analyze information',
    4: 'Experiment with courses of action or solutions',
    5: 'Apply experimental results'
  },
  '02LR': {
    1: 'Characterize the artistic information related to the project',
    2: 'Experiment with artistic possibilities',
    3: 'Improve the artistic aspects of its production'
  },
  '02LS': {
    1: 'Determine the technical impacts of the project on production',
    2: 'Structure the work',
    3: 'Monitor production'
  },
  '02LT': {
    1: 'Establish a deployment plan',
    2: 'Plan an animation',
    3: 'Produce animation keys',
    4: 'Adjust movement dynamics',
    5: 'Deliver animations'
  },
  '02LU': {
    1: 'Establish a deployment plan',
    2: 'Control the camera and accessories',
    3: 'Save the images',
    4: 'Assemble a video sequence',
    5: 'Deliver images'
  },
  '02LV': {
    1: 'Establish a deployment plan',
    2: 'Modify image format',
    3: 'Adjust the color of the images',
    4: 'Isolate an element',
    5: 'Apply transformations to images or their components',
    6: 'Deliver images'
  },
  '02LW': {
    1: 'Establish a deployment plan',
    2: 'Generate model components',
    3: 'Assemble model components',
    4: 'Manage topology',
    5: 'Map UV coordinates',
    6: 'Deliver models'
  },
  '02LX': {
    1: 'Establish a deployment plan',
    2: 'Perfect UV coordinate mapping',
    3: 'Choose materials and textures',
    4: 'Deliver materials and textures'
  },
  '02LY': {
    1: 'Establish a deployment plan',
    2: 'Integrate control tools into systems',
    3: 'Manage model deformations',
    4: 'Deliver control systems'
  },
  '02LZ': {
    1: 'Establish a deployment plan',
    2: 'Draft staging',
    3: 'Confirm staging',
    4: 'Share the staging'
  },
  '02M0': {
    1: 'Establish a deployment plan',
    2: 'Light the subject',
    3: 'Light an environment',
    4: 'Manage shadows',
    5: 'Deliver lighting'
  },
  '02M1': {
    1: 'Establish a deployment plan',
    2: 'Represent component properties',
    3: 'Control forces and movements',
    4: 'Control collisions',
    5: 'Deliver effects'
  },
  '02M2': {
    1: 'Establish a deployment plan',
    2: 'Assemble images',
    3: 'Integrate additional elements',
    4: 'Adjust images',
    5: 'Reproduce the visual characteristics of the camera',
    6: 'Deliver images'
  },
  '02M3': {
    1: 'Examine performance',
    2: 'Carry out monitoring activities',
    3: 'Propose the integration of innovations',
    4: 'Perfect work processes'
  },
  '02M4': {
    1: 'Propose solutions',
    2: 'Structure an algorithm',
    3: 'Implement an algorithm',
    4: 'Create a user interface',
    5: 'Refine an algorithm',
    6: 'Contribute to the deployment of the solution'
  },
  '02M5': {
    1: 'Implement the deployment plan',
    2: 'Detail the terrain',
    3: 'Generate architectural structures',
    4: 'Generate vegetation',
    5: 'Refine the models'
  },
  '02M6': {
    1: 'Implement the deployment plan',
    2: 'Generate the morphological model',
    3: 'Generate the anatomical model',
    4: 'Refine the models'
  },
  '02M7': {
    1: 'Implement the deployment plan',
    2: 'Structure the models',
    3: 'Define the model appearance',
    4: 'Refine the characters'
  },
  '02M8': {
    1: 'Implement the deployment plan',
    2: 'Digitize images and reference points',
    3: 'Recreate the volumes',
    4: 'Refine the models'
  },
  '02M9': {
    1: 'Implement the deployment plan',
    2: 'Arrange the natural space',
    3: 'Arrange rural and urban spaces',
    4: 'Populate the space',
    5: 'Furnish the space',
    6: 'Refine the arrangement'
  },
  '02MA': {
    1: 'Implement the deployment plan',
    2: 'Develop the chain of events',
    3: 'Locate action components',
    4: 'Refine movements',
    5: 'Control the chain of events',
    6: 'Refine the choreography'
  },
  '02MB': {
    1: 'Implement a deployment plan',
    2: 'Adjust the atmosphere',
    3: 'Validate spatiotemporal location',
    4: 'Direct the gaze',
    5: 'Validate the connection between planes',
    6: 'Refine visual communication'
  },
  '02MC': {
    1: 'Implement a deployment plan',
    2: 'Create a material',
    3: 'Detail textures',
    4: 'Refine the appearance of the surfaces'
  },
  '02MD': {
    1: 'Implement the deployment plan',
    2: 'Evaluate surface appearance',
    3: 'Simulate physical behaviour of light on surfaces',
    4: 'Harmonize surface appearance'
  },
  '02ME': {
    1: 'Implement a deployment plan',
    2: 'Study the control systems',
    3: 'Validate model transformations',
    4: 'Refine control tools',
    5: 'Validate the usability of control systems'
  },
  '02MF': {
    1: 'Implement a deployment plan',
    2: 'Prepare a motion-capture session',
    3: 'Ensure data validity',
    4: 'Assign data',
    5: 'Produce animation clips'
  },
  '02MG': {
    1: 'Implement a deployment plan',
    2: 'Represent  body language and facial expressions',
    3: 'Validate lip synchronization',
    4: 'Refine the animation'
  },
  '02MH': {
    1: 'Implement a deployment plan',
    2: 'Imitate the functioning of a mechanical or biological system',
    3: 'Adjust movements',
    4: 'Refine movements'
  },
  '02MJ': {
    1: 'Implement the deployment plan',
    2: 'Orchestrate animation sequences',
    3: 'Synchronize sequence elements',
    4: 'Refine sequences'
  },
  '02MK': {
    1: 'Implement the deployment plan',
    2: 'Analyze reference data',
    3: 'Reproduce shapes and movements',
    4: 'Refine the reconstruction'
  },
  '02ML': {
    1: 'Implement the deployment plan',
    2: 'Model the clothing',
    3: 'Simulate clothing behaviour',
    4: 'Refine the clothing'
  },
  '02MM': {
    1: 'Implement a deployment plan',
    2: 'Produce point clouds',
    3: 'Reconstruct surfaces',
    4: 'Refine the effect'
  },
  '02MN': {
    1: 'Implement a deployment plan',
    2: 'Develop a behavioral system',
    3: 'Parameterize the simulation',
    4: 'Refine the effect'
  },
  '02MP': {
    1: 'Implement the deployment plan',
    2: 'Design scenic lighting',
    3: 'Set up lighting effects',
    4: 'Refine the lighting'
  },
  '02MQ': {
    1: 'Implement the deployment plan',
    2: 'Analyze reference lighting',
    3: 'Reproduce the lighting',
    4: 'Refine the reconstructed lighting'
  },
  '02MR': {
    1: 'Implement the deployment plan',
    2: 'Prepare stereoscopic images',
    3: 'Composite stereoscopic images',
    4: 'Verify and deliver images'
  },
  '02MS': {
    1: 'Implement the deployment plan',
    2: 'Prepare filmed images',
    3: 'Integrate the subject into the synthetic scene',
    4: 'Refine the compositing'
  },
  '02MT': {
    1: 'Implement the deployment plan',
    2: 'Design the set structure',
    3: 'Assemble set elements',
    4: 'Refine the sets'
  }
};

const CRIT_EN_574C0 = {
  '02LN__1': {
    1: 'Adequate characterization of work environments related to the practice of the profession',
    2: 'Fair recognition of the legal framework related to the practice of the profession',
    3: 'Fair recognition of tasks and working conditions related to the practice of the profession',
    4: 'Adequate characterization of professional behaviors'
  },
  '02LN__2': {
    1: 'Respect for people, roles, responsibilities and rules of operation',
    2: 'Adapted communication',
    3: 'Constant contribution to maintaining a good work environment',
    4: 'Careful presentation of one\'s professional profile and achievements',
    5: 'Respectful exchange of ideas and constructive criticism'
  },
  '02LN__3': {
    1: 'Fair interpretation of a situation',
    2: 'Fair assessment of the interventions to be carried out',
    3: 'Situationally appropriate interventions',
    4: 'Judicious recourse to another person, if necessary'
  },
  '02LP__1': {
    1: 'Accurate specification of equipment components',
    2: 'Thorough differentiation of computer applications'
  },
  '02LP__2': {
    1: 'Proper control of environmental irritants',
    2: 'Correct workstation adjustment ',
    3: 'Appropriate customization of the software interface',
    4: 'Correct application of good ergonomic practices'
  },
  '02LP__3': {
    1: 'Detailed characterization of data',
    2: 'Methodical classification of files',
    3: 'Appropriate versioning of files',
    4: 'Methodical application of filing and archiving procedures'
  },
  '02LP__4': {
    1: 'Review of tool performance based on the tasks to be performed',
    2: 'Accurate analysis of tool performance',
    3: 'Configuration of equipment and applications based on the tasks to be performed or tool updates',
    4: 'Informed use of the technical support team, if necessary'
  },
  '02LQ__1': {
    1: 'Accurate identification of needs and constraints',
    2: 'Accurate problem identification'
  },
  '02LQ__2': {
    1: 'Detailed exploration of sources of inspiration and/or information',
    2: 'Adequate identification of potential problem sources',
    3: 'Complete collection of existing information'
  },
  '02LQ__3': {
    1: 'Relevance of collected information',
    2: 'Methodical classification',
    3: 'Careful examination',
    4: 'Detailed characterization',
    5: 'Consistent prioritization'
  },
  '02LQ__4': {
    1: 'Accurate determination of courses of action or solution',
    2: 'Efficient testing of courses of action or solution',
    3: 'Accurate analysis of results'
  },
  '02LQ__5': {
    1: 'Appropriate recommendation of courses of action or solution',
    2: 'Methodical application of courses of action or selected solutions',
    3: 'Detailed monitoring of results'
  },
  '02LR__1': {
    1: 'Appropriate research strategy adoption',
    2: 'Accurate identification of representative and distinctive information of art direction',
    3: 'Careful examination of the information'
  },
  '02LR__2': {
    1: 'Adapted implementation of creativity techniques',
    2: 'Correct use of visual language elements'
  },
  '02LR__3': {
    1: 'Correct comparison of contributions to art direction',
    2: 'Adequate problem solving'
  },
  '02LS__1': {
    1: 'Appropriate research strategy adoption',
    2: 'Identification of the production process according to the sector of activity, the niche of expertise and the type of project',
    3: 'Classification of technical information according to the fields of expertise',
    4: 'Accurate characterization of technical aspects and impacts'
  },
  '02LS__2': {
    1: 'Complete list of tasks to be performed',
    2: 'Compliant choice of production methods',
    3: 'Overall production time estimation',
    4: 'Consistent scheduling of operations'
  },
  '02LS__3': {
    1: 'Prioritization of tasks according to established deadlines',
    2: 'Proper checklist use',
    3: 'Proper problem solving'
  },
  '02LT__1': {
    1: 'Complete inventory of animation needs and constraints',
    2: 'Exhaustive analysis of information and references',
    3: 'Adequate recognition of movement phases and characteristics',
    4: 'Considerate choice of animation strategy'
  },
  '02LT__2': {
    1: 'Accurate identification of moment for each pose',
    2: 'Accurate determination of the visual characteristics of each pose'
  },
  '02LT__3': {
    1: 'Precision of element positioning and orientation',
    2: 'Trajectory compliance',
    3: 'Methodical adjustment of other parameters',
    4: 'Orderly recording of animation keys'
  },
  '02LT__4': {
    1: 'Precise control of  movement duration',
    2: 'Efficient curve manager usage',
    3: 'Adequate reproduction of movement characteristics',
    4: 'Relevant addition of intermediate animation keys'
  },
  '02LT__5': {
    1: 'Evaluation of animations according to established standards',
    2: 'Appropriate corrections, if applicable',
    3: 'Compliance of filing and archiving of animations'
  },
  '02LU__1': {
    1: 'Complete survey of needs and constraints related to the images to be produced',
    2: 'In-depth analysis of information, images and references',
    3: 'Precise subject identification',
    4: 'Consistent choice of point of view',
    5: 'Considerate choice of image generation strategy'
  },
  '02LU__2': {
    1: 'Effective adjustment of accessories',
    2: 'Accurate framing of the subject',
    3: 'Careful image composition',
    4: 'Accurate camera setting',
    5: 'Careful execution of movements'
  },
  '02LU__3': {
    1: 'Parameter selection according to required visual quality',
    2: 'Capture images according to needs',
    3: 'Optimization of rendering times',
    4: 'Production of rendering passes according to needs'
  },
  '02LU__4': {
    1: 'Complete image collection',
    2: 'Informed positioning of images on the timeline',
    3: 'Compliant connections between shots',
    4: 'Relevant addition of transitions, if any',
    5: 'Coherent addition of an audio track, as appropriate'
  },
  '02LU__5': {
    1: 'Evaluate images according to established standards',
    2: 'Appropriate corrections, if applicable',
    3: 'Compliance of image deposit and archiving'
  },
  '02LV__1': {
    1: 'Complete survey of needs and constraints related to the images to be processed',
    2: 'In-depth analysis of information, images and references',
    3: 'Precise identification of necessary processing',
    4: 'Considerate choice of image processing strategy'
  },
  '02LV__2': {
    1: 'Precise image cropping',
    2: 'Accurate color space conversion',
    3: 'Accurate image transcoding'
  },
  '02LV__3': {
    1: 'Accurate determination of dynamic range',
    2: 'Careful color correction'
  },
  '02LV__4': {
    1: 'Careful production of mattes',
    2: 'Appropriate use of masks'
  },
  '02LV__5': {
    1: 'Relevance of transformations',
    2: 'Effective execution of techniques',
    3: 'Careful application of filters and effects'
  },
  '02LV__6': {
    1: 'Evaluate images according to established standards',
    2: 'Appropriate corrections, if applicable',
    3: 'Compliance of image deposit and archiving'
  },
  '02LW__1': {
    1: 'Complete survey of needs and constraints related to modeling',
    2: 'Exhaustive analysis of information and references',
    3: 'Accurate determination of the characteristics of each volume',
    4: 'Considerate choice of modeling strategy'
  },
  '02LW__2': {
    1: 'Precise reference positioning in terms of modeling',
    2: 'Careful implementation of modeling techniques',
    3: 'Rigorous transposition of references into volumes',
    4: 'Careful refinement of volumes',
    5: 'Adequate management of smoothing groups'
  },
  '02LW__3': {
    1: 'Precise adjustment of components',
    2: 'Logical grouping of components'
  },
  '02LW__4': {
    1: 'Proper adjustment of polygons, segments and vertices',
    2: 'Conversion of resolution, as needed'
  },
  '02LW__5': {
    1: 'Optimal establishment of seams',
    2: 'Compliant deployment of volumes into 2D objects',
    3: 'Proper management of UV boards'
  },
  '02LW__6': {
    1: 'Evaluation of models based on established standards',
    2: 'Appropriate corrections, if applicable',
    3: 'Rigorous model finalization',
    4: 'Compliance of filing and archiving of models'
  },
  '02LX__1': {
    1: 'Complete survey of surface needs and constraints',
    2: 'Exhaustive analysis of information and references',
    3: 'Accurate determination of the visual characteristics of materials and textures',
    4: 'Considerate choice of surfacing strategy'
  },
  '02LX__2': {
    1: 'Careful examination of mapping',
    2: 'Exhaustive correction of problems'
  },
  '02LX__3': {
    1: 'Appropriate tree structure management',
    2: 'Credible imitation of visual characteristics of materials',
    3: 'Careful application of textures',
    4: 'Relevance of details',
    5: 'Overall harmonization of surface appearance'
  },
  '02LX__4': {
    1: 'Evaluation of materials and textures according to established standards',
    2: 'Appropriate corrections, if applicable',
    3: 'Compliance of the deposit and archiving of the textured model, its materials and textures'
  },
  '02LY__1': {
    1: 'Complete survey of needs and constraints related to surfaces',
    2: 'Exhaustive analysis of information and references',
    3: 'Exhaustive analysis of the structure of the model and its accessories',
    4: 'Considerate choice of production strategy'
  },
  '02LY__2': {
    1: 'Precise adjustment of the model pivot points',
    2: 'Complete generation of control tools',
    3: 'Rigorous configuration of control tools',
    4: 'Control tool hierarchy based on system structure',
    5: 'Rigorous development of system ergonomics'
  },
  '02LY__3': {
    1: 'Adequate association of a model with control tools',
    2: 'Rigorous adjustment of deformations'
  },
  '02LY__4': {
    1: 'Test protocol compliance',
    2: 'Evaluation of control systems based on established standards',
    3: 'Appropriate corrections, if applicable',
    4: 'Compliance of the deposit and archiving of control systems'
  },
  '02LZ__1': {
    1: 'Complete inventory of needs and constraints related to staging',
    2: 'Exhaustive analysis of information and references',
    3: 'Considerate choice of staging strategy'
  },
  '02LZ__2': {
    1: 'Prudent stage space organization',
    2: 'Functional establishment of initial lighting',
    3: 'Careful placement of components',
    4: 'Appropriate spatial and temporal management of actions and events',
    5: 'Careful placement of cameras'
  },
  '02LZ__3': {
    1: 'Evaluation of staging based on narrative and technical direction',
    2: 'Appropriate corrections, if applicable'
  },
  '02LZ__4': {
    1: 'Compliance of filing and archiving of staging',
    2: 'Compliant sharing of staging with contributors'
  },
  '02M0__1': {
    1: 'Complete list of lighting needs and constraints',
    2: 'Exhaustive analysis of information and references',
    3: 'Considerate choice of lighting strategy'
  },
  '02M0__2': {
    1: 'Correct enhancement of volumes and materials',
    2: 'Appropriate generation of depth effect between subject and background'
  },
  '02M0__3': {
    1: 'Correct highlighting of elements in the environment',
    2: 'Appropriate generation of physical phenomena related to light',
    3: 'Credible representation of the moment and phenomena'
  },
  '02M0__4': {
    1: 'Judicious positioning of shadows',
    2: 'Consistent generation of penumbra',
    3: 'Careful control of density',
    4: 'Appropriate adjustment of color'
  },
  '02M0__5': {
    1: 'Evaluation of lighting according to established standards',
    2: 'Appropriate corrections, if applicable',
    3: 'Careful production of renderings',
    4: 'Compliance of filing and archiving of lighting and renderings'
  },
  '02M1__1': {
    1: 'Complete inventory of needs and constraints related to effects',
    2: 'Exhaustive analysis of information and references',
    3: 'Accurate determination of the properties of the materials involved in the effects',
    4: 'Considerate choice of production strategy'
  },
  '02M1__2': {
    1: 'Credible imitation of non-characteristic properties of matter',
    2: 'Faithful simulation of physical and chemical properties of materials'
  },
  '02M1__3': {
    1: 'Conformity of the intensity and direction of forces to requirements',
    2: 'Consistent determination of the trajectory and speed of motions'
  },
  '02M1__4': {
    1: 'Accurate collision detection',
    2: 'Logical outcome of collisions'
  },
  '02M1__5': {
    1: 'Evaluate effects according to established standards',
    2: 'Appropriate corrections, if applicable',
    3: 'Careful production of renderings',
    4: 'Compliance of filing and archiving of effects and renderings'
  },
  '02M2__1': {
    1: 'Complete statement of needs and constraints related to composition',
    2: 'Exhaustive analysis of information and references',
    3: 'Considerate choice of compositing strategy'
  },
  '02M2__2': {
    1: 'Efficient management of images and layers',
    2: 'Compliant application of blending mode',
    3: 'Appropriate alpha channel management'
  },
  '02M2__3': {
    1: 'Relevant addition of project components',
    2: 'Relevant addition of atmospheric and physical phenomena',
    3: 'Relevant addition of lighting effects',
    4: 'Credibility of additions'
  },
  '02M2__4': {
    1: 'Logical setting of intensity or opacity',
    2: 'Careful treatment of color',
    3: 'Judicious use of masks',
    4: 'Careful harmonization of artistic and technical characteristics'
  },
  '02M2__5': {
    1: 'Careful control of blur types, brightness and saturation',
    2: 'Faithful setting of distortions, deformations and digital noise',
    3: 'Credibility of echoes and glare'
  },
  '02M2__6': {
    1: 'Evaluate images according to established standards',
    2: 'Appropriate corrections, if applicable',
    3: 'Careful production of renderings',
    4: 'Compliance of filing and archiving of images and renderings'
  },
  '02M3__1': {
    1: 'Regular analysis of productivity',
    2: 'Accurate establishment of improvement needs'
  },
  '02M3__2': {
    1: 'Relevant record of innovations and new developments related to the field of expertise or the task to be accomplished',
    2: 'Accurate identification of trends in the profession'
  },
  '02M3__3': {
    1: 'Targeted experimentation of scripts, plug-ins, software or other innovations',
    2: 'Detailed performance analysis of each innovation',
    3: 'Accurate identification of impacts of innovations on production',
    4: 'Detailed presentation of the selected innovations'
  },
  '02M3__4': {
    1: 'Informed segmentation of work',
    2: 'Adapted automation of recurring operations',
    3: 'Efficient restructuring of operations',
    4: 'Informed use of scripts and plug-ins'
  },
  '02M4__1': {
    1: 'Accurate identification of automation needs',
    2: 'In-depth analysis of needs and constraints',
    3: 'Relevance of solutions'
  },
  '02M4__2': {
    1: 'Detailed plan development',
    2: 'Accurate determination of constants and variables'
  },
  '02M4__3': {
    1: 'Accurate definition of constants and variables',
    2: 'Precise coding of instructions',
    3: 'Careful implementation of conditions and loops',
    4: 'Thorough debugging'
  },
  '02M4__4': {
    1: 'Appropriate choice of graphic elements for display and input',
    2: 'Appropriate ergonomics of graphicaL elements',
    3: 'Correct parameterization of graphical elements',
    4: 'Thorough debugging'
  },
  '02M4__5': {
    1: 'Considerate addition of code comments',
    2: 'Significant solution enrichment'
  },
  '02M4__6': {
    1: 'Methodical preparation for the deployment of the solution',
    2: 'Appropriate technical support'
  },
  '02M5__1': {
    1: 'Relevance of the deployment plan',
    2: 'Conformity with project parameters'
  },
  '02M5__2': {
    1: 'Precision of terrain details',
    2: 'Consistency with visual references'
  },
  '02M5__3': {
    1: 'Accuracy of architectural structures',
    2: 'Respect for the artistic style'
  },
  '02M5__4': {
    1: 'Variety and realism of vegetation',
    2: 'Resource optimization'
  },
  '02M5__5': {
    1: 'Visual quality of final models',
    2: 'Conformity with project specifications'
  },
  '02M6__2': {
    1: 'Fidelity to creature description',
    2: 'Proportion consistency'
  },
  '02M6__3': {
    1: 'Anatomical precision',
    2: 'Compatibility with rigging constraints'
  },
  '02M6__4': {
    1: 'Visual quality of the result',
    2: 'Compliance with technical constraints'
  },
  '02M7__2': {
    1: 'Structural consistency with the concept',
    2: 'Topology quality'
  },
  '02M7__3': {
    1: 'Appearance fidelity to artistic concept',
    2: 'Character readability'
  },
  '02M7__4': {
    1: 'Final visual quality',
    2: 'Compliance with production constraints'
  },
  '02M8__2': {
    1: 'Digitization precision',
    2: 'Reference point quality'
  },
  '02M8__3': {
    1: 'Fidelity of reconstructed volumes',
    2: 'Consistency with the reference source'
  },
  '02M8__4': {
    1: 'Visual quality of final models',
    2: 'Conformity with project needs'
  },
  '02M9__2': {
    1: 'Natural space consistency with concept'
  },
  '02M9__3': {
    1: 'Accuracy of rural and urban environments'
  },
  '02M9__4': {
    1: 'Relevance of population'
  },
  '02M9__5': {
    1: 'Furniture suitability to narrative context'
  },
  '02M9__6': {
    1: 'Overall visual quality'
  },
  '02MA__2': {
    1: 'Narrative consistency of the event chain'
  },
  '02MA__3': {
    1: 'Precision of component placement'
  },
  '02MA__4': {
    1: 'Quality and fluidity of movements'
  },
  '02MA__5': {
    1: 'Temporal consistency of the sequence'
  },
  '02MA__6': {
    1: 'Final visual quality of the choreography'
  },
  '02MB__1': {
    1: 'Clear articulation of production goals',
    2: 'Establishing a correct operational structure',
    3: 'Adequate monitoring of operation progress'
  },
  '02MB__2': {
    1: 'Faithful representation of the psychology of characters and atmosphere'
  },
  '02MB__3': {
    1: 'Informed determination of indicators and visual cues',
    2: 'Careful implementation'
  },
  '02MB__4': {
    1: 'Informed determination of eye-guiding techniques',
    2: 'Accurate adaptation of techniques'
  },
  '02MB__5': {
    1: 'Careful implementation of connections'
  },
  '02MB__6': {
    1: 'Considerate addition of details and elements',
    2: 'Complete elimination of communication nuisances'
  },
  '02MC__1': {
    1: 'Clear articulation of production goals',
    2: 'Establishing a correct operational structure',
    3: 'Properly monitoring the progress of operations'
  },
  '02MC__2': {
    1: 'Establishing a correct tree structure',
    2: 'Establishing a correct reaction of surfaces to light'
  },
  '02MC__3': {
    1: 'Reasonable color palette definition',
    2: 'Logical adjustment of mapping',
    3: 'Consistency of parameter adjustment'
  },
  '02MC__4': {
    1: 'Adding visual features according to narrative needs',
    2: 'Careful development of surface appearance'
  },
  '02MD__2': {
    1: 'Relevance of the evaluation'
  },
  '02MD__3': {
    1: 'Accuracy of the light simulation',
    2: 'Realism of the surface rendering'
  },
  '02MD__4': {
    1: 'Visual coherence of all surfaces',
    2: 'Compliance with artistic direction'
  },
  '02ME__1': {
    1: 'Clear articulation of production goals',
    2: 'Establishing a correct operational structure',
    3: 'Properly monitoring the progress of operations'
  },
  '02ME__2': {
    1: 'Exhaustive testing of the control tools',
    2: 'Thorough reverse engineering of the control systems'
  },
  '02ME__3': {
    1: 'Optimal  model metamorphosis',
    2: 'Careful control of deformations'
  },
  '02ME__4': {
    1: 'Considerate addition of switches, pivot points and control panels',
    2: 'Optimal setting of manipulation limits',
    3: 'Optimal effect curve adjustment'
  },
  '02ME__5': {
    1: 'Exhaustive testing of control systems',
    2: 'Appropriate corrections, if applicable'
  },
  '02MF__1': {
    1: 'Clear articulation of production goals',
    2: 'Establishing a correct operational structure',
    3: 'Proper monitoring of the progress of operations'
  },
  '02MF__2': {
    1: 'Careful installation of equipment',
    2: 'Rigorous direction of actresses and actors for the calibration of the equipment',
    3: 'Precise calibration of equipment',
    4: 'Careful capture skeleton implementation'
  },
  '02MF__3': {
    1: 'Optimal capture of images, if necessary',
    2: 'Methodical recording of movement data',
    3: 'Rigorous verification of recorded data'
  },
  '02MF__4': {
    1: 'Methodical management',
    2: 'Careful cleaning',
    3: 'Precise transcoding',
    4: 'Optimal adjustment of data to control systems'
  },
  '02MF__5': {
    1: 'Compliance of filing and archiving of clips'
  },
  '02MG__1': {
    1: 'Clear articulation of production goals',
    2: 'Establishing a correct operational structure',
    3: 'Adequate monitoring of operation progress'
  },
  '02MG__2': {
    1: 'Accuracy of gestures',
    2: 'Comprehensibility of psychological traits and emotions'
  },
  '02MG__3': {
    1: 'Accuracy of jaw movements and visemes',
    2: 'Constant synchronization with the soundtrack'
  },
  '02MG__4': {
    1: 'Considerate addition of details and information',
    2: 'Careful development of poses and movement interpolations'
  },
  '02MH__1': {
    1: 'Clear articulation of production goals',
    2: 'Establishing a correct operational structure',
    3: 'Adequate monitoring of operation progress'
  },
  '02MH__2': {
    1: 'Respect for joint limits and movement constraints',
    2: 'Accurate representation of the flexibility and elasticity of the system parts',
    3: 'Complete adequacy of the posture'
  },
  '02MH__3': {
    1: 'Accurate representation of the deployed energy',
    2: 'Respect for the direction and intensity of the forces present',
    3: 'Continuous adjustment of model balance'
  },
  '02MH__4': {
    1: 'Considerate addition of details',
    2: 'Careful development of mechanics'
  },
  '02MJ__2': {
    1: 'Orchestration consistency',
    2: 'Respect for narrative pacing'
  },
  '02MJ__3': {
    1: 'Synchronization precision',
    2: 'Audiovisual consistency'
  },
  '02MJ__4': {
    1: 'Visual quality of final sequences'
  },
  '02MK__2': {
    1: 'Relevance of data analysis'
  },
  '02MK__3': {
    1: 'Fidelity of reconstructed shapes',
    2: 'Precision of reconstructed movements'
  },
  '02MK__4': {
    1: 'Visual quality of the reconstruction'
  },
  '02ML__2': {
    1: 'Fidelity to the clothing concept',
    2: 'Modelling quality'
  },
  '02ML__3': {
    1: 'Realism of simulated behaviour',
    2: 'Simulation stability'
  },
  '02ML__4': {
    1: 'Final visual quality of clothing'
  },
  '02MM__1': {
    1: 'Clear articulation of production goals',
    2: 'Establishing a correct operational structure',
    3: 'Adequate monitoring of operation progress'
  },
  '02MM__2': {
    1: 'Reasonable generation zone delimitation ',
    2: 'Rigorous control of dynamic and fluidic parameters of the simulation'
  },
  '02MM__3': {
    1: 'Optimization of a point cloud',
    2: 'Appropriate determination of mesh density',
    3: 'Careful application of materials'
  },
  '02MM__4': {
    1: 'Considerate addition of details and components',
    2: 'Carefully fine-tune appearance of volumes, surfaces and movements'
  },
  '02MN__1': {
    1: 'Clear articulation of production goals',
    2: 'Establishing a correct operational structure',
    3: 'Adequate monitoring of operation progress'
  },
  '02MN__2': {
    1: 'Consistent consideration of factors influencing behaviors',
    2: 'Appropriate creation of a behavioral algorithm'
  },
  '02MN__3': {
    1: 'Complete update of model and animation banks',
    2: 'Faithful establishment of physical properties',
    3: 'Rigorous control of simulation parameters'
  },
  '02MN__4': {
    1: 'Considerate addition of details and variations',
    2: 'Careful development of behaviors, movements and physical properties'
  },
  '02MP__2': {
    1: 'Lighting consistency with narration',
    2: 'Aesthetic quality of lighting'
  },
  '02MP__3': {
    1: 'Effectiveness of lighting effects',
    2: 'Integration of effects into the scene'
  },
  '02MP__4': {
    1: 'Visual quality of final lighting'
  },
  '02MQ__2': {
    1: 'Precision of reference analysis'
  },
  '02MQ__3': {
    1: 'Fidelity of the reproduction',
    2: 'Consistency with the original light source'
  },
  '02MQ__4': {
    1: 'Visual quality of reconstructed lighting'
  },
  '02MR__2': {
    1: 'Accuracy of image preparation'
  },
  '02MR__3': {
    1: 'Quality of the stereoscopic compositing',
    2: 'Correct alignment of left and right views'
  },
  '02MR__4': {
    1: 'Conformity with delivery specifications'
  },
  '02MS__2': {
    1: 'Quality of filmed image preparation'
  },
  '02MS__3': {
    1: 'Visual consistency of the integration',
    2: 'Matching with scene lighting'
  },
  '02MS__4': {
    1: 'Final visual quality of the compositing'
  },
  '02MT__2': {
    1: 'Set consistency with artistic direction',
    2: 'Technical feasibility of the structure'
  },
  '02MT__3': {
    1: 'Quality of element assembly',
    2: 'Compliance with production constraints'
  },
  '02MT__4': {
    1: 'Final visual quality of the sets'
  }
};

const COMP_EN_570E0 = {
  "022A": "Analyze the work function",
  "022B": "Integrate historical and artistic movements into interior design",
  "022C": "Develop ideas",
  "022D": "Make sketches",
  "022E": "Model objects and spaces",
  "022F": "Perform computer-aided drawings",
  "022G": "Interact with clients, resource persons and co-workers",
  "029H": "Create colour ambiances",
  "022H": "Propose finishes and materials for a project",
  "022J": "Specify serial furniture, decorative accessories and equipment for a project",
  "026H": "Develop an interior architectural composition",
  "026J": "Design custom elements",
  "026K": "Create a residential interior design concept",
  "027Y": "Present a design project",
  "027Z": "Create lighting concepts",
  "029X": "Produce execution drawings",
  "029Y": "Carry out project management activities",
  "029Z": "Plan a layout for a commercial, industrial or public establishment",
  "02A0": "Create an interior design concept for a commercial, industrial or public establishment",
  "029V": "Promote services",
  "02A1": "Design an interior design project"
};

const EL_EN_570E0 = {
  "022A": { 1:"Characterize the work function and its conditions of practice", 2:"Examine the tasks of the work function", 3:"Examine the skills and behaviours required for the work function", 4:"Characterize the health and safety aspects related to the profession", 5:"Examine the legislation specific to the practice of the profession", 6:"Explore business opportunities in the interior design field" },
  "022B": { 1:"Explore artistic movements related to the visual arts, applied arts, styles, crafts and architecture", 2:"Compare the characteristics of each artistic period", 3:"Associate major artistic movements with corresponding social movements", 4:"Adapt artistic movements to an interior design concept" },
  "022C": { 1:"Prepare conceptual research", 2:"Carry out ideation", 3:"Identify conceptual directions", 4:"Represent selected ideas" },
  "022D": { 1:"Organize work", 2:"Reproduce an object through observational drawing", 3:"Concretize an idea through a sketch", 4:"Finalize sketches" },
  "022E": { 1:"Plan the work", 2:"Create object and space models", 3:"Produce 2D and 3D views", 4:"Dimension and annotate drawings", 5:"Share a model and publish views", 6:"Print views" },
  "022F": { 1:"Plan the work", 2:"Execute drawings", 3:"Verify work quality", 4:"Publish drawings", 5:"Print drawings" },
  "022G": { 1:"Establish professional relationships", 2:"Communicate with colleagues, suppliers and clients", 3:"Advise clients", 4:"Work in a team", 5:"Manage stress" },
  "029H": { 1:"Analyze project data", 2:"Compose colour harmonies", 3:"Solve colour-related problems" },
  "022H": { 1:"Analyze the request", 2:"Research finishes, materials and elements", 3:"Select finishes and materials", 4:"Calculate quantities and costs of finishes, materials and elements", 5:"Record and share data" },
  "022J": { 1:"Analyze the request", 2:"Research furniture, decorative accessories and equipment", 3:"Select furniture, decorative accessories and equipment", 4:"Record and share data" },
  "026H": { 1:"Analyze the project", 2:"Plan space organization", 3:"Design the interior architectural composition", 4:"Represent the interior architectural composition" },
  "026J": { 1:"Analyze the project and needs", 2:"Design custom elements", 3:"Represent the custom elements" },
  "026K": { 1:"Analyze the mandate", 2:"Develop the design concept", 3:"Represent the design concept" },
  "027Y": { 1:"Prepare the presentation", 2:"Deliver the presentation", 3:"Document the presentation" },
  "027Z": { 1:"Analyze lighting needs", 2:"Design the lighting concept", 3:"Represent the lighting concept" },
  "029X": { 1:"Plan the production of execution drawings", 2:"Produce execution drawings", 3:"Verify and revise execution drawings", 4:"Distribute execution drawings" },
  "029Y": { 1:"Plan project activities", 2:"Coordinate project activities", 3:"Control project quality", 4:"Close the project" },
  "029Z": { 1:"Analyze the mandate", 2:"Plan space organization", 3:"Represent the layout plan" },
  "02A0": { 1:"Analyze the mandate", 2:"Develop the design concept", 3:"Represent the design concept" },
  "029V": { 1:"Establish a professional profile", 2:"Develop promotional tools", 3:"Network" },
  "02A1": { 1:"Comprehensively analyze the mandate", 2:"Design the interior design project", 3:"Produce project deliverables", 4:"Present the project" },
};

// Merge EN translations into PROGRAMMES at runtime






function applyEnTranslations() {
  PROGRAMMES.forEach(prog => {
    if (PROG_EN[prog.code]) prog.titre_en = PROG_EN[prog.code].titre;

    // 574.C0 — French is authoritative; patch in EN translations
    if (prog.code === "574.C0") {
      prog.competences.forEach(comp => {
        if (COMP_EN_574C0[comp.code]) comp.enonce_en = COMP_EN_574C0[comp.code];
        const elMap   = EL_EN_574C0[comp.code]   || {};
        const critMap = CRIT_EN_574C0;
        comp.elements && comp.elements.forEach(el => {
          if (elMap[el.n]) el.desc_en = elMap[el.n];
          const critKey = comp.code + "__" + el.n;
          const cm = critMap[critKey] || {};
          if (Object.keys(cm).length) {
            el.crit_en = el.crit.map((c, i) => cm[i+1] || c);
          }
        });
      });
    }

    // 570.E0 — French is authoritative; patch in EN translations
    if (prog.code === "570.E0") {
      prog.competences.forEach(comp => {
        if (COMP_EN_570E0[comp.code]) comp.enonce_en = COMP_EN_570E0[comp.code];
        const elMap = EL_EN_570E0[comp.code] || {};
        comp.elements && comp.elements.forEach(el => {
          if (elMap[el.n]) el.desc_en = elMap[el.n];
        });
      });
    }

    // 420.B0 and 570.G0: FR/EN data already embedded at build time — no patching needed
  });
}
// ── TRANSLATIONS ─────────────────────────────────────────────────────────────
const T = {
  fr: {
    appTitle:"Devis ministériels — Grille d'évaluation",
    scaleDrawerTitle:"Échelle d'évaluation",
    currentScale:"Échelle actuelle",
    addLevel:"+ Ajouter un niveau",
    scaleHint:"Min. 2 niveaux · Le plus bas = 0, le plus haut = 100",
    savedScales:"Échelles enregistrées",
    noSavedScales:"Aucune échelle enregistrée.",
    applyScale:"Appliquer",
    resetDefault:"Réinitialiser par défaut",
    saveScale:"Enregistrer cette échelle…",
    loadScale:"Charger",
    deleteScale:"Supprimer",
    defaultScaleName:"Échelle par défaut",
    importParams:"⬆ Importer paramètres",
    exportParams:"⬇ Exporter paramètres",
    programLabel:"Programme",
    selectProgram:"— Sélectionner un programme —",
    selectProgramPrompt:"Sélectionnez un programme pour afficher les compétences",
    oblSelected:"Obligatoires :",
    optSelected:"Au choix :",
    clearSelection:"Effacer la sélection",
    showElements:"Afficher les éléments des compétences sélectionnées",
    elementsSelected:"élément(s) sélectionné(s)",
    clearElements:"Effacer éléments",
    showCriteria:"Afficher les critères des éléments sélectionnés",
    criteriaSelected:"critère(s) sélectionné(s)",
    clearCriteria:"Effacer critères",
    showConfig:"Configurer la grille d'évaluation",
    rubricConfigTitle:"Configuration de la grille d'évaluation",
    totalPointsLabel:"Points total",
    pointsUnit:"pts",
    scaleLabel:"Échelle d'évaluation",
    editScale:"✎ Modifier",
    openRubric:"Ouvrir la grille dans un nouvel onglet",
    budgetWarning:"⚠ Le total des critères ne correspond pas au total de l'évaluation",
    pointsAssignedLabel:"Assignés :",
    scaleNameLabel:"Nom de l'échelle",
    scaleForThisCrit:"Échelle pour ce critère",
    defaultScaleOption:"(échelle par défaut)",
    saveScale:"Enregistrer cette échelle",
    subdivide:"Subdiviser",
    removeSubdivision:"Retirer subdivision",
    addSubcriterion:"+ Ajouter un sous-critère",
    subSum:"Sous-total",
    pts:"pts",
    obligatoire:"Obligatoire",
    auChoix:"Au choix",
    contextLabel:"Contexte de réalisation",
    clickToSelect:"Cliquez pour sélectionner / désélectionner",
    clickToSelectCrit:"Cliquez pour sélectionner / désélectionner des critères",
    selectCriteriaPrompt:"Sélectionnez d'abord des éléments pour voir leurs critères",
    autoLabel:"(auto — à traduire)",
    unedited:"(non traduit)",
    scaleSaved:"Échelle enregistrée !",
    scaleNamePrompt:"Nom de l'échelle :",
    scaleInvalidWeights:"Les poids doivent être strictement croissants de 0 (bas) à 100 (haut), sans doublons.",
    scaleMinLevels:"L'échelle doit avoir au moins 2 niveaux.",
    distributeEvenly:"Distribuer également",
    pointsLabel:"Points",
    subcriterionLabel:"Sous-critère",
    competencyHeader:"Compétence",
    elementHeader:"Élément",
    criteriaHeader:"Critère / Sous-critère",
    rubricTitle:"Grille d'évaluation",
    courseLabel:"Cours",
    coursePlaceholder:"Ex. : Infographie 1 (420-INF-LA)",
    assessmentLabel:"Évaluation",
    assessmentPlaceholder:"Ex. : Évaluation formative 2",
    studentLabel:"Étudiant·e",
    excelInstructions:"Instructions : Inscrivez un X (ou toute valeur) dans la cellule de la colonne correspondant à votre évaluation. Une seule case par ligne. Ne pas modifier les cellules avec '---' (lignes d'en-tête). Le score se calcule automatiquement.",
    finalizeBtn:"Finaliser la notation",
    exportExcel:"Télécharger la grille (Excel)",
    downloadAsExcel:"Télécharger la grille (Excel)",
    copiesLabel:"copie(s)",
    totalGrade:"Note totale :",
    accumulated:"(accumulée)",
    final:"(FINALE)",
    rowsMissing:"⚠ Des lignes n'ont pas de sélection (surlignées en rouge).",
    rowsComplete:"✓ Toutes les lignes ont une sélection.",
    gradingLocked:"Notation finalisée.",
    noProgSelected:"Aucun programme sélectionné.",
    elementsHeader:"Éléments des compétences sélectionnées",
    criteriaAreaHeader:"Critères des éléments sélectionnés",
    configHint:"Définissez les points pour chaque critère (ou sous-critères).",
    oblListLabel:"Compétences obligatoires",
    optListLabel:"Compétences au choix"
  },
  en: {
    appTitle:"Ministerial Specifications — Evaluation Rubric",
    scaleDrawerTitle:"Rating Scale",
    currentScale:"Current scale",
    addLevel:"+ Add level",
    scaleHint:"Min. 2 levels · Lowest = 0, highest = 100",
    savedScales:"Saved scales",
    noSavedScales:"No saved scales. Import a parameter JSON to load some.",
    applyScale:"Apply",
    resetDefault:"Reset to default",
    saveScale:"Save this scale…",
    loadScale:"Load",
    deleteScale:"Delete",
    defaultScaleName:"Default scale",
    importParams:"⬆ Import parameters",
    exportParams:"⬇ Export parameters",
    programLabel:"Program",
    selectProgram:"— Select a program —",
    selectProgramPrompt:"Select a program to display competencies",
    oblSelected:"Mandatory:",
    optSelected:"Optional:",
    clearSelection:"Clear selection",
    showElements:"Show elements of selected competencies",
    elementsSelected:"element(s) selected",
    clearElements:"Clear elements",
    showCriteria:"Show criteria for selected elements",
    criteriaSelected:"criteria selected",
    clearCriteria:"Clear criteria",
    showConfig:"Configure the evaluation rubric",
    rubricConfigTitle:"Evaluation Rubric Configuration",
    totalPointsLabel:"Total points",
    pointsUnit:"pts",
    scaleLabel:"Rating scale",
    editScale:"✎ Edit",
    openRubric:"Open rubric in a new tab",
    budgetWarning:"⚠ Criteria points do not match total evaluation points",
    pointsAssignedLabel:"Assigned:",
    scaleNameLabel:"Scale name",
    scaleForThisCrit:"Scale for this criterion",
    defaultScaleOption:"(default scale)",
    saveScale:"Save this scale",
    subdivide:"Subdivide",
    removeSubdivision:"Remove subdivision",
    addSubcriterion:"+ Add subcriterion",
    subSum:"Subtotal",
    pts:"pts",
    obligatoire:"Mandatory",
    auChoix:"Optional",
    contextLabel:"Context of achievement",
    clickToSelect:"Click to select / deselect",
    clickToSelectCrit:"Click to select / deselect criteria",
    selectCriteriaPrompt:"First select elements to see their criteria",
    autoLabel:"(auto — to translate)",
    unedited:"(untranslated)",
    scaleSaved:"Scale saved!",
    scaleNamePrompt:"Scale name:",
    scaleInvalidWeights:"Weights must be strictly increasing from 0 (lowest) to 100 (highest), no duplicates.",
    scaleMinLevels:"Scale must have at least 2 levels.",
    distributeEvenly:"Distribute evenly",
    pointsLabel:"Points",
    subcriterionLabel:"Subcriterion",
    competencyHeader:"Competency",
    elementHeader:"Element",
    criteriaHeader:"Criterion / Subcriterion",
    rubricTitle:"Evaluation Rubric",
    courseLabel:"Course",
    coursePlaceholder:"e.g. Introduction to Programming (420-INF-LA)",
    assessmentLabel:"Assessment",
    assessmentPlaceholder:"e.g. Formative Assessment 2",
    studentLabel:"Student",
    excelInstructions:"Instructions: Enter an X (or any value) in the cell of the column matching your rating. One cell per row only. Do not edit cells showing '---' (these are header rows). The score calculates automatically.",
    finalizeBtn:"Finalize grading",
    exportExcel:"Download rubric (Excel)",
    downloadAsExcel:"Download rubric (Excel)",
    copiesLabel:"copy/copies",
    totalGrade:"Total grade:",
    accumulated:"(accumulated)",
    final:"(FINAL)",
    rowsMissing:"⚠ Some rows have no selection (highlighted in red).",
    rowsComplete:"✓ All rows have a selection.",
    gradingLocked:"Grading finalized.",
    noProgSelected:"No program selected.",
    elementsHeader:"Elements of selected competencies",
    criteriaAreaHeader:"Criteria for selected elements",
    configHint:"Assign points to each criterion (or subcriterion).",
    oblListLabel:"Mandatory competencies",
    optListLabel:"Optional competencies"
  }
};

// ── STATE ────────────────────────────────────────────────────────────────────
let lang = 'fr';
let currentProg = null;
const selectedComps   = new Set(); // competency codes
const selectedEls     = new Map(); // compCode -> Set of element indices
const selectedCriteria= new Map(); // "compCode__elN" -> Set of criterion indices (1-based by position in crit array)

// Rubric config state
let totalPoints = 30;

// Default scale
const DEFAULT_SCALE = [
  { label_fr:"Oui",            label_en:"Yes",        weight:100, editedFr:true,  editedEn:true  },
  { label_fr:"Partiellement",  label_en:"Partially",  weight:50,  editedFr:true,  editedEn:true  },
  { label_fr:"Non",            label_en:"No",         weight:0,   editedFr:true,  editedEn:true  },
];
let currentScale = DEFAULT_SCALE.map(s=>({...s}));
let savedScales  = []; // array of {name, scale}

// Criteria point config: "compCode__elN__critIdx" -> { points:N, subcriteria:[ {label_fr, label_en, points, editedFr, editedEn} ] | null }
const critConfig = new Map();

const checkSVG = `<svg width="10" height="8" viewBox="0 0 10 8" fill="none"><path d="M1 4l2.5 2.5L9 1" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

// ── LANGUAGE ─────────────────────────────────────────────────────────────────
function t(key) { return (T[lang] && T[lang][key]) || T.fr[key] || key; }

function setLang(l) {
  lang = l;
  document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.dataset.lang === l));
  document.querySelectorAll('[data-t]').forEach(el => {
    const key = el.dataset.t;
    if (el.tagName === 'OPTION') el.textContent = t(key);
    else if (el.tagName === 'INPUT' && el.type !== 'number') el.placeholder = t(key);
    else el.textContent = t(key);
  });
  document.querySelectorAll('[data-t-placeholder]').forEach(el => {
    el.placeholder = t(el.dataset.tPlaceholder);
  });
  document.title = t('appTitle');
  // Re-render dynamic areas that depend on language
  if (currentProg) { renderLists(); renderElementsArea(); renderCriteriaArea(); renderRubricConfig(); }
  renderScalePreview();
  renderScaleEditor();
}

document.querySelectorAll('.lang-btn').forEach(b => b.addEventListener('click', () => setLang(b.dataset.lang)));

// ── HELPERS ──────────────────────────────────────────────────────────────────
function compLabel(comp) { return lang==='en' && comp.enonce_en ? comp.enonce_en : comp.enonce; }
function elLabel(el)     { return lang==='en' && el.desc_en     ? el.desc_en     : el.desc; }
function critLabel(c)    { return lang==='en' && c.en ? c.en : c; } // crit is a plain string
// For criteria stored in crit[] arrays, use this with element context:
function critLabelFromEl(el, idx) {
  // idx is 0-based
  if (lang === 'en' && el.crit_en && el.crit_en[idx]) return el.crit_en[idx];
  return el.crit[idx];
}

function getCompKind(code) {
  if (!currentProg) return 'obl';
  const c = currentProg.competences.find(x=>x.code===code);
  return c && c.type==='choix' ? 'opt' : 'obl';
}

function critKey(compCode, elN, cIdx) { return `${compCode}__${elN}__${cIdx}`; }

// ── POPULATE DROPDOWN ────────────────────────────────────────────────────────
applyEnTranslations();

const progSelect = document.getElementById('prog-select');
PROGRAMMES.forEach(p => {
  const opt = document.createElement('option');
  opt.value = p.code;
  opt.textContent = `${p.code} — ${p.titre}${p.titre_en ? ' / '+p.titre_en : ''}`;
  progSelect.appendChild(opt);
});

// ── PROGRAM CHANGE ────────────────────────────────────────────────────────────
progSelect.addEventListener('change', () => {
  currentProg = PROGRAMMES.find(p=>p.code===progSelect.value) || null;
  selectedComps.clear(); selectedEls.clear(); selectedCriteria.clear(); critConfig.clear();
  hideAll();
  if (!currentProg) {
    document.getElementById('prog-meta').classList.remove('visible');
    document.getElementById('eval-info-wrap').style.display = 'none';
    document.getElementById('lists-wrap').innerHTML = `<div class="empty-state"><div class="icon">○</div><span>${t('selectProgramPrompt')}</span></div>`;
    return;
  }
  renderMeta();
  document.getElementById('eval-info-wrap').style.display = 'block';
  renderLists();
  updateCompCounts();
  document.getElementById('action-row-wrap').style.display = 'block';
});

function hideAll() {
  ['action-row-wrap','el-action-row-wrap','crit-action-row-wrap'].forEach(id => {
    document.getElementById(id).style.display='none';
  });
  document.getElementById('elements-area').innerHTML=''; document.getElementById('elements-area').style.display='none';
  document.getElementById('criteria-area').innerHTML=''; document.getElementById('criteria-area').style.display='none';
  document.getElementById('rubric-config').classList.remove('visible');
}

// ── META BAR ──────────────────────────────────────────────────────────────────
function renderMeta() {
  const p = currentProg;
  const obl = p.competences.filter(c=>c.type==='obligatoire').length;
  const opt = p.competences.filter(c=>c.type==='choix').length;
  const meta = document.getElementById('prog-meta');
  meta.innerHTML = `
    <div class="meta-item"><span class="meta-label">${t('programLabel')}</span><span class="meta-value">${p.code}</span></div>
    <div class="meta-item"><span class="meta-label">Secteur</span><span class="meta-value" style="font-size:.75rem">${p.secteur}</span></div>
    <div class="meta-item"><span class="meta-label">Année</span><span class="meta-value">${p.annee}</span></div>
    <div class="meta-item"><span class="meta-label">Unités</span><span class="meta-value">${p.unites}</span></div>
    <div class="meta-item"><span class="meta-label">Source</span><span class="meta-value"><a href="${p.source_url}" target="_blank">PDF ↗</a></span></div>
    <div class="meta-item"><span class="meta-label">${t('oblListLabel')}</span><span class="meta-value"><span class="meta-pill obl">${obl}</span></span></div>
    <div class="meta-item"><span class="meta-label">${t('optListLabel')}</span><span class="meta-value"><span class="meta-pill opt">${opt||'—'}</span></span></div>`;
  meta.classList.add('visible');
}

// ── COMPETENCY LIST BOXES ────────────────────────────────────────────────────
function renderLists() {
  const p = currentProg; if(!p) return;
  const oblC = p.competences.filter(c=>c.type==='obligatoire');
  const optC = p.competences.filter(c=>c.type==='choix');
  const w = document.getElementById('lists-wrap');
  w.innerHTML = '';
  const area = document.createElement('div'); area.className='lists-area';
  area.appendChild(buildCompList('obl', t('oblListLabel'), oblC));
  area.appendChild(buildCompList('opt', t('optListLabel'), optC));
  w.appendChild(area);
}

function buildCompList(kind, label, comps) {
  const col = document.createElement('div'); col.className='list-col';
  col.innerHTML = `
    <div class="col-header ${kind}">
      <h2>${label}</h2>
      <span class="col-badge">${comps.length||'—'}</span>
    </div>
    <div class="col-hint">${t('clickToSelect')}</div>`;
  const box = document.createElement('div'); box.className='comp-listbox';
  if (!comps.length) {
    box.innerHTML=`<div class="list-empty">${lang==='fr'?'Toutes les compétences sont obligatoires.':'All competencies are mandatory.'}</div>`;
  } else {
    comps.forEach(comp => {
      const item = document.createElement('div');
      item.className=`list-item ${kind}`; item.dataset.code=comp.code;
      item.innerHTML=`<div class="li-check">${checkSVG}</div><span class="li-code">${comp.code}</span><span class="li-title">${compLabel(comp)}</span>`;
      if (selectedComps.has(comp.code)) item.classList.add('selected');
      item.addEventListener('click', () => {
        if (selectedComps.has(comp.code)) { selectedComps.delete(comp.code); item.classList.remove('selected'); }
        else { selectedComps.add(comp.code); item.classList.add('selected'); }
        updateCompCounts();
      });
      box.appendChild(item);
    });
  }
  col.appendChild(box); return col;
}

function updateCompCounts() {
  let obl=0, opt=0;
  selectedComps.forEach(code => { getCompKind(code)==='opt' ? opt++ : obl++; });
  document.getElementById('obl-count').textContent=obl;
  document.getElementById('opt-count').textContent=opt;
  const total=obl+opt;
  const btn=document.getElementById('btn-show-elements');
  btn.disabled=total===0;
  btn.textContent = total>0
    ? `${t('showElements').replace('compétences sélectionnées','compétences sélectionnées').replace('competencies','competencies')} (${total})`
    : t('showElements');
  // Reset downstream if selection changed
}

document.getElementById('btn-clear-comps').addEventListener('click', () => {
  selectedComps.clear();
  document.querySelectorAll('.list-item.selected').forEach(el=>el.classList.remove('selected'));
  updateCompCounts();
  clearDownstreamFromComps();
});

function clearDownstreamFromComps() {
  selectedEls.clear(); selectedCriteria.clear(); critConfig.clear();
  document.getElementById('elements-area').innerHTML=''; document.getElementById('elements-area').style.display='none';
  document.getElementById('criteria-area').innerHTML=''; document.getElementById('criteria-area').style.display='none';
  document.getElementById('el-action-row-wrap').style.display='none';
  document.getElementById('crit-action-row-wrap').style.display='none';
  document.getElementById('rubric-config').classList.remove('visible');
}

// ── SHOW ELEMENTS ────────────────────────────────────────────────────────────
document.getElementById('btn-show-elements').addEventListener('click', renderElementsArea);

function renderElementsArea() {
  if (!currentProg || selectedComps.size===0) return;
  const area = document.getElementById('elements-area');
  area.innerHTML=''; area.style.display='block';

  const hdr=document.createElement('div'); hdr.className='elements-header';
  hdr.innerHTML=`<h2>${t('elementsHeader')}</h2><span class="hdr-count">${selectedComps.size} ${lang==='fr'?'compétence(s)':'competenc(y/ies)'}</span>`;
  area.appendChild(hdr);

  const ordered = currentProg.competences.filter(c=>selectedComps.has(c.code));
  ordered.forEach((comp,i) => {
    const kind=comp.type==='choix'?'opt':'obl';
    const sec=document.createElement('div'); sec.className='comp-section'; sec.style.animationDelay=`${i*30}ms`;
    const ctxTxt=lang==='en'&&comp.contexte_en?comp.contexte_en:comp.contexte; const ctx=ctxTxt?`<div class="cs-context"><span class="cs-context-lbl">${t('contextLabel')}</span>${ctxTxt}</div>`:'';
    sec.innerHTML=`
      <div class="comp-section-header ${kind}">
        <span class="cs-code">${comp.code}</span>
        <span class="cs-title">${compLabel(comp)}</span>
        <span class="cs-type">${kind==='obl'?t('obligatoire'):t('auChoix')}</span>
      </div>${ctx}
      <div class="el-listbox-wrap">
        <div class="el-hint">${t('clickToSelect')}</div>
        <div class="el-listbox" id="el-lb-${comp.code}"></div>
      </div>`;
    area.appendChild(sec);

    if (!selectedEls.has(comp.code)) selectedEls.set(comp.code, new Set());
    const elSel = selectedEls.get(comp.code);
    const box = sec.querySelector(`#el-lb-${comp.code}`);

    (comp.elements||[]).forEach(el => {
      const item=document.createElement('div'); item.className=`el-item ${kind}`;
      item.innerHTML=`<div class="li-check">${checkSVG}</div><span class="el-num">${el.n}.</span><span class="el-desc">${elLabel(el)}</span>`;
      if (elSel.has(el.n)) item.classList.add('selected');
      item.addEventListener('click',()=>{
        if(elSel.has(el.n)){elSel.delete(el.n);item.classList.remove('selected');}
        else{elSel.add(el.n);item.classList.add('selected');}
        updateElCounts();
      });
      box.appendChild(item);
    });
  });

  document.getElementById('el-action-row-wrap').style.display='block';
  updateElCounts();
}

function updateElCounts() {
  let total=0;
  selectedEls.forEach(s=>total+=s.size);
  document.getElementById('el-count-summary').textContent=`${total} ${t('elementsSelected')}`;
  document.getElementById('btn-show-criteria').disabled=total===0;
}

document.getElementById('btn-clear-elements').addEventListener('click',()=>{
  selectedEls.forEach(s=>s.clear());
  document.querySelectorAll('.el-item.selected').forEach(el=>el.classList.remove('selected'));
  updateElCounts();
  selectedCriteria.clear(); critConfig.clear();
  document.getElementById('criteria-area').innerHTML=''; document.getElementById('criteria-area').style.display='none';
  document.getElementById('crit-action-row-wrap').style.display='none';
  document.getElementById('rubric-config').classList.remove('visible');
});

// ── SHOW CRITERIA ─────────────────────────────────────────────────────────────
document.getElementById('btn-show-criteria').addEventListener('click', renderCriteriaArea);

function renderCriteriaArea() {
  const area=document.getElementById('criteria-area');
  area.innerHTML=''; area.style.display='block';

  const hdr=document.createElement('div'); hdr.className='elements-header';
  hdr.innerHTML=`<h2>${t('criteriaAreaHeader')}</h2>`;
  area.appendChild(hdr);

  const ordered = currentProg.competences.filter(c=>selectedComps.has(c.code));
  let hasSomething=false;
  ordered.forEach(comp=>{
    const elSel=selectedEls.get(comp.code);
    if(!elSel||!elSel.size) return;
    const kind=comp.type==='choix'?'opt':'obl';

    const selEls=(comp.elements||[]).filter(el=>elSel.has(el.n));
    selEls.forEach((el,eli)=>{
      hasSomething=true;
      const elKey=`${comp.code}__${el.n}`;
      if(!selectedCriteria.has(elKey)) selectedCriteria.set(elKey,new Set());
      const critSel=selectedCriteria.get(elKey);

      const sec=document.createElement('div'); sec.className='comp-section';
      sec.innerHTML=`
        <div class="comp-section-header ${kind}" style="gap:6px">
          <span class="cs-code">${comp.code}</span>
          <span class="cs-title" style="font-size:.82rem">${compLabel(comp)} — <em style="font-weight:400;color:var(--ch400)">${el.n}. ${elLabel(el)}</em></span>
        </div>
        <div class="el-listbox-wrap">
          <div class="el-hint">${t('clickToSelectCrit')}</div>
          <div class="el-listbox" id="crit-lb-${comp.code}-${el.n}"></div>
        </div>`;
      area.appendChild(sec);

      const box=sec.querySelector(`#crit-lb-${comp.code}-${el.n}`);
      (el.crit||[]).forEach((c,ci)=>{
        const idx=ci+1;
        const item=document.createElement('div'); item.className=`el-item ${kind}`;
        item.innerHTML=`<div class="li-check">${checkSVG}</div><span class="el-num">${idx}.</span><span class="el-desc">${critLabelFromEl(el,ci)}</span>`;
        if(critSel.has(idx)) item.classList.add('selected');
        item.addEventListener('click',()=>{
          if(critSel.has(idx)){critSel.delete(idx);item.classList.remove('selected');}
          else{critSel.add(idx);item.classList.add('selected');}
          updateCritCounts();
        });
        box.appendChild(item);
      });
    });
  });

  if(!hasSomething) area.innerHTML+=`<div class="empty-state"><span>${t('selectCriteriaPrompt')}</span></div>`;
  document.getElementById('crit-action-row-wrap').style.display='block';
  updateCritCounts();
}

function updateCritCounts(){
  let total=0;
  selectedCriteria.forEach(s=>total+=s.size);
  document.getElementById('crit-count-summary').textContent=`${total} ${t('criteriaSelected')}`;
  document.getElementById('btn-show-config').disabled=total===0;
}

document.getElementById('btn-clear-criteria').addEventListener('click',()=>{
  selectedCriteria.forEach(s=>s.clear());
  document.querySelectorAll('#criteria-area .el-item.selected').forEach(el=>el.classList.remove('selected'));
  updateCritCounts();
  document.getElementById('rubric-config').classList.remove('visible');
});

// ── SHOW RUBRIC CONFIG ────────────────────────────────────────────────────────
document.getElementById('btn-show-config').addEventListener('click', renderRubricConfig);

function renderRubricConfig() {
  const cfg=document.getElementById('rubric-config');
  cfg.classList.add('visible');
  renderScalePreview();
  buildCritConfigCards();
  cfg.scrollIntoView({behavior:'smooth',block:'start'});
  checkBudget();
}

// ── SCALE PREVIEW ─────────────────────────────────────────────────────────────
function renderScalePreview() {
  const el=document.getElementById('scale-preview'); if(!el) return;
  el.innerHTML=currentScale.map(s=>`
    <div class="scale-pill">
      <span class="pill-label">${lang==='en'?s.label_en:s.label_fr}</span>
      <span class="pill-weight">${s.weight}%</span>
    </div>`).join('');
}

// ── BUILD CRITERIA CONFIG CARDS ───────────────────────────────────────────────
function buildCritConfigCards() {
  const container=document.getElementById('crit-config-cards'); container.innerHTML='';
  const total=roundPt(parseFloat(document.getElementById('total-points').value)||30);

  // Collect all selected criteria in order
  const rows=[]; // {compCode, elN, critIdx, critText, comp, el}
  const orderedComps=currentProg.competences.filter(c=>selectedComps.has(c.code));
  orderedComps.forEach(comp=>{
    const elSel=selectedEls.get(comp.code);
    if(!elSel) return;
    (comp.elements||[]).filter(el=>elSel.has(el.n)).forEach(el=>{
      const elKey=`${comp.code}__${el.n}`;
      const critSel=selectedCriteria.get(elKey);
      if(!critSel) return;
      (el.crit||[]).forEach((c,ci)=>{
        if(critSel.has(ci+1)) rows.push({compCode:comp.code,elN:el.n,critIdx:ci+1,critText:c,critTextEn:(el.crit_en&&el.crit_en[ci])||c,comp,el});
      });
    });
  });

  if(!rows.length) return;
  const evenParts=distributeEvenly(total, rows.length);

  // Auto-distribute on first render (if key not yet set)
  rows.forEach((r,ri)=>{
    const k=critKey(r.compCode,r.elN,r.critIdx);
    if(!critConfig.has(k)) critConfig.set(k,{points:evenParts[ri],subcriteria:null,scaleKey:'default'});
  });

  // Group by comp then by element
  let lastComp=null, lastEl=null, section=null, elGroup=null;
  rows.forEach((r,ri)=>{
    if(r.compCode!==lastComp){
      const kind=getCompKind(r.compCode);
      section=document.createElement('div'); section.className='crit-config-section'; section.style.animationDelay=`${ri*20}ms`;
      section.innerHTML=`<div class="crit-section-hdr"><span class="crit-hdr-code">${r.compCode}</span><span class="crit-hdr-title">${compLabel(r.comp)}</span></div>`;
      container.appendChild(section); lastComp=r.compCode; lastEl=null;
    }
    if(r.elN!==lastEl){
      elGroup=document.createElement('div');
      elGroup.innerHTML=`<div class="el-subhdr"><span class="el-subhdr-num">${r.elN}.</span><span>${elLabel(r.el)}</span></div>`;
      section.appendChild(elGroup); lastEl=r.elN;
    }
    elGroup.appendChild(buildCritRow(r, total));
  });

  // Budget bar at the bottom
  updateBudgetDisplay();
}

function buildCritRow(r, total) {
  const k=critKey(r.compCode,r.elN,r.critIdx);
  const cfg=critConfig.get(k);

  const row=document.createElement('div'); row.className='crit-row'; row.dataset.key=k;
  const critText=lang==='en'?(r.critTextEn||critLabel(r.critText)):r.critText;
  const hasSub=!!cfg.subcriteria;

  const scaleOptions=buildScaleOptions(cfg.scaleKey||'default');
  // Scale selector only shown when NOT subdivided
  const scaleSel=hasSub?'':
    `<select class="crit-scale-select" data-key="${k}" title="${t('scaleForThisCrit')}">${scaleOptions}</select>`;

  row.innerHTML=`
    <div class="crit-row-top">
      <div class="crit-row-text">${r.critIdx}. ${critText}</div>
      <div class="crit-row-controls">
        <input type="number" class="pts-input" data-key="${k}" value="${cfg.points}" min="0" max="${total}" step="0.1">
        <span class="pts-label">${t('pts')}</span>
        ${scaleSel}
        <button class="toggle-sub${hasSub?' active':''}" data-key="${k}">${hasSub?t('removeSubdivision'):t('subdivide')}</button>
      </div>
    </div>
    <div class="sub-builder${hasSub?' open':''}" id="sub-${k}"></div>`;

  row.querySelector('.pts-input').addEventListener('input', e=>{
    cfg.points=roundPt(parseFloat(e.target.value)||0);
    e.target.value=cfg.points;
    updateBudgetDisplay();
    if(cfg.subcriteria){ distributeSubPoints(k); renderSubBuilder(k); }
  });

  const selEl=row.querySelector('.crit-scale-select');
  if(selEl) selEl.addEventListener('change', e=>{ cfg.scaleKey=e.target.value; });

  row.querySelector('.toggle-sub').addEventListener('click', e=>{
    const btn=e.currentTarget;
    if(cfg.subcriteria){
      // Restore top-level scaleKey from first sub (so it's not lost)
      cfg.scaleKey=cfg.subcriteria[0].scaleKey||cfg.scaleKey||'default';
      cfg.subcriteria=null;
      row.querySelector('.sub-builder').classList.remove('open');
      row.querySelector('.sub-builder').innerHTML='';
      btn.textContent=t('subdivide'); btn.classList.remove('active');
      // Re-inject the scale selector
      const ctrl=row.querySelector('.crit-row-controls');
      const toggleBtn=ctrl.querySelector('.toggle-sub');
      const sel=document.createElement('select');
      sel.className='crit-scale-select'; sel.dataset.key=k; sel.title=t('scaleForThisCrit');
      sel.innerHTML=buildScaleOptions(cfg.scaleKey);
      sel.addEventListener('change', ev=>{ cfg.scaleKey=ev.target.value; });
      ctrl.insertBefore(sel, toggleBtn);
    } else {
      // Pass current scaleKey down to each sub
      const inheritedKey=cfg.scaleKey||'default';
      cfg.subcriteria=distributeEvenly(cfg.points, 2).map(pts=>({
        label_fr:critText, label_en:critText, points:pts,
        editedFr:false, editedEn:false, scaleKey:inheritedKey
      }));
      // Remove the top-level scale selector
      const existingSel=row.querySelector('.crit-scale-select');
      if(existingSel) existingSel.remove();
      renderSubBuilder(k);
      row.querySelector('.sub-builder').classList.add('open');
      btn.textContent=t('removeSubdivision'); btn.classList.add('active');
    }
    updateBudgetDisplay();
  });

  if(cfg.subcriteria) renderSubBuilder(k);
  return row;
}

// Scale dropdown helpers
function buildScaleOptions(selectedKey) {
  let html=`<option value="default"${selectedKey==='default'?' selected':''}>${t('defaultScaleOption')}</option>`;
  savedScales.forEach((ss,i)=>{
    const key=`saved_${i}`;
    html+=`<option value="${key}"${selectedKey===key?' selected':''}>${ss.name}</option>`;
  });
  return html;
}

function getScaleForKey(key) {
  if(!key||key==='default') return currentScale;
  const m=key.match(/^saved_(\d+)$/);
  if(m){ const ss=savedScales[+m[1]]; return ss?ss.scale:currentScale; }
  return currentScale;
}

function roundPt(v){ return Math.round(v*10)/10; }

// Distribute total into n parts, each 1dp, summing exactly to total
function distributeEvenly(total, n) {
  if(n<=0) return [];
  const base=Math.floor(total/n*10)/10;
  const parts=Array(n).fill(base);
  const deficit=roundPt(total - parts.reduce((a,b)=>a+b,0));
  // Add deficit to last part in 0.1 increments
  let remaining=Math.round(deficit*10);
  for(let i=0; remaining>0 && i<n; i++,remaining--){ parts[i]=roundPt(parts[i]+0.1); }
  return parts;
}

function renderSubBuilder(k) {
  const cfg=critConfig.get(k);
  const box=document.getElementById(`sub-${k}`); if(!box) return;
  box.innerHTML='';
  const inheritedKey=cfg.scaleKey||'default';

  cfg.subcriteria.forEach((sub,si)=>{
    // Ensure each sub has a scaleKey
    if(!sub.scaleKey) sub.scaleKey=inheritedKey;

    const sRow=document.createElement('div'); sRow.className='sub-row';
    const frCls=sub.editedFr?'':'auto-copy';
    const enCls=sub.editedEn?'':'auto-copy';
    const mainInput=lang==='en'?
      `<input class="sub-label-input ${enCls}" placeholder="${t('subcriterionLabel')}" data-key="${k}" data-si="${si}" data-lang="en" value="${sub.label_en}">`:
      `<input class="sub-label-input ${frCls}" placeholder="${t('subcriterionLabel')}" data-key="${k}" data-si="${si}" data-lang="fr" value="${sub.label_fr}">`;
    sRow.innerHTML=`
      ${mainInput}
      <input type="number" class="sub-pts-input" data-key="${k}" data-si="${si}" value="${sub.points}" min="0" step="0.1">
      <select class="crit-scale-select sub-scale-select" data-key="${k}" data-si="${si}" title="${t('scaleForThisCrit')}">${buildScaleOptions(sub.scaleKey)}</select>
      <span class="pts-label">${t('pts')}</span>
      <button class="btn-rm-sub" data-key="${k}" data-si="${si}">×</button>`;

    sRow.querySelector('.sub-label-input').addEventListener('input', e=>{
      const l=e.target.dataset.lang;
      if(l==='fr'){sub.label_fr=e.target.value; sub.editedFr=true; e.target.classList.remove('auto-copy');}
      else{sub.label_en=e.target.value; sub.editedEn=true; e.target.classList.remove('auto-copy');}
      if(l==='fr'&&!sub.editedEn) sub.label_en=sub.label_fr;
      if(l==='en'&&!sub.editedFr) sub.label_fr=sub.label_en;
    });
    sRow.querySelector('.sub-pts-input').addEventListener('input',e=>{
      sub.points=roundPt(parseFloat(e.target.value)||0);
      e.target.value=sub.points;
      updateSubSum(k); updateBudgetDisplay();
    });
    sRow.querySelector('.sub-scale-select').addEventListener('change',e=>{
      sub.scaleKey=e.target.value;
    });
    sRow.querySelector('.btn-rm-sub').addEventListener('click',()=>{
      cfg.subcriteria.splice(si,1);
      if(cfg.subcriteria.length<1) cfg.subcriteria.push({label_fr:'',label_en:'',points:0,editedFr:false,editedEn:false,scaleKey:inheritedKey});
      renderSubBuilder(k); updateBudgetDisplay();
    });
    box.appendChild(sRow);
  });

  // Sum display + add button
  const addRow=document.createElement('div'); addRow.className='sub-add-row';
  const subSum=roundPt(cfg.subcriteria.reduce((a,s)=>a+s.points,0));
  const isOk=Math.abs(subSum-cfg.points)<0.05;
  addRow.innerHTML=`
    <button class="btn-secondary" style="font-size:.68rem;padding:4px 10px" id="btn-add-sub-${k}">${t('addSubcriterion')}</button>
    <button class="btn-secondary" style="font-size:.68rem;padding:4px 10px" id="btn-dist-sub-${k}">${t('distributeEvenly')}</button>
    <span class="sub-sum-display ${isOk?'ok':'over'}" id="sub-sum-${k}">${t('subSum')}: ${subSum.toFixed(1)} / ${cfg.points} ${t('pts')}</span>`;
  box.appendChild(addRow);

  addRow.querySelector(`#btn-add-sub-${k}`).addEventListener('click',()=>{
    cfg.subcriteria.push({label_fr:'',label_en:'',points:0,editedFr:false,editedEn:false,scaleKey:inheritedKey});
    renderSubBuilder(k); updateBudgetDisplay();
  });
  addRow.querySelector(`#btn-dist-sub-${k}`).addEventListener('click',()=>{
    distributeSubPoints(k); renderSubBuilder(k); updateBudgetDisplay();
  });
}

function distributeSubPoints(k) {
  const cfg=critConfig.get(k); if(!cfg.subcriteria||!cfg.subcriteria.length) return;
  const parts=distributeEvenly(cfg.points, cfg.subcriteria.length);
  cfg.subcriteria.forEach((s,i)=>s.points=parts[i]);
}

function updateSubSum(k) {
  const cfg=critConfig.get(k); if(!cfg||!cfg.subcriteria) return;
  const sub=document.getElementById(`sub-${k}`); if(!sub) return;
  const sum=cfg.subcriteria.reduce((a,s)=>a+s.points,0);
  const el=sub.querySelector(`#sub-sum-${k}`); if(!el) return;
  const isOk=Math.abs(sum-cfg.points)<0.01;
  el.textContent=`${t('subSum')}: ${sum.toFixed(1)} / ${cfg.points} ${t('pts')}`;
  el.className=`sub-sum-display ${isOk?'ok':'over'}`;
}

function calcAssigned() {
  let used=0;
  critConfig.forEach(cfg=>{
    if(cfg.subcriteria) used+=cfg.subcriteria.reduce((a,s)=>a+roundPt(s.points),0);
    else used+=roundPt(cfg.points);
  });
  return roundPt(used);
}

function updateBudgetDisplay() {
  const total=roundPt(parseFloat(document.getElementById('total-points').value)||30);
  const used=calcAssigned();
  const mismatch=Math.abs(used-total)>0.05;

  // Update assigned counter
  const assignedEl=document.getElementById('points-assigned');
  const totalEchoEl=document.getElementById('points-total-echo');
  if(assignedEl){ assignedEl.textContent=used; assignedEl.style.color=mismatch?'var(--red)':'var(--ch600)'; assignedEl.style.fontWeight=mismatch?'700':'500'; }
  if(totalEchoEl) totalEchoEl.textContent=total;

  // Warning message
  const msgEl=document.getElementById('rubric-budget-msg');
  if(msgEl) msgEl.style.display=mismatch?'inline':'none';

  // Disable open-rubric button when mismatch
  const openBtn=document.getElementById('btn-open-rubric');
  if(openBtn){ openBtn.disabled=mismatch; openBtn.title=mismatch?'Total assigné ('+used+') ≠ total évaluation ('+total+')':'';}
}

function checkBudget() { updateBudgetDisplay(); }

// Total points input
document.getElementById('total-points').addEventListener('input',e=>{
  totalPoints=roundPt(parseFloat(e.target.value)||30);
  redistributePoints();
  buildCritConfigCards();
  updateBudgetDisplay();
});

function redistributePoints() {
  const total=roundPt(parseFloat(document.getElementById('total-points').value)||30);
  const keys=[...critConfig.keys()];
  const n=keys.length; if(!n) return;
  const parts=distributeEvenly(total, n);
  keys.forEach((k,i)=>{
    const cfg=critConfig.get(k);
    cfg.points=parts[i];
    if(cfg.subcriteria) distributeSubPoints(k);
  });
}

// ── SCALE DRAWER ──────────────────────────────────────────────────────────────
document.getElementById('btn-open-scale-drawer').addEventListener('click',()=>{
  renderScaleEditor();
  document.getElementById('scale-drawer').classList.add('open');
  document.getElementById('drawer-overlay').classList.add('active');
});
document.getElementById('btn-close-drawer').addEventListener('click', closeDrawer);
document.getElementById('drawer-overlay').addEventListener('click', closeDrawer);
function closeDrawer() {
  document.getElementById('scale-drawer').classList.remove('open');
  document.getElementById('drawer-overlay').classList.remove('active');
}

// Working copy of scale inside drawer
let drawerScale=[];

function renderScaleEditor() {
  drawerScale=currentScale.map(s=>({...s}));
  redrawScaleRows();
  renderSavedScalesList();
}

function redrawScaleRows() {
  const container=document.getElementById('scale-editor-rows'); container.innerHTML='';
  // Sort by weight descending for display
  const sorted=[...drawerScale].sort((a,b)=>b.weight-a.weight);
  drawerScale=sorted; // keep in weight order

  drawerScale.forEach((level,i)=>{
    const isFirst=i===0, isLast=i===drawerScale.length-1;
    const row=document.createElement('div'); row.className='scale-editor-row';
    const frCls=level.editedFr?'':'auto-copy';
    const enCls=level.editedEn?'':'auto-copy';
    const labelInput=lang==='en'?
      `<input class="scale-lbl ${enCls}" placeholder="Label" value="${level.label_en}" data-i="${i}" data-lang="en">`:
      `<input class="scale-lbl ${frCls}" placeholder="Label" value="${level.label_fr}" data-i="${i}" data-lang="fr">`;
    const wtInput=`<input class="scale-wt${isFirst||isLast?' ':''}${isFirst?'disabled':''}" type="number" min="0" max="100" value="${level.weight}" data-i="${i}" ${isFirst||isLast?'disabled':''}>`;
    const pctLabel=`<span style="font-size:.65rem;color:var(--ch400);min-width:28px">%</span>`;
    row.innerHTML=`
      <span class="scale-drag-handle" title="Drag">⠿</span>
      ${labelInput}
      ${wtInput}${pctLabel}
      <button class="btn-rm-sub" data-i="${i}" title="Remove">×</button>`;

    row.querySelector('.scale-lbl').addEventListener('input',e=>{
      const l=e.target.dataset.lang, idx=+e.target.dataset.i;
      if(l==='fr'){drawerScale[idx].label_fr=e.target.value; drawerScale[idx].editedFr=true; e.target.classList.remove('auto-copy');}
      else{drawerScale[idx].label_en=e.target.value; drawerScale[idx].editedEn=true; e.target.classList.remove('auto-copy');}
      if(l==='fr'&&!drawerScale[idx].editedEn) drawerScale[idx].label_en=drawerScale[idx].label_fr;
      if(l==='en'&&!drawerScale[idx].editedFr) drawerScale[idx].label_fr=drawerScale[idx].label_en;
    });

    const wtEl=row.querySelector('.scale-wt');
    if(wtEl&&!isFirst&&!isLast) wtEl.addEventListener('input',e=>{
      drawerScale[+e.target.dataset.i].weight=parseInt(e.target.value)||0;
      validateScaleWeights();
    });

    row.querySelector('.btn-rm-sub').addEventListener('click',()=>{
      if(drawerScale.length<=2){showScaleError(t('scaleMinLevels'));return;}
      drawerScale.splice(i,1); redrawScaleRows();
    });
    container.appendChild(row);
  });
  validateScaleWeights();
}

function showScaleError(msg){const el=document.getElementById('scale-error');el.textContent=msg;el.style.display='block';setTimeout(()=>el.style.display='none',3000);}
function validateScaleWeights(){
  const sorted=[...drawerScale].sort((a,b)=>b.weight-a.weight);
  // Force ends
  sorted[0].weight=100; sorted[sorted.length-1].weight=0;
  // Check middle values strictly between
  let valid=true;
  for(let i=1;i<sorted.length-1;i++){
    const wt=sorted[i].weight;
    if(wt<=0||wt>=100||wt>=sorted[i-1].weight){valid=false;break;}
  }
  document.getElementById('scale-error').style.display=valid?'none':'block';
  document.getElementById('scale-error').textContent=valid?'':t('scaleInvalidWeights');
  document.getElementById('btn-apply-scale').disabled=!valid;
}

document.getElementById('btn-add-level').addEventListener('click',()=>{
  // Insert new level between max non-100/non-0 or at midpoint
  const mid=Math.round((drawerScale.reduce((a,s)=>a+s.weight,0)/drawerScale.length)*10)/10;
  const newW=drawerScale.length>=3?Math.round(drawerScale[1].weight/2):50;
  drawerScale.push({label_fr:'', label_en:'', weight:newW, editedFr:false, editedEn:false});
  drawerScale.sort((a,b)=>b.weight-a.weight);
  redrawScaleRows();
});

document.getElementById('btn-apply-scale').addEventListener('click',()=>{
  currentScale=drawerScale.map(s=>({...s}));
  renderScalePreview(); closeDrawer(); buildCritConfigCards();
});

document.getElementById('btn-reset-scale').addEventListener('click',()=>{
  drawerScale=DEFAULT_SCALE.map(s=>({...s})); redrawScaleRows();
});

document.getElementById('btn-save-named-scale').addEventListener('click',()=>{
  const nameInput=document.getElementById('scale-name-input');
  const name=(nameInput.value||'').trim();
  if(!name){ nameInput.focus(); nameInput.style.borderColor='var(--red)'; setTimeout(()=>nameInput.style.borderColor='',1500); return; }
  savedScales.push({name, scale:drawerScale.map(s=>({...s}))});
  nameInput.value='';
  renderSavedScalesList();
  // Refresh scale dropdowns on existing crit rows
  refreshCritScaleDropdowns();
});

function refreshCritScaleDropdowns() {
  document.querySelectorAll('.crit-scale-select').forEach(sel=>{
    const k=sel.dataset.key;
    const si=sel.dataset.si!==undefined?+sel.dataset.si:-1;
    let currentVal='default';
    const cfg=critConfig.get(k);
    if(cfg){
      if(si>=0 && cfg.subcriteria && cfg.subcriteria[si]) currentVal=cfg.subcriteria[si].scaleKey||'default';
      else currentVal=cfg.scaleKey||'default';
    }
    sel.innerHTML=buildScaleOptions(currentVal);
  });
}

function renderSavedScalesList(){
  const el=document.getElementById('saved-scales-list');
  el.innerHTML='';

  // Always show the default scale first
  const defItem=document.createElement('div'); defItem.className='default-scale-item';
  const defLevels=DEFAULT_SCALE.map(s=>lang==='en'?s.label_en:s.label_fr).join(' / ');
  defItem.innerHTML=`
    <span class="ssi-name">${t('defaultScaleName')}</span>
    <span class="ssi-levels">${defLevels}</span>
    <div class="ssi-btns">
      <button class="btn-ssi" id="btn-load-default">${t('loadScale')}</button>
    </div>`;
  defItem.querySelector('#btn-load-default').addEventListener('click',()=>{
    drawerScale=DEFAULT_SCALE.map(s=>({...s})); redrawScaleRows();
  });
  el.appendChild(defItem);

  if(!savedScales.length) return;

  savedScales.forEach((ss,i)=>{
    const item=document.createElement('div'); item.className='saved-scale-item';
    const levels=ss.scale.map(s=>lang==='en'?s.label_en:s.label_fr).join(' / ');
    item.innerHTML=`
      <div style="display:flex;flex-direction:column;gap:1px;flex:1;min-width:0">
        <span class="ssi-name">${ss.name}</span>
        <span class="ssi-levels">${levels}</span>
      </div>
      <div class="ssi-btns">
        <button class="btn-ssi btn-load-saved" data-i="${i}">${t('loadScale')}</button>
        <button class="btn-ssi danger btn-del-saved" data-i="${i}">${t('deleteScale')}</button>
      </div>`;
    item.querySelector('.btn-load-saved').addEventListener('click',e=>{
      e.stopPropagation();
      const idx=+e.currentTarget.dataset.i;
      drawerScale=savedScales[idx].scale.map(s=>({...s})); redrawScaleRows();
    });
    item.querySelector('.btn-del-saved').addEventListener('click',e=>{
      e.stopPropagation();
      const idx=+e.currentTarget.dataset.i;
      savedScales.splice(idx,1);
      renderSavedScalesList();
      refreshCritScaleDropdowns();
    });
    el.appendChild(item);
  });
}

// ── IMPORT / EXPORT ───────────────────────────────────────────────────────────
document.getElementById('btn-export-params').addEventListener('click', exportParams);
document.getElementById('btn-import-params').addEventListener('click',()=>document.getElementById('file-import').click());
document.getElementById('file-import').addEventListener('change',e=>{
  const f=e.target.files[0]; if(!f) return;
  const reader=new FileReader();
  reader.onload=ev=>{try{importParams(JSON.parse(ev.target.result));}catch(err){alert('Invalid JSON: '+err.message);}};
  reader.readAsText(f); e.target.value='';
});

document.getElementById('btn-export-excel-p1').addEventListener('click',()=>{
  const copies=Math.max(1,parseInt(document.getElementById('excel-copies').value)||1);
  openRubricTab(true, copies);
});

function exportParams(){
  const params={
    version:1,
    lang,
    programCode: currentProg?currentProg.code:null,
    course: document.getElementById('inp-course').value||'',
    assessment: document.getElementById('inp-assessment').value||'',
    selectedComps:[...selectedComps],
    selectedEls:{},
    selectedCriteria:{},
    totalPoints,
    scale:currentScale,
    savedScales,
    critConfig:{},
  };
  selectedEls.forEach((s,k)=>params.selectedEls[k]=[...s]);
  selectedCriteria.forEach((s,k)=>params.selectedCriteria[k]=[...s]);
  critConfig.forEach((v,k)=>params.critConfig[k]=v);

  const blob=new Blob([JSON.stringify(params,null,2)],{type:'application/json'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob);
  a.download=`devis_params_${(currentProg?currentProg.code:'export')}_${new Date().toISOString().slice(0,10)}.json`;
  a.click();
}

function importParams(p){
  if(p.lang) setLang(p.lang);
  if(p.scale) currentScale=p.scale;
  if(p.savedScales) savedScales=p.savedScales;
  if(p.totalPoints) { totalPoints=p.totalPoints; document.getElementById('total-points').value=totalPoints; }
  if(p.course!=null)     document.getElementById('inp-course').value=p.course;
  if(p.assessment!=null) document.getElementById('inp-assessment').value=p.assessment;

  selectedComps.clear(); selectedEls.clear(); selectedCriteria.clear(); critConfig.clear();

  if(p.programCode){
    const prog=PROGRAMMES.find(x=>x.code===p.programCode);
    if(prog){
      currentProg=prog;
      progSelect.value=p.programCode;
      renderMeta();
      document.getElementById('eval-info-wrap').style.display='block';
      renderLists();
      document.getElementById('action-row-wrap').style.display='block';
    }
  }

  (p.selectedComps||[]).forEach(c=>{selectedComps.add(c);});
  // Re-apply visual selection
  document.querySelectorAll('.list-item').forEach(item=>{
    if(selectedComps.has(item.dataset.code)) item.classList.add('selected');
  });
  updateCompCounts();

  Object.entries(p.selectedEls||{}).forEach(([k,v])=>selectedEls.set(k,new Set(v)));
  Object.entries(p.selectedCriteria||{}).forEach(([k,v])=>selectedCriteria.set(k,new Set(v)));
  Object.entries(p.critConfig||{}).forEach(([k,v])=>critConfig.set(k,v));

  if(selectedComps.size>0){
    renderElementsArea();
    if([...selectedEls.values()].some(s=>s.size>0)){
      renderCriteriaArea();
      if([...selectedCriteria.values()].some(s=>s.size>0)){
        renderRubricConfig();
      }
    }
  }
  renderScalePreview();
}

// ── OPEN RUBRIC (new tab) ─────────────────────────────────────────────────────
document.getElementById('btn-open-rubric').addEventListener('click', ()=>openRubricTab(false));

function openRubricTab(autoExport, copies){
  copies = copies || 1;
  const total=roundPt(parseFloat(document.getElementById('total-points').value)||30);
  // Build rubric rows
  const rows=[]; // {type:'header'|'row', ...data}
  let lastComp=null, lastEl=null, lastCritKey=null;

  const orderedComps=currentProg.competences.filter(c=>selectedComps.has(c.code));
  orderedComps.forEach(comp=>{
    const elSel=selectedEls.get(comp.code); if(!elSel) return;
    (comp.elements||[]).filter(el=>elSel.has(el.n)).forEach(el=>{
      const elKey=`${comp.code}__${el.n}`;
      const critSel=selectedCriteria.get(elKey); if(!critSel) return;
      (el.crit||[]).forEach((c,ci)=>{
        if(!critSel.has(ci+1)) return;
        const k=critKey(comp.code,el.n,ci+1);
        const cfg=critConfig.get(k)||{points:0,subcriteria:null};

        // Section headers
        if(comp.code!==lastComp){
          rows.push({type:'comp-header', code:comp.code, label_fr:comp.enonce, label_en:comp.enonce_en||comp.enonce, kind:comp.type==='choix'?'opt':'obl'});
          lastComp=comp.code; lastEl=null;
        }
        if(el.n!==lastEl){
          rows.push({type:'el-header', compCode:comp.code, n:el.n, label_fr:el.desc, label_en:el.desc_en||el.desc});
          lastEl=el.n; lastCritKey=null;
        }

        // Criterion row or subcriteria rows
        if(cfg.subcriteria){
          rows.push({type:'crit-header', compCode:comp.code, elN:el.n, critIdx:ci+1, label_fr:c, label_en:(el.crit_en&&el.crit_en[ci])||c, pts:cfg.points});
          cfg.subcriteria.forEach((sub,si)=>{
            rows.push({type:'row', compCode:comp.code, elN:el.n, critIdx:ci+1, subIdx:si,
              label_fr:sub.label_fr, label_en:sub.label_en, pts:sub.points, key:`${k}__sub${si}`, scaleKey:sub.scaleKey||cfg.scaleKey||'default'});
          });
        } else {
          rows.push({type:'row', compCode:comp.code, elN:el.n, critIdx:ci+1, subIdx:-1,
            label_fr:c, label_en:(el.crit_en&&el.crit_en[ci])||c, pts:cfg.points, key:k, scaleKey:cfg.scaleKey||'default'});
        }
      });
    });
  });

  // Build HTML for the rubric page
  const scaleJson=JSON.stringify(currentScale);
  const rowsJson=JSON.stringify(rows);
  const progName=lang==='en'?(currentProg.titre_en||currentProg.titre):currentProg.titre;
  const langJson=JSON.stringify(lang);
  const tJson=JSON.stringify(T);
  const savedScalesJson=JSON.stringify(savedScales);
  const courseVal=JSON.stringify(document.getElementById('inp-course').value||'');
  const assessmentVal=JSON.stringify(document.getElementById('inp-assessment').value||'');

  const rubricHTML=`<!DOCTYPE html>
<html lang="${lang}">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>${t('rubricTitle')} — ${progName}</title>
<style>
@font-face{font-family:'Modern Gothic';font-weight:400;font-display:swap;src:local('Modern Gothic'),local('Modern Gothic Regular'),url('https://dam.lcieducation.com/1fipm6Snk5jh2rLnFu4uq2hg8_sNzVmOTU5OWM0YzA4MDQ5/ModernGothic-Regular.woff2') format('woff2')}
@font-face{font-family:'Modern Gothic';font-weight:500;font-display:swap;src:local('Modern Gothic Medium'),url('https://dam.lcieducation.com/1fidCrXy5z5kbAmnhACmEhth5_sYWE3Njc1ZTY2OGYwM2E1/ModernGothic-Medium.woff2') format('woff2')}
@font-face{font-family:'Modern Gothic';font-weight:700;font-display:swap;src:local('Modern Gothic Bold'),url('https://dam.lcieducation.com/1fihEASn3qmjdpL2S77vCoz7w_sOWYzOTAxMGM2OTk3OTI5/ModernGothic-Bold.woff2') format('woff2')}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:14px}
body{background:#f8f5e9;color:#07181e;font-family:'Modern Gothic',system-ui,sans-serif;font-weight:400;line-height:1.5}
h1,h2,h3{font-weight:400;letter-spacing:-.03em;line-height:1}
header{background:#07181e;padding:0 28px;height:52px;display:flex;align-items:center;gap:14px;position:sticky;top:0;z-index:100}
.hdr-div{width:1px;height:20px;background:#343d41}
header h1{font-size:.9rem;color:#fff;flex:1}
.hdr-right{display:flex;gap:8px;align-items:center}
.lang-toggle{display:flex;background:#2a3438;border-radius:100px;padding:2px;gap:2px}
.lang-btn{background:transparent;border:none;color:#6d7478;font-size:.68rem;font-weight:500;padding:3px 9px;border-radius:100px;cursor:pointer}
.lang-btn.active{background:#00587c;color:#fff}
.btn{padding:8px 16px;border-radius:6px;font-family:inherit;font-size:.8rem;font-weight:500;cursor:pointer;border:none;transition:all .2s}
.btn-primary{background:#00587c;color:#fff}.btn-primary:hover{background:#00435e}
.btn-primary:disabled{background:#babfc0;color:#6d7478;cursor:not-allowed}
.btn-secondary{background:transparent;border:1px solid #c7c4ba;color:#576266}.btn-secondary:hover{background:#e5e2d6}
.btn-red{background:#eb2d37;color:#fff}.btn-red:hover{background:#ce2831}
.shell{max-width:1200px;margin:0 auto;padding:24px 28px 80px}
.meta-fields{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:20px;padding:14px 18px;background:#fff;border:1px solid #c7c4ba;border-radius:10px}
.meta-field{display:flex;flex-direction:column;gap:3px;flex:1;min-width:180px}
.meta-field label{font-size:.62rem;letter-spacing:.08em;text-transform:uppercase;color:#6d7478}
.meta-field input{background:#f8f5e9;border:1px solid #c7c4ba;border-radius:6px;padding:6px 10px;font-family:inherit;font-size:.88rem;color:#07181e}
.meta-field input:focus{outline:2px solid #b8d0da;border-color:#00587c}
.instructions{background:#e0ebef;border:1px solid #b8d0da;border-radius:8px;padding:10px 16px;margin-bottom:18px;font-size:.75rem;color:#00435e;line-height:1.5}
.grade-row{display:flex;align-items:center;gap:16px;margin-bottom:20px;padding:14px 18px;background:#07181e;border-radius:10px;color:#fff;flex-wrap:wrap}
.grade-label{font-size:.82rem;color:#9ca3a5}
.grade-value{font-size:1.6rem;font-weight:500;letter-spacing:-.02em;color:#fff}
.grade-max{font-size:.85rem;color:#6d7478}
.grade-status{font-size:.78rem;padding:3px 10px;border-radius:100px}
.grade-status.accumulated{background:rgba(0,88,124,.35);color:#b8d0da}
.grade-status.final{background:rgba(74,222,128,.2);color:#4ade80;font-weight:500}
.grade-msg{font-size:.75rem;flex:1}
.grade-msg.error{color:#f7abaf}
.grade-msg.ok{color:#4ade80}
.rubric-actions{display:flex;gap:8px;margin-left:auto;flex-wrap:wrap}
/* TABLE */
.table-wrap{overflow-x:auto}
table{width:100%;border-collapse:collapse;background:#fff;border-radius:10px;overflow:hidden;border:1px solid #c7c4ba}
thead th{background:#07181e;color:#fff;padding:10px 12px;font-size:.72rem;font-weight:500;letter-spacing:.02em;text-align:left;white-space:nowrap;position:sticky;top:52px;z-index:10}
thead th.scale-col{text-align:center;cursor:help;min-width:70px}
thead th.pts-col{text-align:right;min-width:60px}
thead th.score-col{text-align:right;min-width:70px;background:#00354a}
/* Header rows */
tr.comp-hdr td{background:#07181e;color:#fff;padding:8px 12px;font-size:.78rem;font-weight:500}
tr.comp-hdr td .hdr-code{background:rgba(255,255,255,.15);padding:1px 7px;border-radius:3px;font-size:.65rem;margin-right:8px}
tr.el-hdr td{background:#2a3438;color:#babfc0;padding:6px 12px 6px 24px;font-size:.74rem}
tr.el-hdr td .el-num{color:#6d7478;margin-right:6px}
tr.crit-hdr td{background:#e5e2d6;color:#424f54;padding:5px 12px 5px 36px;font-size:.72rem;font-style:italic}
/* Data rows */
tr.data-row td{padding:8px 12px;border-bottom:1px solid #e5e2d6;vertical-align:middle;font-size:.78rem}
tr.data-row:last-child td{border-bottom:none}
tr.data-row td.label-cell{padding-left:44px;color:#343d41;line-height:1.4;max-width:380px}
tr.data-row td.scale-cell{text-align:center}
tr.data-row td.pts-cell{text-align:right;color:#6d7478;font-size:.72rem}
tr.data-row td.score-cell{text-align:right;font-weight:500;color:#00587c;font-size:.82rem}
tr.data-row.missing td{background:#fde8e9}
/* Checkbox radio-button style */
.rb-wrap{display:flex;justify-content:center}
.rb{width:18px;height:18px;border-radius:50%;border:2px solid #c7c4ba;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s;background:#fff;flex-shrink:0}
.rb:hover{border-color:#00587c;background:#e0ebef}
.rb.checked{border-color:#00587c;background:#00587c}
.rb.checked::after{content:'';width:7px;height:7px;border-radius:50%;background:#fff}
.rb.locked{cursor:not-allowed;opacity:.7}
/* Hidden utility cols */
.hidden-col{display:none}
::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#c7c4ba;border-radius:10px}
@media print{header,#rubric-actions-bottom,.rubric-actions,.lang-toggle{display:none}body{background:#fff}table{font-size:11px}.shell{padding:10px}}

  /* ── Notes column ── */
  th.note-col{min-width:180px;text-align:left}
  td.note-cell{vertical-align:top;padding:4px 8px}
  .note-wrap{display:flex;flex-direction:column;gap:3px}
  .note-textarea{width:100%;min-height:40px;max-height:120px;resize:vertical;font-family:inherit;font-size:.74rem;border:1px solid #c7c4ba;border-radius:4px;padding:4px 6px;background:#faf8f2;color:#07181e;line-height:1.4}
  .note-textarea:focus{outline:2px solid #b8d0da;border-color:#00587c;background:#fff}
  .note-textarea:disabled{background:#f0ece0;color:#6d7478;resize:none}
  .note-datalist-wrap{position:relative}
  .note-quick{width:100%;font-size:.68rem;border:1px solid #e5e2d6;border-radius:4px;padding:2px 5px;background:#f8f5e9;color:#576266;cursor:pointer}
  .note-quick:focus{outline:2px solid #b8d0da;border-color:#00587c}
  /* ── Student navigation bar ── */
  .student-bar{background:#07181e;border-radius:10px;padding:10px 16px;margin-bottom:16px;display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  .student-bar-label{font-size:.68rem;letter-spacing:.06em;text-transform:uppercase;color:#6d7478}
  .student-tabs{display:flex;gap:4px;flex:1;flex-wrap:wrap;align-items:center}
  .student-tab{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);border-radius:100px;color:#babfc0;font-size:.72rem;padding:3px 10px;cursor:pointer;transition:all .15s;white-space:nowrap}
  .student-tab:hover{background:rgba(255,255,255,.15)}
  .student-tab.active{background:#00587c;border-color:#00587c;color:#fff;font-weight:500}
  .student-tab.done{border-color:rgba(74,222,128,.4);color:#4ade80}
  .student-tab.done.active{background:rgba(74,222,128,.2);border-color:#4ade80}
  .btn-nav{background:transparent;border:1px solid rgba(255,255,255,.15);color:#babfc0;border-radius:6px;padding:4px 10px;font-size:.75rem;cursor:pointer;transition:all .15s}
  .btn-nav:hover{background:rgba(255,255,255,.1);color:#fff}
  /* ── Post-finalize action row ── */
  .post-finalize-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
</style>
</head>
<body>
<header>
  <div class="hdr-div"></div>
  <h1 id="hdr-title"></h1>
  <div class="hdr-right" style="display:flex;gap:6px;align-items:center">
    <div class="lang-toggle">
      <button class="lang-btn" data-lang="fr">FR</button>
      <button class="lang-btn" data-lang="en">EN</button>
    </div>
    <div style="width:1px;height:18px;background:rgba(255,255,255,.12);margin:0 2px"></div>
    <button class="btn btn-secondary" id="btn-import-notes" style="font-size:.72rem;padding:5px 10px">⬆ Importer notes</button>
    <button class="btn btn-secondary" id="btn-export-notes" style="font-size:.72rem;padding:5px 10px">⬇ Exporter notes</button>
    <input type="file" id="file-import-notes" accept=".json" style="display:none">
    <div style="width:1px;height:18px;background:rgba(255,255,255,.12);margin:0 2px"></div>
    <button class="btn btn-secondary" id="btn-import-grading" style="font-size:.72rem;padding:5px 10px">⬆ Importer notation</button>
    <button class="btn btn-secondary" id="btn-export-grading" style="font-size:.72rem;padding:5px 10px">⬇ Exporter notation</button>
    <input type="file" id="file-import-grading" accept=".json" style="display:none">
  </div>
</header>
<main class="shell">
  <div class="meta-fields">
    <div id="rubric-header-text" style="flex:1;min-width:0"></div>
  </div>
  <div class="instructions" id="instructions-box" style="display:none"></div>
  <!-- Student navigation bar -->
  <div class="student-bar" id="student-bar">
    <span class="student-bar-label" id="lbl-students-nav">Étudiants</span>
    <div class="student-tabs" id="student-tabs"></div>
    <button class="btn-nav" id="btn-add-student">+ Nouv.</button>
    <button class="btn-nav" id="btn-finalize-all" style="display:none;background:rgba(74,222,128,.15);border-color:rgba(74,222,128,.4);color:#4ade80"></button>
  </div>
  <!-- Student name field + per-student grade row -->
  <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px;flex-wrap:wrap">
    <div class="meta-field" style="min-width:220px;flex:1;max-width:340px">
      <label id="lbl-student" style="font-size:.62rem;letter-spacing:.08em;text-transform:uppercase;color:#6d7478;display:block;margin-bottom:3px"></label>
      <input id="inp-student" type="text" placeholder="" style="width:100%;background:#fff;border:1px solid #c7c4ba;border-radius:6px;padding:7px 10px;font-family:inherit;font-size:.88rem;color:#07181e">
    </div>
    <div class="grade-row" style="flex:1;margin-bottom:0">
      <div>
        <div class="grade-label" id="lbl-grade"></div>
        <span class="grade-value" id="grade-value">0</span>
        <span class="grade-max" id="grade-max"></span>
      </div>
      <span class="grade-status accumulated" id="grade-status"></span>
      <span class="grade-msg" id="grade-msg"></span>
      <div class="rubric-actions">
        <button class="btn btn-primary" id="btn-finalize"></button>
        <button class="btn btn-secondary" id="btn-start-over" style="display:none"></button>
        <button class="btn btn-primary" id="btn-next-student" style="display:none"></button>
      </div>
    </div>
  </div>
  <div class="table-wrap">
    <table id="rubric-table"></table>
  </div>
  <div id="rubric-actions-bottom" style="margin-top:16px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
    <button class="btn btn-primary" id="btn-finalize2"></button>
    <button class="btn btn-secondary" id="btn-start-over2" style="display:none"></button>
    <button class="btn btn-primary" id="btn-next-student2" style="display:none"></button>
    <div style="flex:1"></div>
    <input type="number" id="excel-copies-rt" value="1" min="1" max="30" style="width:54px;padding:6px 7px;border:1px solid #c7c4ba;border-radius:6px;font-family:inherit;font-size:.8rem;text-align:center">
    <span id="lbl-copies-rt" style="font-size:.75rem;color:#6d7478"></span>
    <button class="btn btn-secondary" id="btn-export-excel"></button>
  </div>
</main>
<script>
const SCALE=${scaleJson};
const ROWS=${rowsJson};
const TOTAL=${total};
const PROG_NAME=${JSON.stringify(progName)};
let LANG=${langJson};
const TR=${tJson};
const SAVED_SCALES=${savedScalesJson};
const COURSE=${courseVal};
const ASSESSMENT=${assessmentVal};
const AUTO_EXPORT=${autoExport};
const COPIES=${copies};

function tr(k){ return (TR[LANG]&&TR[LANG][k])||TR.fr[k]||k; }

function getRowScale(row){
  const key=row.scaleKey||'default';
  if(key==='default') return SCALE;
  const m=key.match(/^saved_(\d+)$/);
  if(m){ const ss=SAVED_SCALES[+m[1]]; return ss?ss.scale:SCALE; }
  return SCALE;
}

function setLang(l){
  LANG=l;
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active',b.dataset.lang===l));
  applyLabels();
  rebuildTable();
  updateGrade();
}
document.querySelectorAll('.lang-btn').forEach(b=>b.addEventListener('click',()=>setLang(b.dataset.lang)));

function applyLabels(){
  document.getElementById(\'hdr-title\').textContent=tr(\'rubricTitle\')+\' \u2014 \'+PROG_NAME;
  const hdrEl=document.getElementById(\'rubric-header-text\');
  if(hdrEl){
    var html=\'\';
    if(COURSE)      html+=\'<div style="font-size:.68rem;letter-spacing:.06em;text-transform:uppercase;color:var(--ch300);margin-bottom:1px">\'+tr(\'courseLabel\')+\'</div><div style="font-size:.95rem;font-weight:500;color:var(--charcoal);margin-bottom:8px">\'+COURSE+\'</div>\';
    if(ASSESSMENT)  html+=\'<div style="font-size:.68rem;letter-spacing:.06em;text-transform:uppercase;color:var(--ch300);margin-bottom:1px">\'+tr(\'assessmentLabel\')+\'</div><div style="font-size:.88rem;color:var(--charcoal)">\'+ASSESSMENT+\'</div>\';
    if(!COURSE&&!ASSESSMENT) html=\'<div style="font-size:.88rem;font-style:italic;color:var(--ch300)">\'+PROG_NAME+\'</div>\';
    hdrEl.innerHTML=html;
  }
  document.getElementById(\'lbl-student\').textContent=tr(\'studentLabel\');
  document.getElementById(\'lbl-grade\').textContent=tr(\'totalGrade\');
  document.getElementById(\'grade-max\').textContent=\'/ \'+TOTAL+\' pts\';
  document.getElementById(\'btn-finalize\').textContent=tr(\'finalizeBtn\');
  document.getElementById(\'btn-finalize2\').textContent=tr(\'finalizeBtn\');
  document.getElementById(\'btn-export-excel\').textContent=tr(\'exportExcel\');
  document.getElementById(\'grade-status\').textContent=tr(\'accumulated\');
  const lblCopies=document.getElementById(\'lbl-copies-rt\');
  if(lblCopies) lblCopies.textContent=tr(\'copiesLabel\');
  const copiesInput=document.getElementById(\'excel-copies-rt\');
  if(copiesInput && COPIES>1) copiesInput.value=COPIES;
  const bImp=document.getElementById(\'btn-import-grading\');
  if(bImp) bImp.textContent=rt(\'importGrading\');
  const bExp=document.getElementById(\'btn-export-grading\');
  if(bExp) bExp.textContent=rt(\'exportGrading\');
}

// ── STUDENT & NOTES STATE ────────────────────────────────────────────────
// Each student: { name, selections:{key:si}, notes:{key:text}, locked:bool }
let students    = [{ name:'', selections:{}, notes:{}, locked:false }];
let curIdx      = 0;
let savedNotes  = []; // {text} — available for autocomplete

function curStudent(){ return students[curIdx]; }

function getSelections(){ return curStudent().selections; }
function getNotes()     { return curStudent().notes; }
function isLocked()     { return curStudent().locked; }

// ── TRANSLATIONS (rubric-specific new keys) ──────────────────────────────
// These are already in TR from the main page; adding fallbacks here
const RT = {
  fr:{
    studentsNav:'Étudiants', addStudent:'+ Nouveau', startOver:'Recommencer',
    nextStudent:'Étudiant suivant', startOverQ:'Effacer et recommencer pour cet étudiant ?',
    notesCol:'Observations', savedNoteHint:'Notes enregistrées…',
    saveNote:'Enregistrer', loadNote:'Charger note',
    finalizeBtn:'Finaliser', validateAll:'Valider', allComplete:'Notation complète ✓',
    incompleteStudents:'Incomplets',
    importGrading:'⬆ Importer notation',
    exportGrading:'⬇ Exporter notation', studentLabel:'Étudiant·e',
    noName:'Étudiant', gradeLabel:'Note totale :', noNotes:'Aucune note enregistrée'
  },
  en:{
    studentsNav:'Students', addStudent:'+ New', startOver:'Start over',
    nextStudent:'Next student', startOverQ:'Clear and start over for this student?',
    notesCol:'Observations', savedNoteHint:'Saved notes…',
    saveNote:'Save', loadNote:'Load note',
    finalizeBtn:'Finalize', validateAll:'Validate', allComplete:'Grading complete ✓',
    incompleteStudents:'Incomplete',
    importGrading:'⬆ Import grading',
    exportGrading:'⬇ Export grading', studentLabel:'Student',
    noName:'Student', gradeLabel:'Total grade:', noNotes:'No saved notes'
  }
};
function rt(k){ return (RT[LANG]&&RT[LANG][k]) || (TR[LANG]&&TR[LANG][k]) || RT.fr[k] || k; }

// ── RENDER STUDENT NAV BAR ───────────────────────────────────────────────
function renderStudentBar(incompleteIndices){
  const incomplete=incompleteIndices||[];
  const tabs = document.getElementById('student-tabs');
  if(!tabs) return;
  tabs.innerHTML='';
  students.forEach((s,i)=>{
    const tab=document.createElement('button');
    const isIncomplete=incomplete.includes(i);
    tab.className='student-tab'+(i===curIdx?' active':'')+(s.locked?' done':'')+(isIncomplete?' incomplete':'');
    if(isIncomplete){
      tab.style.borderColor='rgba(235,45,55,.6)';
      tab.style.color='#f7abaf';
      tab.style.background='rgba(235,45,55,.15)';
    }
    tab.textContent=(s.name||rt('noName')+' '+(i+1));
    tab.title=s.locked?'✓ Finalisé':isIncomplete?rt('incompleteStudents'):'';
    tab.addEventListener('click',()=>switchStudent(i));
    tabs.appendChild(tab);
  });
  const lbl=document.getElementById('lbl-students-nav');
  if(lbl) lbl.textContent=rt('studentsNav');
  const addBtn=document.getElementById('btn-add-student');
  if(addBtn) addBtn.textContent=rt('addStudent');
  // Student name input reflects current
  const inp=document.getElementById('inp-student');
  if(inp) inp.value=curStudent().name||'';
}

function switchStudent(i){
  // Save current student name before switching
  const inp=document.getElementById('inp-student');
  if(inp) curStudent().name=inp.value;
  curIdx=i;
  renderStudentBar();
  rebuildTable();
  updateGrade();
  updateActionButtons();
}

function addStudent(){
  const inp=document.getElementById('inp-student');
  if(inp) curStudent().name=inp.value;
  students.push({name:'',selections:{},notes:{},locked:false});
  curIdx=students.length-1;
  renderStudentBar();
  rebuildTable();
  updateGrade();
  updateActionButtons();
  if(inp){ inp.value=''; inp.focus(); }
}

function startOver(){
  if(!confirm(rt('startOverQ'))) return;
  students[curIdx]={name:curStudent().name,selections:{},notes:{},locked:false};
  rebuildTable(); updateGrade(); updateActionButtons();
}

function nextStudent(){
  const inp=document.getElementById('inp-student');
  if(inp) curStudent().name=inp.value;
  addStudent();
}

function updateActionButtons(){
  const locked=isLocked();
  ['btn-finalize','btn-finalize2'].forEach(id=>{
    const b=document.getElementById(id);
    if(b){ b.textContent=rt('finalizeBtn'); b.style.display=locked?'none':'inline-block'; b.disabled=false; }
  });
  ['btn-start-over','btn-start-over2'].forEach(id=>{
    const b=document.getElementById(id);
    if(b){ b.textContent=rt('startOver'); b.style.display=locked?'inline-block':'none'; }
  });
  ['btn-next-student','btn-next-student2'].forEach(id=>{
    const b=document.getElementById(id);
    if(b){ b.textContent=rt('nextStudent'); b.style.display=locked?'inline-block':'none'; }
  });
  // grade status
  const gs=document.getElementById('grade-status');
  if(gs){ gs.textContent=locked?tr('final'):tr('accumulated'); gs.className='grade-status '+(locked?'final':'accumulated'); }
  // validate-all button: always visible
  const faBtn=document.getElementById('btn-finalize-all');
  if(faBtn){
    faBtn.style.display='inline-block';
    faBtn.disabled=false;
    faBtn.textContent=rt('validateAll');
    faBtn.style.background='rgba(255,255,255,.08)';
    faBtn.style.borderColor='rgba(255,255,255,.2)';
    faBtn.style.color='#e8eaed';
  }
}

// ── SAVED NOTES AUTOCOMPLETE ─────────────────────────────────────────────
const NOTES_DATALIST_ID='saved-notes-dl';

function ensureNotesDatalist(){
  let dl=document.getElementById(NOTES_DATALIST_ID);
  if(!dl){ dl=document.createElement('datalist'); dl.id=NOTES_DATALIST_ID; document.body.appendChild(dl); }
  dl.innerHTML=savedNotes.map((n,i)=>\`<option value="\${n.text.replace(/"/g,'&quot;')}"></option>\`).join('');
  return dl;
}

function saveNoteText(text){
  text=(text||'').trim();
  if(!text||savedNotes.some(n=>n.text===text)) return;
  savedNotes.push({text});
  ensureNotesDatalist();
}

// ── TABLE ─────────────────────────────────────────────────────────────────
function rebuildTable(){
  const table=document.getElementById('rubric-table');
  table.innerHTML='';
  ensureNotesDatalist();
  const locked=isLocked();
  const sel=getSelections();
  const notes=getNotes();

  // Thead
  const thead=document.createElement('thead');
  const hr=document.createElement('tr');
  hr.innerHTML=\`<th style="min-width:260px">\${tr('criteriaHeader')}</th>\`;
  SCALE.forEach((s,si)=>{
    const lbl=LANG==='en'?s.label_en:s.label_fr;
    hr.innerHTML+=\`<th class="scale-col" title="\${s.weight}%">\${lbl}<br><span style="font-size:.6rem;opacity:.6">\${s.weight}%</span></th>\`;
  });
  hr.innerHTML+=\`<th class="pts-col">\${tr('pointsLabel')}</th><th class="score-col">Score</th>\`;
  hr.innerHTML+=\`<th class="note-col">\${rt('notesCol')}</th>\`;
  SCALE.forEach((s,si)=>{ hr.innerHTML+=\`<th class="hidden-col">W\${si}</th>\`; });
  hr.innerHTML+=\`<th class="hidden-col">MaxPts</th>\`;
  thead.appendChild(hr); table.appendChild(thead);

  const tbody=document.createElement('tbody');
  const ncols=SCALE.length+3+1+SCALE.length+1; // label+scales+pts+score+note+hidden

  ROWS.forEach(row=>{
    const tr2=document.createElement('tr');
    if(row.type==='comp-header'){
      tr2.className='comp-hdr';
      const lbl=LANG==='en'?row.label_en:row.label_fr;
      tr2.innerHTML=\`<td colspan="\${ncols}"><span class="hdr-code">\${row.code}</span>\${lbl}</td>\`;
    } else if(row.type==='el-header'){
      tr2.className='el-hdr';
      const lbl=LANG==='en'?row.label_en:row.label_fr;
      tr2.innerHTML=\`<td colspan="\${ncols}"><span class="el-num">\${row.n}.</span>\${lbl}</td>\`;
    } else if(row.type==='crit-header'){
      tr2.className='crit-hdr';
      const lbl=LANG==='en'?row.label_en:row.label_fr;
      tr2.innerHTML=\`<td colspan="\${ncols}">\${lbl} <span style="color:#9ca3a5;margin-left:6px">\${row.pts} pts</span></td>\`;
    } else {
      tr2.className='data-row'; tr2.dataset.key=row.key; tr2.dataset.pts=row.pts;
      if(sel[row.key]===undefined) sel[row.key]=-1;
      const lbl=LANG==='en'?row.label_en:row.label_fr;
      let cells=\`<td class="label-cell">\${lbl}</td>\`;
      const rowScale=getRowScale(row);
      SCALE.forEach((s,si)=>{
        const isSel=sel[row.key]===si;
        cells+=\`<td class="scale-cell"><div class="rb-wrap"><div class="rb\${isSel?' checked':''}\${locked?' locked':''}" data-key="\${row.key}" data-si="\${si}"></div></div></td>\`;
      });
      const score=sel[row.key]>=0?Math.round(row.pts*(rowScale[sel[row.key]]||SCALE[sel[row.key]]||SCALE[0]).weight/100*10)/10:0;
      cells+=\`<td class="pts-cell">\${row.pts}</td><td class="score-cell" id="score-\${row.key}">\${sel[row.key]>=0?score:''}</td>\`;
      // Notes cell
      const noteVal=(notes[row.key]||'').replace(/"/g,'&quot;').replace(/</g,'&lt;');
      cells+=\`<td class="note-cell"><div class="note-wrap">
        <textarea class="note-textarea" data-key="\${row.key}" \${locked?'disabled':''} list="\${NOTES_DATALIST_ID}" rows="2">\${noteVal}</textarea>
        \${!locked?\`<div style="display:flex;gap:4px;align-self:flex-end">
          <button class="btn-secondary note-save-btn" data-key="\${row.key}" style="font-size:.62rem;padding:2px 6px">\${rt('saveNote')}</button>
          <button class="btn-secondary note-load-btn" data-key="\${row.key}" style="font-size:.62rem;padding:2px 6px">\${rt('loadNote')}</button>
        </div>\`:''}
      </div></td>\`;
      SCALE.forEach(s=>cells+=\`<td class="hidden-col">\${s.weight}</td>\`);
      cells+=\`<td class="hidden-col">\${row.pts}</td>\`;
      tr2.innerHTML=cells;
    }
    tbody.appendChild(tr2);
  });
  table.appendChild(tbody);

  if(!locked){
    // Radio button handlers
    table.querySelectorAll('.rb').forEach(rb=>{
      rb.addEventListener('click',()=>{
        const key=rb.dataset.key, si=+rb.dataset.si;
        sel[key]=sel[key]===si?-1:si;
        rebuildTable(); updateGrade();
      });
    });
    // Notes handlers
    table.querySelectorAll('.note-textarea').forEach(ta=>{
      ta.addEventListener('input',e=>{ notes[e.target.dataset.key]=e.target.value; });
      ta.addEventListener('change',e=>{ notes[e.target.dataset.key]=e.target.value; });
    });
    table.querySelectorAll('.note-save-btn').forEach(btn=>{
      btn.addEventListener('click',e=>{
        const key=e.currentTarget.dataset.key;
        const text=(notes[key]||'').trim();
        if(text){ saveNoteText(text); btn.textContent='✓'; setTimeout(()=>btn.textContent=rt('saveNote'),1500); }
      });
    });
    table.querySelectorAll('.note-load-btn').forEach(btn=>{
      btn.addEventListener('click',e=>{
        const key=e.currentTarget.dataset.key;
        if(!savedNotes.length){ btn.textContent='—'; setTimeout(()=>btn.textContent=rt('loadNote'),1000); return; }
        // Build a small dropdown and position it near the button
        let existing=document.getElementById('note-picker-'+key);
        if(existing){ existing.remove(); return; }
        const picker=document.createElement('select');
        picker.id='note-picker-'+key;
        picker.size=Math.min(savedNotes.length+1, 6);
        picker.style.cssText='position:absolute;z-index:200;background:#fff;border:1px solid #c7c4ba;border-radius:6px;font-size:.75rem;font-family:inherit;min-width:220px;max-width:380px;box-shadow:0 4px 16px rgba(7,24,30,.15);color:#07181e;padding:2px';
        const emptyOpt=document.createElement('option');
        emptyOpt.value=''; emptyOpt.textContent='— '+rt('loadNote')+' —';
        emptyOpt.disabled=true; emptyOpt.selected=true;
        picker.appendChild(emptyOpt);
        savedNotes.forEach((n,i)=>{
          const opt=document.createElement('option');
          opt.value=n.text;
          opt.textContent=n.text.length>60?n.text.slice(0,57)+'…':n.text;
          picker.appendChild(opt);
        });
        // Position relative to button
        const rect=btn.getBoundingClientRect();
        picker.style.top=(rect.bottom+window.scrollY+4)+'px';
        picker.style.left=(rect.left+window.scrollX)+'px';
        document.body.appendChild(picker);
        picker.focus();
        picker.addEventListener('change',ev=>{
          const chosen=ev.target.value;
          if(!chosen){ picker.remove(); return; }
          // Find the textarea for this key
          const ta=document.querySelector('.note-textarea[data-key="'+key+'"]');
          if(ta){
            const cur=(ta.value||'').trim();
            ta.value=cur?(cur+'\\n'+chosen):chosen;
            notes[key]=ta.value;
          }
          picker.remove();
        });
        picker.addEventListener('blur',()=>{ setTimeout(()=>picker.remove(),200); });
      });
    });
  }
}

function updateGrade(){
  const sel=getSelections();
  let total=0;
  document.querySelectorAll('tr.data-row').forEach(tr=>{
    const key=tr.dataset.key; const pts=+tr.dataset.pts;
    if(sel[key]>=0){
      const row=ROWS.find(r=>r.key===key);
      const rowScale=row?getRowScale(row):SCALE;
      const score=Math.round(pts*(rowScale[sel[key]]||SCALE[sel[key]]||SCALE[0]).weight/100*10)/10;
      total+=score;
    }
  });
  document.getElementById('grade-value').textContent=Math.round(total*10)/10;
}

function finalize(){
  const sel=getSelections();
  const missing=[];
  document.querySelectorAll('tr.data-row').forEach(tr=>{
    if(sel[tr.dataset.key]<0) missing.push(tr.dataset.key);
  });
  if(missing.length){
    document.getElementById('grade-msg').textContent=tr('rowsMissing');
    document.getElementById('grade-msg').className='grade-msg error';
    document.querySelectorAll('tr.data-row').forEach(tr=>{
      tr.classList.toggle('missing',missing.includes(tr.dataset.key));
    });
    return;
  }
  // Save name from input
  const inp=document.getElementById('inp-student');
  if(inp) curStudent().name=inp.value;
  curStudent().locked=true;
  document.getElementById('grade-msg').textContent=tr('gradingLocked');
  document.getElementById('grade-msg').className='grade-msg ok';
  rebuildTable(); updateGrade(); updateActionButtons(); renderStudentBar();
}

['btn-finalize','btn-finalize2'].forEach(id=>{
  const b=document.getElementById(id); if(b) b.addEventListener('click',finalize);
});

function finalizeAll(){
  // Check ALL students for completeness (locked or not)
  const incomplete=[];
  students.forEach((s,i)=>{
    const sel=s.selections||{};
    const missing=ROWS.filter(r=>r.type==='row'&&(sel[r.key]===undefined||sel[r.key]<0));
    if(missing.length) incomplete.push(i);
  });
  const faBtn=document.getElementById('btn-finalize-all');
  if(incomplete.length){
    renderStudentBar(incomplete);
    if(faBtn){
      const names=incomplete.map(i=>{
        const s=students[i];
        return s.name||(rt('noName')+' '+(i+1));
      });
      faBtn.textContent=rt('incompleteStudents')+': '+names.join(', ');
      faBtn.style.background='rgba(235,45,55,.2)';
      faBtn.style.borderColor='rgba(235,45,55,.5)';
      faBtn.style.color='#f7abaf';
      setTimeout(()=>{ updateActionButtons(); renderStudentBar([]); }, 3000);
    }
  } else {
    // All complete — show success, do NOT lock (locking is per-student only)
    renderStudentBar([]);
    if(faBtn){
      faBtn.textContent=rt('allComplete');
      faBtn.style.background='rgba(74,222,128,.2)';
      faBtn.style.borderColor='rgba(74,222,128,.5)';
      faBtn.style.color='#4ade80';
      setTimeout(()=>updateActionButtons(), 3000);
    }
  }
}

const faBtn=document.getElementById('btn-finalize-all');
if(faBtn) faBtn.addEventListener('click',finalizeAll);
['btn-start-over','btn-start-over2'].forEach(id=>{
  const b=document.getElementById(id); if(b) b.addEventListener('click',startOver);
});
['btn-next-student','btn-next-student2'].forEach(id=>{
  const b=document.getElementById(id); if(b) b.addEventListener('click',nextStudent);
});
const addBtn=document.getElementById('btn-add-student');
if(addBtn) addBtn.addEventListener('click',addStudent);

// Student name input live update
document.getElementById('inp-student').addEventListener('input',e=>{
  curStudent().name=e.target.value; renderStudentBar();
});

// ── IMPORT / EXPORT GRADING ──────────────────────────────────────────────
document.getElementById('btn-export-grading').addEventListener('click',()=>{
  const payload={
    version:2,
    type:'grading',
    SCALE, ROWS, TOTAL, COURSE, ASSESSMENT, LANG, PROG_NAME,
    SAVED_SCALES,
    students:students.map(s=>({...s})),
    savedNotes,
  };
  const blob=new Blob([JSON.stringify(payload,null,2)],{type:'application/json'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob);
  const fname=(COURSE||PROG_NAME).replace(/[\\/:*?"<>|]/g,'_')+'_notation_'+new Date().toISOString().slice(0,10)+'.json';
  a.download=fname; a.click();
});

document.getElementById('btn-import-grading').addEventListener('click',()=>{
  document.getElementById('file-import-grading').click();
});
document.getElementById('file-import-grading').addEventListener('change',e=>{
  const f=e.target.files[0]; if(!f) return;
  const reader=new FileReader();
  reader.onload=ev=>{
    try{
      const p=JSON.parse(ev.target.result);
      if(p.students) students=p.students;
      if(p.savedNotes) savedNotes=p.savedNotes;
      if(p.LANG) { LANG=p.LANG; }
      curIdx=0;
      renderStudentBar(); rebuildTable(); updateGrade(); updateActionButtons(); ensureNotesDatalist();
      if(p.LANG) document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active',b.dataset.lang===p.LANG));
    }catch(err){ alert('Invalid grading file: '+err.message); }
  };
  reader.readAsText(f); e.target.value='';
});

// ── EXCEL EXPORT ─────────────────────────────────────────────────────────
function exportExcel(){
  const script=document.createElement('script');
  script.src='https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js';
  script.onload=()=>doExcelExport();
  if(window.XLSX) doExcelExport();
  else document.head.appendChild(script);
}
document.getElementById('btn-export-excel').addEventListener('click',exportExcel);

function buildStudentSheet(student){
  const sel=student.selections||{};
  const notes=student.notes||{};
  const course=COURSE, assessment=ASSESSMENT;

  const wsData=[];
  wsData.push([tr('excelInstructions')]);
  wsData.push([]);
  if(course)      wsData.push([tr('courseLabel')+': '+course]);
  if(assessment)  wsData.push([tr('assessmentLabel')+': '+assessment]);
  if(student.name) wsData.push([rt('studentLabel')+': '+student.name]);
  wsData.push([]);

  // Header
  const headerRow=[tr('criteriaHeader')];
  SCALE.forEach(s=>headerRow.push(LANG==='en'?s.label_en:s.label_fr));
  headerRow.push(tr('pointsLabel'),'Score',rt('notesCol'));
  SCALE.forEach((s,si)=>headerRow.push('_W'+si));
  headerRow.push('_MaxPts');
  wsData.push(headerRow);

  const dataRows=[];
  ROWS.forEach(row=>{
    if(row.type==='comp-header'||row.type==='el-header'||row.type==='crit-header'){
      const lbl=(LANG==='en'?row.label_en:row.label_fr)||'';
      const prefix=row.type==='comp-header'?'['+row.code+'] ':row.type==='el-header'?'  '+row.n+'. ':'    ';
      const r=[prefix+lbl];
      SCALE.forEach(()=>r.push('---'));
      r.push('---','---','---');
      SCALE.forEach(()=>r.push(''));
      r.push('');
      wsData.push(r); dataRows.push(null);
    } else {
      const lbl=LANG==='en'?row.label_en:row.label_fr;
      const rowScale=getRowScale(row);
      const selIdx=sel[row.key]!=null?sel[row.key]:-1;
      // Scale cells: put scale label if selected, else empty
      const r=[lbl];
      SCALE.forEach((s,si)=>{
        r.push(selIdx===si?(LANG==='en'?s.label_en:s.label_fr):'');
      });
      r.push(row.pts,'');  // pts, score (formula)
      r.push(notes[row.key]||''); // note
      SCALE.forEach((s,si)=>{
        const w=rowScale[si]!==undefined?rowScale[si].weight:s.weight;
        r.push(w);
      });
      r.push(row.pts);
      dataRows.push(wsData.length);
      wsData.push(r);
    }
  });

  // Total row
  const totalRowIdx=wsData.length;
  const totR=[tr('totalGrade')];
  SCALE.forEach(()=>totR.push('---'));
  totR.push('---','');
  totR.push('---');
  SCALE.forEach(()=>totR.push(''));
  totR.push('');
  wsData.push(totR);

  return {wsData, dataRows, totalRowIdx};
}

function doExcelExport(){
  const wb=XLSX.utils.book_new();
  // Export all students who have any data, plus if copies > students, add blanks
  const copies=Math.max(1,parseInt((document.getElementById('excel-copies-rt')||{value:'1'}).value)||1);
  const sheetsToExport=[];

  // First: all students with data
  students.forEach((s,i)=>{
    const hasData=Object.keys(s.selections||{}).some(k=>(s.selections[k]>=0));
    sheetsToExport.push({student:s, hasData});
  });

  // Fill up to copies with blank sheets
  while(sheetsToExport.length < copies){
    sheetsToExport.push({student:{name:'',selections:{},notes:{},locked:false}, hasData:false});
  }

  sheetsToExport.forEach(({student, hasData},ci)=>{
    const sheetName=(student.name||('E'+(ci+1))).replace(/[\\/:*?"<>[\]]/g,'').slice(0,31)||'E'+(ci+1);
    const {wsData, dataRows, totalRowIdx}=buildStudentSheet(student);

    const ws=XLSX.utils.aoa_to_sheet(wsData);
    const noteColIdx=1+SCALE.length+1+1; // after score
    const scoreColIdx=1+SCALE.length+1;

    // Score formulas
    dataRows.forEach((r,di)=>{
      if(r===null) return;
      // Find the row's pts value from wsData
      const rowPts=wsData[r][1+SCALE.length]; // pts is at col N+1
      let formula='';
      SCALE.forEach((s,si)=>{
        const sc=XLSX.utils.encode_cell({r,c:1+si});
        const wc=XLSX.utils.encode_cell({r,c:1+SCALE.length+2+1+si}); // weight col
        if(formula) formula+='+';
        // Embed pts directly as literal — no hidden MaxPts reference needed
        formula+='IF('+sc+'<>"",'+wc+'/100*'+rowPts+',0)';
      });
      ws[XLSX.utils.encode_cell({r,c:scoreColIdx})]={t:'n',f:formula};
    });

    // Total SUM
    const scoreCells=dataRows.filter(r=>r!==null).map(r=>XLSX.utils.encode_cell({r,c:scoreColIdx}));
    if(scoreCells.length>0){
      ws[XLSX.utils.encode_cell({r:totalRowIdx,c:scoreColIdx})]={t:'n',f:'SUM('+scoreCells.join(',')+')'};
    }

    // Column widths
    ws['!cols']=[{wch:44},...SCALE.map(()=>({wch:12})),{wch:8},{wch:10},{wch:30},...SCALE.map(()=>({wch:8})),{wch:8}];
    XLSX.utils.book_append_sheet(wb,ws,sheetName);
  });

  const fname=(COURSE||PROG_NAME).replace(/[\\/:*?"<>|]/g,'_')+'_'+new Date().toISOString().slice(0,10)+'.xlsx';
  XLSX.writeFile(wb,fname);
}

// ── NOTES IMPORT / EXPORT ───────────────────────────────────────────────
document.getElementById('btn-export-notes').addEventListener('click',()=>{
  if(!savedNotes.length){
    const b=document.getElementById('btn-export-notes');
    b.textContent='— '+rt('noNotes')+''; setTimeout(()=>b.textContent='📋 Notes ⬇',1500); return;
  }
  const payload={ version:1, type:'notes', savedNotes };
  const blob=new Blob([JSON.stringify(payload,null,2)],{type:'application/json'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob);
  a.download='notes_'+(COURSE||PROG_NAME).replace(/[\/:*?"<>|]/g,'_')+'_'+new Date().toISOString().slice(0,10)+'.json';
  a.click();
});

document.getElementById('btn-import-notes').addEventListener('click',()=>{
  document.getElementById('file-import-notes').click();
});
document.getElementById('file-import-notes').addEventListener('change',e=>{
  const f=e.target.files[0]; if(!f) return;
  const reader=new FileReader();
  reader.onload=ev=>{
    try{
      const p=JSON.parse(ev.target.result);
      const incoming=(p.savedNotes||p||[]);
      if(!Array.isArray(incoming)) throw new Error('Invalid format');
      let added=0;
      incoming.forEach(n=>{
        const text=(n.text||n||'').trim();
        if(text && !savedNotes.some(x=>x.text===text)){ savedNotes.push({text}); added++; }
      });
      ensureNotesDatalist();
      const b=document.getElementById('btn-import-notes');
      b.textContent='✓ +'+added; setTimeout(()=>b.textContent='📋 Notes ⬆',2000);
    }catch(err){ alert('Invalid notes file: '+err.message); }
  };
  reader.readAsText(f); e.target.value='';
});

// ── INIT ──────────────────────────────────────────────────────────────────
setLang(LANG);
renderStudentBar();
rebuildTable();
updateGrade();
updateActionButtons();
ensureNotesDatalist();
if(AUTO_EXPORT){
  setTimeout(()=>exportExcel(), 300);
}

<\/script>
</body>
</html>`;

  const blob = new Blob([rubricHTML], {type: 'text/html'});
  const url  = URL.createObjectURL(blob);
  const w    = window.open(url, '_blank');
  if (!w) {
    const a = document.createElement('a');
    a.href = url; a.download = 'grille.html'; a.click();
  }
}


// Init
renderScalePreview();
</script>
</body>
</html>
