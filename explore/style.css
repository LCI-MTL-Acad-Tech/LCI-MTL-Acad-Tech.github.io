@font-face {
  font-family: 'Modern Gothic';
  src: local('Modern Gothic'), local('Modern Gothic Regular'),
       url('https://dam.lcieducation.com/1fipm6Snk5jh2rLnFu4uq2hg8_sNzVmOTU5OWM0YzA4MDQ5/ModernGothic-Regular.woff2') format('woff2');
  font-weight: 400; font-display: swap;
}
@font-face {
  font-family: 'Modern Gothic';
  src: local('Modern Gothic Medium'),
       url('https://dam.lcieducation.com/1fidCrXy5z5kbAmnhACmEhth5_sYWE3Njc1ZTY2OGYwM2E1/ModernGothic-Medium.woff2') format('woff2');
  font-weight: 500; font-display: swap;
}
@font-face {
  font-family: 'LCI Education Color Logos';
  src: local('LCI Education Color Logos'),
       url('https://dam.lcieducation.com/LCI-Education/Brand-management/Font/lci-color-logos.woff2?func=proxy') format('woff2');
  font-display: block;
}

:root {
  --blue:#00587c; --red:#eb2d37; --cream:#f8f5e9; --charcoal:#07181e;
  --cobalt:#685ef7; --canary:#f2f537; --taupe:#cdc19e;
  --trans: all 0.25s cubic-bezier(0.4,0.14,0.3,1);
}
*, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }
body {
  font-family: 'Modern Gothic', system-ui, -apple-system, sans-serif;
  font-weight: 400; background: var(--cream); color: var(--charcoal);
  min-height: 100vh; line-height: 1.4;
}

/* HEADER */
header {
  display:flex; align-items:center; justify-content:space-between;
  padding:0 32px; height:56px; background:var(--charcoal);
  position:sticky; top:0; z-index:200;
}
.header-left { display:flex; align-items:center; gap:14px; }
.lci-logo { font-family:'LCI Education Color Logos',sans-serif; speak:never; line-height:1; -webkit-font-smoothing:antialiased; }
.lang-toggle { display:flex; gap:4px; }
.lang-btn {
  background:none; border:1px solid rgba(248,245,233,0.2); color:rgba(248,245,233,0.45);
  font-family:'Modern Gothic',system-ui,sans-serif; font-size:11px; font-weight:500;
  letter-spacing:0.05em; text-transform:uppercase; padding:5px 10px; border-radius:4px;
  cursor:pointer; transition:var(--trans);
}
.lang-btn.active { background:rgba(248,245,233,0.12); border-color:rgba(248,245,233,0.4); color:var(--cream); }
.lang-btn:hover:not(.active) { border-color:rgba(248,245,233,0.3); color:rgba(248,245,233,0.7); }

/* SCREENS */
.page { min-height:calc(100vh - 56px); display:flex; flex-direction:column; }
.screen { display:none; flex:1; flex-direction:column; }
.screen.active { display:flex; }

/* WELCOME */
#screen-welcome {
  align-items:center; justify-content:center; padding:48px 24px;
  background:var(--charcoal); position:relative; overflow:hidden;
}
.ws { position:absolute; border-radius:50%; opacity:0.06; pointer-events:none; }
.ws1 { width:600px;height:600px;background:var(--cobalt);top:-200px;right:-150px; }
.ws2 { width:400px;height:400px;background:var(--red);bottom:-100px;left:-100px; }
.ws3 { width:250px;height:250px;background:var(--canary);bottom:80px;right:120px;border-radius:8px 8px 8px 50%; }
.welcome-inner { position:relative;z-index:1;text-align:center;max-width:520px; }
.welcome-logo { margin-bottom:24px; }
.welcome-eyebrow {
  font-size:12px; font-weight:500; letter-spacing:0.12em; text-transform:uppercase;
  color:rgba(248,245,233,0.45); margin-bottom:10px;
}
.welcome-title { font-size:clamp(32px,6vw,52px);font-weight:400;letter-spacing:-0.04em;line-height:1;color:var(--cream);margin-bottom:16px; }
.welcome-sub { font-size:16px;color:rgba(248,245,233,0.5);margin-bottom:40px;line-height:1.5; }
.btn-start {
  display:inline-flex;align-items:center;gap:10px;background:var(--red);color:white;
  font-family:'Modern Gothic',system-ui,sans-serif;font-size:15px;padding:14px 32px;
  border-radius:8px;border:none;cursor:pointer;transition:var(--trans);
}
.btn-start:hover { background:#ce2831;transform:translateY(-1px); }
.btn-start .arr { transition:var(--trans); }
.btn-start:hover .arr { transform:translateX(4px); }

/* SHARED FORM */
.form-screen { align-items:center; padding:48px 24px 80px; }
.form-wrap { width:100%; max-width:580px; }
.step-label { font-size:11px;font-weight:500;letter-spacing:0.1em;text-transform:uppercase;color:rgba(7,24,30,0.35);margin-bottom:8px; }
.screen-q { font-size:clamp(20px,3.5vw,28px);letter-spacing:-0.03em;line-height:1.2;color:var(--charcoal);margin-bottom:28px; }
.pdots { display:flex;gap:6px;margin-bottom:28px; }
.pdot { width:6px;height:6px;border-radius:50%;background:rgba(7,24,30,0.15);transition:var(--trans); }
.pdot.done { background:var(--blue); }
.pdot.current { background:var(--blue);transform:scale(1.4); }
.opt-list { display:flex;flex-direction:column;gap:10px; }
.opt-btn {
  display:flex;align-items:center;gap:14px;background:white;
  border:1.5px solid rgba(7,24,30,0.1);border-radius:10px;
  padding:14px 18px;cursor:pointer;transition:var(--trans);
  font-family:'Modern Gothic',system-ui,sans-serif;font-size:15px;color:var(--charcoal);width:100%;text-align:left;
}
.opt-btn:hover { border-color:var(--blue);background:rgba(0,88,124,0.04); }
.opt-btn.sel { border-color:var(--blue);background:rgba(0,88,124,0.07); }
.opt-icon { width:34px;height:34px;border-radius:7px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:17px;background:rgba(7,24,30,0.05); }
.opt-main { font-size:15px;display:block; }
.opt-sub  { font-size:12px;color:rgba(7,24,30,0.4);display:block;margin-top:2px; }
.nav-row { display:flex;align-items:center;justify-content:space-between;margin-top:28px; }
.btn-back {
  background:none;border:1.5px solid rgba(7,24,30,0.15);color:rgba(7,24,30,0.5);
  font-family:'Modern Gothic',system-ui,sans-serif;font-size:14px;padding:10px 20px;
  border-radius:8px;cursor:pointer;transition:var(--trans);
}
.btn-back:hover { border-color:var(--charcoal);color:var(--charcoal); }
.btn-next {
  background:var(--blue);color:white;font-family:'Modern Gothic',system-ui,sans-serif;
  font-size:14px;padding:10px 24px;border-radius:8px;border:none;cursor:pointer;
  transition:var(--trans);opacity:0.3;pointer-events:none;
}
.btn-next.ready { opacity:1;pointer-events:auto; }
.btn-next.ready:hover { background:#004f70; }
.warn-box {
  display:none;background:rgba(235,45,55,0.07);border:1.5px solid rgba(235,45,55,0.2);
  border-radius:8px;padding:14px 16px;margin-top:12px;font-size:13px;color:#7a1217;line-height:1.55;
}
.warn-box.show { display:block; }

/* QUIZ */
#screen-quiz { align-items:center;padding:48px 24px 80px; }
.quiz-wrap { width:100%;max-width:600px; }
.qpbar { height:3px;background:rgba(7,24,30,0.08);border-radius:2px;margin-bottom:36px;overflow:hidden; }
.qpfill { height:100%;background:var(--blue);border-radius:2px;transition:width 0.4s cubic-bezier(0.4,0.14,0.3,1);width:0%; }
.quiz-eyebrow { font-size:11px;font-weight:500;letter-spacing:0.1em;text-transform:uppercase;color:rgba(7,24,30,0.35);margin-bottom:10px;text-align:center; }
.quiz-q { font-size:clamp(18px,3vw,26px);letter-spacing:-0.03em;line-height:1.2;margin-bottom:32px;text-align:center; }
.choice-pair { display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:10px; }
.choice-card {
  background:white;border:1.5px solid rgba(7,24,30,0.1);border-radius:12px;
  padding:20px 16px;cursor:pointer;transition:var(--trans);text-align:center;
  font-family:'Modern Gothic',system-ui,sans-serif;font-size:14px;color:var(--charcoal);
  line-height:1.4;min-height:88px;display:flex;align-items:center;justify-content:center;position:relative;
}
.choice-card:hover { border-color:var(--blue);background:rgba(0,88,124,0.04);transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,88,124,0.1); }
.choice-card.sel-a,.choice-card.sel-b { border-color:var(--blue);background:rgba(0,88,124,0.07); }
.choice-card.sel-both { border-color:#5b8000;background:rgba(91,128,0,0.06); }
.cc-dot {
  position:absolute;top:8px;right:8px;width:16px;height:16px;border-radius:50%;
  background:var(--blue);display:none;align-items:center;justify-content:center;
}
.choice-card.sel-a .cc-dot,.choice-card.sel-b .cc-dot { display:flex; }
.choice-card.sel-both .cc-dot { display:flex;background:#5b8000; }
.cc-dot svg { width:9px;height:9px;fill:white; }
.choice-actions { display:flex; gap:10px; margin-bottom:28px; }
.btn-both {
  flex:1; background:none; border:1.5px solid rgba(7,24,30,0.15); border-radius:10px;
  padding:11px; font-family:'Modern Gothic',system-ui,sans-serif;
  font-size:13px; color:rgba(7,24,30,0.6); cursor:pointer; transition:var(--trans);
}
.btn-both:hover { border-color:#5b8000; color:#5b8000; background:rgba(91,128,0,0.04); }
.btn-neither {
  flex:1; background:none; border:1.5px solid rgba(7,24,30,0.1); border-radius:10px;
  padding:11px; font-family:'Modern Gothic',system-ui,sans-serif;
  font-size:13px; color:rgba(7,24,30,0.4); cursor:pointer; transition:var(--trans);
  margin-bottom:0;
}
.btn-neither:hover { border-color:rgba(7,24,30,0.25); color:rgba(7,24,30,0.6); }
.conf-wrap { background:white;border:1.5px solid rgba(7,24,30,0.08);border-radius:10px;padding:14px 18px; }
.conf-hdr { font-size:11px;font-weight:500;letter-spacing:0.08em;text-transform:uppercase;color:rgba(7,24,30,0.35);margin-bottom:8px;display:flex;justify-content:space-between; }
.conf-track { height:4px;background:rgba(7,24,30,0.08);border-radius:2px;overflow:hidden; }
.conf-fill { height:100%;background:var(--blue);border-radius:2px;transition:width 0.5s cubic-bezier(0.4,0.14,0.3,1);width:0%; }

/* RESULTS */
#screen-results { padding:40px 24px 80px;align-items:center; }
.results-wrap { width:100%;max-width:680px; }
.results-top { display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:32px;flex-wrap:wrap;gap:16px; }
.results-hdg h2 { font-size:clamp(24px,4vw,36px);letter-spacing:-0.04em;line-height:1;margin-bottom:6px; }
.results-hdg p  { font-size:14px;color:rgba(7,24,30,0.45); }

/* Inline refine panel */
.refine-panel {
  background:white; border:1.5px solid rgba(7,24,30,0.1); border-radius:14px;
  padding:20px 22px; margin-bottom:20px;
}
.refine-panel-inner {}
.refine-q {
  font-size:clamp(15px,2.5vw,18px); letter-spacing:-0.02em; line-height:1.3;
  color:var(--charcoal); margin-bottom:18px; text-align:center;
}
.refine-panel .choice-pair { margin-bottom:10px; }
.refine-panel .choice-actions { margin-bottom:0; }

/* No more questions message */
.no-more-q {
  font-size:13px; color:rgba(7,24,30,0.4); text-align:center;
  padding:14px 0 4px; letter-spacing:0.01em;
}

/* btn-kg now standalone below panel area */
.btn-kg {
  display:inline-flex; align-items:center; gap:8px; background:white;
  border:1.5px solid rgba(7,24,30,0.15); color:rgba(7,24,30,0.6);
  font-family:'Modern Gothic',system-ui,sans-serif; font-size:13px;
  padding:9px 18px; border-radius:8px; cursor:pointer; transition:var(--trans);
  white-space:nowrap; margin-bottom:20px;
}
.btn-kg:hover { border-color:var(--blue); color:var(--blue); }
.btn-kg.hidden { display:none; }
.rc {
  background:white;border:1.5px solid rgba(7,24,30,0.08);border-radius:14px;
  overflow:hidden;margin-bottom:14px;transition:var(--trans);
}
.rc:hover { box-shadow:0 4px 24px rgba(7,24,30,0.08);transform:translateY(-1px); }
.rc-header { display:flex;align-items:center;gap:16px;padding:18px 22px;border-left:4px solid transparent; }
.thumbs { display:flex;gap:3px;flex-shrink:0; }
.thumb { width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center; }
.thumb svg { width:12px;height:12px; }
.t-full { background:var(--charcoal); }
.t-full svg { fill:var(--cream); }
.t-empty { background:rgba(7,24,30,0.08); }
.t-empty svg { fill:rgba(7,24,30,0.25); }
.rc-info { flex:1;min-width:0; }
.rc-badge {
  font-size:10px;font-weight:500;letter-spacing:0.07em;text-transform:uppercase;
  padding:2px 8px;border-radius:4px;display:inline-block;margin-bottom:5px;
}
.badge-dec { background:rgba(0,88,124,0.1);color:#004f70; }
.badge-aec { background:rgba(235,45,55,0.1);color:#9b1a20; }
.rc-name { font-size:17px;letter-spacing:-0.02em;line-height:1.2; }
.rc-meta { font-size:11px;color:rgba(7,24,30,0.4);margin-top:3px; }
.rc-code { font-size:11px;color:rgba(7,24,30,0.3);font-weight:500;letter-spacing:0.03em; }
.rc-expand-btn {
  background:none;border:none;cursor:pointer;padding:8px;color:rgba(7,24,30,0.35);
  font-size:18px;line-height:1;transition:var(--trans);flex-shrink:0;
}
.rc-expand-btn:hover { color:var(--charcoal); }
.rc.open .rc-expand-btn { transform:rotate(180deg); }

/* Stage 3 detail panel */
.rc-detail {
  display:none;border-top:1px solid rgba(7,24,30,0.07);padding:0 22px 20px;
}
.rc.open .rc-detail { display:block; }
.detail-grid { display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px; }
.detail-block { background:rgba(7,24,30,0.03);border-radius:8px;padding:14px; }
.detail-block.full { grid-column:1/-1; }
.detail-lbl {
  font-size:10px;font-weight:500;letter-spacing:0.09em;text-transform:uppercase;
  color:rgba(7,24,30,0.35);margin-bottom:8px;
}
.detail-txt { font-size:13px;line-height:1.6;color:rgba(7,24,30,0.8); }
.detail-list { list-style:none;padding:0; }
.detail-list li {
  font-size:13px;line-height:1.5;color:rgba(7,24,30,0.8);
  padding:4px 0;border-bottom:1px solid rgba(7,24,30,0.05);
}
.detail-list li:last-child { border-bottom:none; }
.detail-list li::before { content:'â†’ ';color:rgba(7,24,30,0.25);font-size:11px; }

/* Warn */
.rc-warn {
  display:none;background:rgba(235,45,55,0.06);border-top:1px solid rgba(235,45,55,0.12);
  padding:10px 22px;font-size:13px;color:#7a1217;line-height:1.5;
}
.rc-warn.show { display:block; }
.global-warn {
  display:none;background:rgba(235,45,55,0.06);border:1.5px solid rgba(235,45,55,0.15);
  border-radius:8px;padding:12px 16px;font-size:13px;color:#7a1217;margin-top:8px;line-height:1.5;
}
.global-warn.show { display:block; }

/* Footer */
.results-footer { display:flex;gap:10px;flex-wrap:wrap;margin-top:28px; }
.btn-reset {
  flex:1;min-width:140px;background:none;border:1.5px solid rgba(7,24,30,0.15);
  color:rgba(7,24,30,0.6);font-family:'Modern Gothic',system-ui,sans-serif;
  font-size:14px;padding:12px 20px;border-radius:8px;cursor:pointer;transition:var(--trans);
}
.btn-reset:hover { border-color:var(--charcoal);color:var(--charcoal); }
.btn-export {
  flex:2;min-width:200px;background:var(--charcoal);color:var(--cream);
  font-family:'Modern Gothic',system-ui,sans-serif;font-size:14px;padding:12px 24px;
  border-radius:8px;border:none;cursor:pointer;transition:var(--trans);
}
.btn-export:hover { background:#0e2a36; }

/* Share button */
.btn-share {
  flex:1; min-width:120px; background:none;
  border:1.5px solid rgba(7,24,30,0.15); color:rgba(7,24,30,0.6);
  font-family:'Modern Gothic',system-ui,sans-serif; font-size:14px;
  padding:12px 20px; border-radius:8px; cursor:pointer; transition:var(--trans);
  display:flex; align-items:center; justify-content:center; gap:7px;
}
.btn-share:hover { border-color:var(--blue); color:var(--blue); }
.btn-share svg { width:15px; height:15px; flex-shrink:0; }

/* Share menu fallback */
.share-menu {
  display:none; position:fixed; bottom:0; left:0; right:0; z-index:500;
  background:white; border-radius:16px 16px 0 0;
  box-shadow:0 -4px 32px rgba(7,24,30,0.15);
  padding:16px 24px 32px;
}
.share-menu.open { display:block; }
.share-menu-header {
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:20px;
}
.share-menu-title { font-size:15px; letter-spacing:-0.01em; }
.share-menu-close {
  background:none; border:none; cursor:pointer; font-size:22px;
  color:rgba(7,24,30,0.4); line-height:1; padding:4px;
}
.share-menu-close:hover { color:var(--charcoal); }
.share-options { display:flex; flex-direction:column; gap:8px; }
.share-opt {
  display:flex; align-items:center; gap:14px;
  background:rgba(7,24,30,0.03); border:none; border-radius:10px;
  padding:14px 16px; cursor:pointer; transition:var(--trans);
  font-family:'Modern Gothic',system-ui,sans-serif; font-size:15px; color:var(--charcoal);
  width:100%; text-align:left;
}
.share-opt:hover { background:rgba(7,24,30,0.07); }
.share-opt-icon { width:36px; height:36px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:18px; flex-shrink:0; }
.share-backdrop {
  display:none; position:fixed; inset:0; z-index:499;
  background:rgba(7,24,30,0.4);
}
.share-backdrop.open { display:block; }
.share-copied {
  display:none; text-align:center; font-size:13px; color:#2E7D5E;
  margin-top:12px; padding:8px; border-radius:6px;
  background:rgba(46,125,94,0.08);
}
.share-copied.show { display:block; }

/* Result card link */
.rc-link {
  display:flex; align-items:center; gap:6px;
  font-size:12px; color:var(--blue); text-decoration:none;
  margin-top:4px; opacity:0.8; transition:var(--trans);
}
.rc-link:hover { opacity:1; }
.rc-link svg { width:11px; height:11px; flex-shrink:0; }

@media(max-width:580px){
  header { padding:0 16px; }
  .choice-pair { grid-template-columns:1fr; gap:10px; }
  .detail-grid { grid-template-columns:1fr; }
  .detail-block.full { grid-column:1; }
  .results-footer { flex-direction:column; }
  .results-top { flex-direction:column; gap:12px; }
  .btn-kg { width:100%; justify-content:center; }
  .rc-header { padding:14px 16px; gap:12px; }
  .rc-name { font-size:15px; }
  .thumbs .thumb { width:20px; height:20px; }
  .thumbs .thumb svg { width:10px; height:10px; }
  .quiz-wrap { padding:0 4px; }
  .choice-card { min-height:76px; font-size:13px; padding:16px 12px; }
  .form-wrap { padding:0 4px; }
  .opt-btn { padding:12px 14px; }
  .welcome-inner { padding:0 8px; }
  .results-wrap { padding:0 4px; }
}
@media(max-width:380px){
  .welcome-title { font-size:28px; }
  .btn-start { padding:12px 24px; font-size:14px; }
}
